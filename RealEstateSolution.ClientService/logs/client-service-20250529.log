2025-05-29 16:05:12.047 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:05:12.398 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:05:12.513 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:05:12.515 +08:00 [INF] Hosting environment: Development
2025-05-29 16:05:12.516 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:05:15.230 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:05:15.262 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:05:15.274 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 46.4938ms
2025-05-29 16:05:15.424 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 163.2964ms
2025-05-29 16:05:15.968 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:05:16.050 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 81.9419ms
2025-05-29 16:08:30.369 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:08:30.633 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:08:30.767 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:08:30.769 +08:00 [INF] Hosting environment: Development
2025-05-29 16:08:30.771 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:08:32.389 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:08:32.420 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:08:32.451 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 49.3177ms
2025-05-29 16:08:32.556 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 138.0202ms
2025-05-29 16:08:33.077 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:08:33.120 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 42.686ms
2025-05-29 16:17:41.871 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:17:42.028 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:17:42.034 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:17:42.036 +08:00 [INF] Hosting environment: Development
2025-05-29 16:17:42.039 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:18:04.813 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/health - null null
2025-05-29 16:18:04.836 +08:00 [INF] 接收请求: GET /health
2025-05-29 16:18:04.838 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 16:18:04.840 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 16:18:04.841 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell/5.1.26100.2161
2025-05-29 16:18:04.877 +08:00 [INF] Executing endpoint 'Health checks'
2025-05-29 16:18:05.348 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:18:05.350 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:18:05.351 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:18:05.353 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:18:05.355 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:18:05.356 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:18:05.717 +08:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-29 16:18:05.813 +08:00 [INF] Executed endpoint 'Health checks'
2025-05-29 16:18:05.818 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/health - 200 null application/json; charset=utf-8 1006.842ms
2025-05-29 16:19:08.255 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:19:08.492 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:19:08.858 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:19:08.861 +08:00 [INF] Hosting environment: Development
2025-05-29 16:19:08.863 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:19:09.356 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:19:09.423 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 68.7211ms
2025-05-29 16:19:09.715 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:19:09.829 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.6994ms
2025-05-29 16:19:10.294 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:19:10.363 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.3606ms
2025-05-29 16:20:02.824 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/api/Client?pageIndex=1&pageSize=10 - null null
2025-05-29 16:20:02.838 +08:00 [INF] 接收请求: GET /api/Client
2025-05-29 16:20:02.841 +08:00 [INF] 请求头: Accept = text/plain
2025-05-29 16:20:02.843 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 16:20:02.844 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 16:20:02.845 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 16:20:02.846 +08:00 [INF] 请求头: Accept-Language = zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6
2025-05-29 16:20:02.848 +08:00 [INF] 请求头: Referer = https://localhost:5003/swagger/index.html
2025-05-29 16:20:02.850 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 16:20:02.851 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 16:20:02.852 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 16:20:02.853 +08:00 [INF] 请求头: sec-fetch-site = same-origin
2025-05-29 16:20:02.855 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 16:20:02.856 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 16:20:02.857 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 16:20:02.956 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-29 16:20:02.960 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-29 16:20:02.962 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/api/Client?pageIndex=1&pageSize=10 - 401 0 null 138.4124ms
2025-05-29 16:34:44.709 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:34:44.978 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:34:45.074 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:34:45.076 +08:00 [INF] Hosting environment: Development
2025-05-29 16:34:45.078 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:34:47.127 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:34:47.128 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:34:47.201 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 70.1273ms
2025-05-29 16:34:47.300 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 177.8568ms
2025-05-29 16:34:47.675 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:34:47.741 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 65.3415ms
2025-05-29 16:35:21.859 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/index.html - null null
2025-05-29 16:35:22.238 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/index.html - 200 null text/html;charset=utf-8 379.0265ms
2025-05-29 16:35:22.339 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:35:22.341 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:35:22.357 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.6375ms
2025-05-29 16:35:22.397 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.1138ms
2025-05-29 16:35:23.188 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:35:23.240 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.9924ms
2025-05-29 16:35:23.340 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/favicon-32x32.png - null null
2025-05-29 16:35:23.371 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-29 16:35:23.375 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/favicon-32x32.png - 200 628 image/png 34.8621ms
2025-05-29 16:35:47.276 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/1 - null 0
2025-05-29 16:35:47.312 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: 已尝试调用已删除的 lambda 或本地函数实现。在应用程序运行时删除 lambda 或本地函数就可能会发生这种情况。
   at Program.<>c.<<Main>$>b__0_5(HttpContext context, Func`1 next)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-29 16:35:47.332 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/1 - 500 null text/plain; charset=utf-8 55.9785ms
2025-05-29 16:36:03.323 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:36:03.624 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:36:03.739 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:36:03.741 +08:00 [INF] Hosting environment: Development
2025-05-29 16:36:03.743 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:36:05.288 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:36:05.321 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 35.4163ms
2025-05-29 16:36:05.428 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:36:05.525 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.8766ms
2025-05-29 16:36:05.707 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:36:05.767 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 60.7588ms
2025-05-29 16:36:27.277 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/1 - null 0
2025-05-29 16:36:27.344 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 16:36:27.347 +08:00 [INF] 请求路径: /api/Client/1
2025-05-29 16:36:27.348 +08:00 [INF] 请求方法: GET
2025-05-29 16:36:27.350 +08:00 [INF] 请求头: Accept = */*
2025-05-29 16:36:27.352 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 16:36:27.354 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 16:36:27.355 +08:00 [INF] 请求头: User-Agent = Apifox/1.0.0 (https://apifox.com)
2025-05-29 16:36:27.357 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br
2025-05-29 16:36:27.359 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNTgwZGMzY2QtOWNkNy00OTk0LWJjOWQtZmEzMDI4Nzc0ZDg5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MDgzNzQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.kJVDtBv8MO8PZVeRA6OhQ-hz-cmX6QFIsinNl03buuw
2025-05-29 16:36:27.361 +08:00 [INF] 请求头: traceparent = 00-373faa58b225b046df26209fb6b4bfe5-028ff31a87306e4e-00
2025-05-29 16:36:27.363 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 16:36:27.365 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 16:36:27.367 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 16:36:27.419 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 16:36:27.421 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:36:27.423 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 16:36:27.424 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 16:36:27.425 +08:00 [INF] JWT Claim: jti = 580dc3cd-9cd7-4994-bc9d-fa3028774d89
2025-05-29 16:36:27.427 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 16:36:27.428 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 16:36:27.430 +08:00 [INF] JWT Claim: exp = 1748508374
2025-05-29 16:36:27.431 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 16:36:27.433 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 16:36:27.434 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 16:36:27.514 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:36:27.533 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService)'
2025-05-29 16:36:27.552 +08:00 [INF] Route matched with {action = "GetClient", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Database.Models.Client]] GetClient(Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 16:36:28.177 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:36:28.179 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:36:28.181 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:36:28.182 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:36:28.184 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:36:28.185 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:36:28.355 +08:00 [INF] === 开始获取用户ID ===
2025-05-29 16:36:28.356 +08:00 [INF] User.Identity.IsAuthenticated: true
2025-05-29 16:36:28.357 +08:00 [INF] User.Identity.AuthenticationType: AuthenticationTypes.Federation
2025-05-29 16:36:28.359 +08:00 [INF] Claims数量: 9
2025-05-29 16:36:28.359 +08:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:36:28.360 +08:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 16:36:28.362 +08:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 16:36:28.363 +08:00 [INF] Claim: jti = 580dc3cd-9cd7-4994-bc9d-fa3028774d89
2025-05-29 16:36:28.364 +08:00 [INF] Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 16:36:28.365 +08:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 16:36:28.367 +08:00 [INF] Claim: exp = 1748508374
2025-05-29 16:36:28.369 +08:00 [INF] Claim: iss = ls
2025-05-29 16:36:28.370 +08:00 [INF] Claim: aud = cold
2025-05-29 16:36:28.372 +08:00 [INF] 通过ClaimTypes.NameIdentifier获取到用户ID: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:36:28.374 +08:00 [ERR] 用户ID格式无效: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:36:28.495 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService) in 938.9324ms
2025-05-29 16:36:28.498 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService)'
2025-05-29 16:36:28.529 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: 无效的用户身份：用户ID格式错误 (6bee4df5-66d1-4cf5-974f-86b1ffcef8b3)
   at RealEstateSolution.ClientService.Controllers.ClientController.GetCurrentUserId() in D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService\Controllers\ClientController.cs:line 93
   at RealEstateSolution.ClientService.Controllers.ClientController.GetClient(Int32 id) in D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService\Controllers\ClientController.cs:line 121
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at RealEstateSolution.Common.Utils.UserContextMiddleware.InvokeAsync(HttpContext context) in D:\Cshrap\RealEstateSolution\RealEstateSolution.Common\Utils\UserContextMiddleware.cs:line 138
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-29 16:36:28.559 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/1 - 500 null text/plain; charset=utf-8 1282.6827ms
2025-05-29 16:50:20.394 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.419 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.419 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.419 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.420 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.420 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.558 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.558 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.558 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.558 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.558 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:20.558 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:30.973 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:30.994 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:30.994 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:30.994 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:30.994 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:30.994 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:50:31.241 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-29 16:50:31.255 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-29 16:50:31.256 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-29 16:50:31.257 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-29 16:50:31.273 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-29 16:50:31.281 +08:00 [INF] Applying migration '20250529063503_init'.
2025-05-29 16:50:31.336 +08:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Phone] nvarchar(20) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [CreateTime] datetime2 NOT NULL,
    [UpdateTime] datetime2 NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2025-05-29 16:51:06.891 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:51:06.913 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:51:06.913 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:51:06.913 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:51:06.913 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:51:06.913 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:51:07.123 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-29 16:51:07.137 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-29 16:51:07.139 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-29 16:51:07.139 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-29 16:51:07.151 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-29 16:51:07.159 +08:00 [INF] Applying migration '20250529085020_init1'.
2025-05-29 16:51:07.258 +08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Clients]') AND [c].[name] = N'Status');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Clients] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Clients] SET [Status] = 0 WHERE [Status] IS NULL;
ALTER TABLE [Clients] ALTER COLUMN [Status] int NOT NULL;
ALTER TABLE [Clients] ADD DEFAULT 0 FOR [Status];
2025-05-29 16:51:07.263 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Clients] ADD [Source] int NOT NULL DEFAULT 0;
2025-05-29 16:51:07.265 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Clients] ADD [Type] int NOT NULL DEFAULT 0;
2025-05-29 16:51:07.267 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250529085020_init1', N'8.0.0');
2025-05-29 16:53:52.044 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:53:52.311 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:53:52.392 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:53:52.393 +08:00 [INF] Hosting environment: Development
2025-05-29 16:53:52.395 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:53:55.710 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:53:55.740 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 31.5626ms
2025-05-29 16:53:55.787 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:53:55.939 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 153.1409ms
2025-05-29 16:53:56.430 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:53:56.511 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.5334ms
2025-05-29 16:54:23.085 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/1 - null 0
2025-05-29 16:54:23.134 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 16:54:23.137 +08:00 [INF] 请求路径: /api/Client/1
2025-05-29 16:54:23.138 +08:00 [INF] 请求方法: GET
2025-05-29 16:54:23.139 +08:00 [INF] 请求头: Accept = */*
2025-05-29 16:54:23.140 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 16:54:23.141 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 16:54:23.142 +08:00 [INF] 请求头: User-Agent = Apifox/1.0.0 (https://apifox.com)
2025-05-29 16:54:23.143 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br
2025-05-29 16:54:23.144 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNDVjNjVjOTItNDA1Yi00Y2JlLWI0Y2MtNDllOGEzYzYwNWQwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MDk0NDUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.AvGL9YdxW6fPJPdtO8HZq07PzIt3WWFsVpnLRzQ0JS4
2025-05-29 16:54:23.146 +08:00 [INF] 请求头: traceparent = 00-c71d13aa2b8c017272ff31eddc3e0512-e2ade0c301935814-00
2025-05-29 16:54:23.147 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 16:54:23.148 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 16:54:23.149 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 16:54:23.197 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 16:54:23.199 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:54:23.201 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 16:54:23.202 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 16:54:23.203 +08:00 [INF] JWT Claim: jti = 45c65c92-405b-4cbe-b4cc-49e8a3c605d0
2025-05-29 16:54:23.204 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 16:54:23.205 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 16:54:23.206 +08:00 [INF] JWT Claim: exp = 1748509445
2025-05-29 16:54:23.207 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 16:54:23.208 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 16:54:23.209 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 16:54:23.297 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:54:23.328 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService)'
2025-05-29 16:54:23.357 +08:00 [INF] Route matched with {action = "GetClient", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Database.Models.Client]] GetClient(Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 16:54:24.103 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:54:24.104 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:54:24.106 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:54:24.106 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:54:24.107 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:54:24.108 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:54:24.338 +08:00 [INF] 获取客户详情 - ID:1
2025-05-29 16:54:25.025 +08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-29 16:54:25.121 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 16:54:25.185 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService) in 1822.7473ms
2025-05-29 16:54:25.188 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService)'
2025-05-29 16:54:25.199 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/1 - 200 null application/json; charset=utf-8 2113.7218ms
2025-05-29 16:56:50.921 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 16:56:51.187 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 16:56:51.275 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 16:56:51.277 +08:00 [INF] Hosting environment: Development
2025-05-29 16:56:51.279 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 16:56:52.818 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 16:56:52.866 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 52.7435ms
2025-05-29 16:56:53.019 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 16:56:53.170 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 152.4845ms
2025-05-29 16:56:53.383 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 16:56:53.446 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 62.8609ms
2025-05-29 16:57:37.942 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/getclients?pageIndex=1&pageSize=10 - null 0
2025-05-29 16:57:38.041 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 16:57:38.044 +08:00 [INF] 请求路径: /api/Client/getclients
2025-05-29 16:57:38.045 +08:00 [INF] 请求方法: GET
2025-05-29 16:57:38.047 +08:00 [INF] 请求头: Accept = */*
2025-05-29 16:57:38.048 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 16:57:38.050 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 16:57:38.051 +08:00 [INF] 请求头: User-Agent = Apifox/1.0.0 (https://apifox.com)
2025-05-29 16:57:38.053 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br
2025-05-29 16:57:38.055 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMmZhYjExOTItYzhlOS00N2Q2LWE5OTItNmMxNjRiOTAwY2YyIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MDk2MzAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.MzrxG6NuERd8pnT_r-LXnndH1MDsHtCPqbf8xfo9e3A
2025-05-29 16:57:38.057 +08:00 [INF] 请求头: traceparent = 00-2ecf861368a816f654b2393486cd5131-08179554fda8abd6-00
2025-05-29 16:57:38.059 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 16:57:38.061 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 16:57:38.063 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 16:57:38.127 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 16:57:38.129 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:57:38.131 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 16:57:38.133 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 16:57:38.135 +08:00 [INF] JWT Claim: jti = 2fab1192-c8e9-47d6-a992-6c164b900cf2
2025-05-29 16:57:38.137 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 16:57:38.140 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 16:57:38.142 +08:00 [INF] JWT Claim: exp = 1748509630
2025-05-29 16:57:38.144 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 16:57:38.146 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 16:57:38.149 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 16:57:38.268 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:57:38.303 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 16:57:38.344 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 16:57:39.309 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:57:39.311 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:57:39.313 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:57:39.315 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:57:39.317 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:57:39.319 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 16:57:39.616 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 16:57:40.348 +08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 16:57:40.531 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 16:57:40.545 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 16:57:40.623 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 2272.3408ms
2025-05-29 16:57:40.626 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 16:57:40.635 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/getclients?pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 2692.7969ms
2025-05-29 16:57:53.055 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/getclient/1?pageIndex=1&pageSize=10 - null 0
2025-05-29 16:57:53.060 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 16:57:53.061 +08:00 [INF] 请求路径: /api/Client/getclient/1
2025-05-29 16:57:53.062 +08:00 [INF] 请求方法: GET
2025-05-29 16:57:53.063 +08:00 [INF] 请求头: Accept = */*
2025-05-29 16:57:53.065 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 16:57:53.066 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 16:57:53.068 +08:00 [INF] 请求头: User-Agent = Apifox/1.0.0 (https://apifox.com)
2025-05-29 16:57:53.069 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br
2025-05-29 16:57:53.070 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMmZhYjExOTItYzhlOS00N2Q2LWE5OTItNmMxNjRiOTAwY2YyIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MDk2MzAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.MzrxG6NuERd8pnT_r-LXnndH1MDsHtCPqbf8xfo9e3A
2025-05-29 16:57:53.072 +08:00 [INF] 请求头: traceparent = 00-93ed1ea2fbce3b68359192cc0e028492-a5c9c7963ced4cca-00
2025-05-29 16:57:53.073 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 16:57:53.075 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 16:57:53.076 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 16:57:53.077 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 16:57:53.079 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:57:53.080 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 16:57:53.082 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 16:57:53.084 +08:00 [INF] JWT Claim: jti = 2fab1192-c8e9-47d6-a992-6c164b900cf2
2025-05-29 16:57:53.085 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 16:57:53.086 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 16:57:53.088 +08:00 [INF] JWT Claim: exp = 1748509630
2025-05-29 16:57:53.089 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 16:57:53.091 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 16:57:53.093 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 16:57:53.096 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 16:57:53.102 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService)'
2025-05-29 16:57:53.109 +08:00 [INF] Route matched with {action = "GetClient", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Database.Models.Client]] GetClient(Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 16:57:53.163 +08:00 [INF] 获取客户详情 - ID:1
2025-05-29 16:57:53.426 +08:00 [INF] Executed DbCommand (208ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-29 16:57:53.432 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 16:57:53.437 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService) in 325.7901ms
2025-05-29 16:57:53.439 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClient (RealEstateSolution.ClientService)'
2025-05-29 16:57:53.441 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/getclient/1?pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 386.043ms
2025-05-29 17:17:22.440 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 17:17:22.720 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 17:17:23.027 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 17:17:23.028 +08:00 [INF] Hosting environment: Development
2025-05-29 17:17:23.029 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 17:17:25.184 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 17:17:25.185 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 17:17:25.268 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 86.0882ms
2025-05-29 17:17:25.334 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 153.5908ms
2025-05-29 17:17:25.675 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 17:17:25.728 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.3013ms
2025-05-29 17:56:06.298 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:56:06.298 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:56:06.386 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:06.386 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:06.393 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:56:06.393 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:56:06.394 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:06.395 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:06.398 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:06.398 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:06.399 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:06.400 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:06.401 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:06.402 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:06.403 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:06.404 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:06.405 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:06.406 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:06.407 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:06.408 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:06.409 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:06.411 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:06.412 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:06.413 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:06.414 +08:00 [INF] 请求头: traceparent = 00-2bd90a7697a1039adae7136f652d6c1d-4264f13de8353286-00
2025-05-29 17:56:06.416 +08:00 [INF] 请求头: traceparent = 00-0222a3caddbc63cc531addf532451af7-e76298da89dbb7c0-00
2025-05-29 17:56:06.417 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:06.418 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:06.419 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:06.420 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:06.421 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:06.422 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:06.423 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:06.424 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:06.425 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:06.426 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:06.428 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:06.428 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:06.429 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:06.430 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:06.432 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:06.433 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:06.434 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:06.434 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:06.436 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:06.436 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:06.500 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:06.500 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:06.502 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:06.503 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:06.504 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:06.505 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:06.507 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:06.508 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:06.509 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:06.510 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:06.511 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:06.512 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:06.513 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:06.515 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:06.516 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:06.517 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:06.518 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:06.519 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:06.520 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:06.521 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:06.522 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:06.523 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:06.622 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:06.622 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:06.673 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:56:06.673 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:06.701 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:06.704 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:07.301 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 17:56:07.303 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 17:56:07.304 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 17:56:07.305 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 17:56:07.307 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 17:56:07.308 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 17:56:07.459 +08:00 [INF] 获取客户统计数据
2025-05-29 17:56:07.491 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:56:08.060 +08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:08.060 +08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:56:08.124 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:56:08.127 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:08.130 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:56:08.134 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:56:08.136 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:08.143 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:56:08.148 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:56:08.153 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:56:08.159 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:56:08.200 +08:00 [INF] Executed DbCommand (28ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:08.209 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 1500.317ms
2025-05-29 17:56:08.211 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:56:08.214 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:08.218 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:08.218 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 1921.6617ms
2025-05-29 17:56:08.227 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 1523.2125ms
2025-05-29 17:56:08.229 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:08.231 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 1934.5265ms
2025-05-29 17:56:25.598 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:56:25.602 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:25.603 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:56:25.604 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:25.605 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:25.607 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:25.608 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:25.609 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:25.611 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:25.612 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:25.614 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:25.615 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:25.617 +08:00 [INF] 请求头: traceparent = 00-94c5219e99c1fe5fc1b138686d8a6c83-a97b161926d42413-00
2025-05-29 17:56:25.618 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:25.619 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:25.621 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:25.623 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:25.625 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:25.626 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:25.627 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:25.628 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:56:25.629 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:25.632 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:25.633 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:25.633 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:56:25.634 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:25.635 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:25.636 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:25.636 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:25.637 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:25.638 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:25.640 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:25.641 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:25.642 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:25.643 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:25.644 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:25.645 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:25.646 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:25.647 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:25.648 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:25.649 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:25.650 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:25.651 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:25.652 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:25.653 +08:00 [INF] 请求头: traceparent = 00-c1d527a299fd45dd615f035dfb444863-639535b0321393d3-00
2025-05-29 17:56:25.654 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:25.655 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:25.656 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:25.657 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:25.659 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:25.660 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:25.660 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:25.662 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:25.663 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:25.663 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:56:25.664 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:25.665 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:25.666 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:25.669 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:25.670 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:25.671 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:25.672 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:25.673 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:25.674 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:25.675 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:25.676 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:25.677 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:25.679 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:25.680 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:25.681 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:25.683 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:25.684 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:25.685 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:25.686 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:25.708 +08:00 [INF] 获取客户统计数据
2025-05-29 17:56:25.708 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:56:25.712 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:25.713 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:56:25.716 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:56:25.718 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:25.720 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:56:25.721 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:25.724 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:56:25.725 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 56.7177ms
2025-05-29 17:56:25.727 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:56:25.728 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:56:25.731 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:56:25.731 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 133.7272ms
2025-05-29 17:56:25.735 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:56:25.741 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:56:25.744 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:25.747 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:25.749 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:25.751 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 62.8111ms
2025-05-29 17:56:25.752 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:25.753 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 124.5597ms
2025-05-29 17:56:28.305 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:56:28.308 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:28.308 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:56:28.309 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:28.310 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:28.311 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:28.312 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:28.313 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:28.314 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:28.315 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:28.317 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:28.318 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:28.319 +08:00 [INF] 请求头: traceparent = 00-648b04b9dff3d2c1aa8d08fe8dc29c51-9f4ce995c8c6c4b7-00
2025-05-29 17:56:28.321 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:28.322 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:28.323 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:28.324 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:28.325 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:28.326 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:28.327 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:28.328 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:28.329 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:28.330 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:28.331 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:28.332 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:28.334 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:28.335 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:28.337 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:28.339 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:28.340 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:28.341 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:28.342 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:28.343 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:28.344 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:28.345 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:28.346 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:28.348 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:28.351 +08:00 [INF] 获取客户统计数据
2025-05-29 17:56:28.362 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:28.368 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:56:28.372 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:56:28.377 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:56:28.382 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:56:28.387 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:56:28.392 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:56:28.396 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:56:28.402 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:28.407 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:28.409 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:28.411 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 60.3826ms
2025-05-29 17:56:28.412 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:28.414 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 109.3102ms
2025-05-29 17:56:32.676 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:56:32.678 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:32.679 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:56:32.680 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:32.682 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:32.683 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:32.684 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:32.686 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:32.687 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:32.689 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:32.691 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:32.692 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:32.693 +08:00 [INF] 请求头: traceparent = 00-6a07c7439767491979acc6394ab09cf0-74d229beb644e72b-00
2025-05-29 17:56:32.694 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:32.695 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:32.697 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:32.699 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:32.700 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:32.701 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:32.702 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:32.703 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:32.704 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:32.705 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:32.707 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:32.708 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:32.709 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:32.711 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:32.712 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:32.713 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:32.714 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:32.716 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:32.717 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:32.718 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:32.720 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:32.721 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:32.722 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:32.724 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:32.727 +08:00 [INF] 获取客户统计数据
2025-05-29 17:56:32.733 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:32.738 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:56:32.742 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:56:32.746 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:56:32.752 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:56:32.756 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:56:32.760 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:56:32.765 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:56:32.769 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:32.774 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:56:32.777 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:32.778 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 51.9087ms
2025-05-29 17:56:32.779 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:56:32.781 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 105.5457ms
2025-05-29 17:56:32.839 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:56:32.842 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:56:32.843 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:56:32.844 +08:00 [INF] 请求方法: GET
2025-05-29 17:56:32.844 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:56:32.845 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:56:32.847 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:56:32.848 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:56:32.849 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:56:32.850 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:56:32.851 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:56:32.853 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:56:32.854 +08:00 [INF] 请求头: traceparent = 00-e5e8b33f427edd5ce7ac725c249c3b33-5987254c09a2a50d-00
2025-05-29 17:56:32.856 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:56:32.857 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:56:32.858 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:56:32.860 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:56:32.861 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:56:32.862 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:56:32.863 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:56:32.864 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:56:32.865 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:56:32.866 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:56:32.867 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:56:32.868 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:32.869 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:56:32.870 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:56:32.871 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:56:32.872 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:56:32.873 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:56:32.874 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:56:32.875 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:56:32.876 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:56:32.877 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:56:32.878 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:56:32.879 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:56:32.880 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:56:32.883 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:56:32.887 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:56:32.891 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:56:32.893 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:56:32.895 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 12.1752ms
2025-05-29 17:56:32.896 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:56:32.898 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 58.6613ms
2025-05-29 17:57:31.212 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:57:31.215 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:57:31.216 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:57:31.217 +08:00 [INF] 请求方法: GET
2025-05-29 17:57:31.218 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:57:31.219 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:57:31.220 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:57:31.221 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:57:31.223 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:57:31.224 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:57:31.224 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:57:31.228 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:57:31.229 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:57:31.230 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:57:31.232 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:57:31.233 +08:00 [INF] 请求方法: GET
2025-05-29 17:57:31.234 +08:00 [INF] 请求头: traceparent = 00-240b7fb2313df8114ba3a220c5eb6f35-ef5a2c8a7d577fb7-00
2025-05-29 17:57:31.236 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:57:31.237 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:57:31.239 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:57:31.240 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:57:31.242 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:57:31.243 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:57:31.245 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:57:31.246 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:57:31.248 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:57:31.250 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:57:31.251 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiNWU4NWFmZjgtODFjZC00ODlmLWI5MWMtNmUzOWVmYjU0MTdjIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMxNjQsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.bVW6NSGF3dDXSmPdFeamfN0Nld639tR4AQImXiTFytM
2025-05-29 17:57:31.253 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:57:31.255 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:57:31.256 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:57:31.257 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:57:31.259 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:57:31.260 +08:00 [INF] 请求头: traceparent = 00-c97aefcef70246164edc86d48834daaf-ffd4bda30e96b11d-00
2025-05-29 17:57:31.261 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:57:31.262 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:57:31.263 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:57:31.264 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:57:31.266 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:57:31.267 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:57:31.268 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:31.270 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:57:31.271 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:57:31.272 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:57:31.274 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:57:31.275 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:57:31.276 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:57:31.278 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:57:31.279 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:57:31.280 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:57:31.281 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:57:31.283 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:57:31.284 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:57:31.285 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:57:31.286 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:57:31.286 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:57:31.288 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:57:31.289 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:31.290 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:57:31.291 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:57:31.292 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:31.293 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:57:31.294 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:57:31.296 +08:00 [INF] JWT Claim: jti = 5e85aff8-81cd-489f-b91c-6e39efb5417c
2025-05-29 17:57:31.297 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:57:31.298 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:57:31.301 +08:00 [INF] 获取客户统计数据
2025-05-29 17:57:31.302 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:57:31.304 +08:00 [INF] JWT Claim: exp = 1748513164
2025-05-29 17:57:31.306 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:57:31.308 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:57:31.309 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:57:31.310 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:31.311 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:57:31.312 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:57:31.313 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:57:31.317 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:57:31.318 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:57:31.322 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:57:31.333 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:57:31.336 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:57:31.339 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:57:31.342 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:57:31.343 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:57:31.346 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:57:31.348 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 30.2992ms
2025-05-29 17:57:31.352 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:57:31.353 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:57:31.357 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:57:31.357 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 133.7621ms
2025-05-29 17:57:31.362 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:57:31.370 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:57:31.373 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:57:31.375 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 74.8131ms
2025-05-29 17:57:31.377 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:57:31.378 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 166.7172ms
2025-05-29 17:57:35.456 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:57:35.460 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:57:35.461 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:57:35.462 +08:00 [INF] 请求方法: GET
2025-05-29 17:57:35.463 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:57:35.465 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:57:35.466 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:57:35.468 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:57:35.469 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:57:35.470 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:57:35.471 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:57:35.475 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:57:35.476 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:57:35.477 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:57:35.478 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:57:35.479 +08:00 [INF] 请求方法: GET
2025-05-29 17:57:35.481 +08:00 [INF] 请求头: traceparent = 00-e862cf3f4fddf5c36c7cb82e30d02156-f2de393cc7fa8c6c-00
2025-05-29 17:57:35.482 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:57:35.483 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:57:35.485 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:57:35.486 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:57:35.488 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:57:35.489 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:57:35.491 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:57:35.492 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:57:35.493 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:57:35.494 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:57:35.495 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:57:35.496 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:57:35.498 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:57:35.499 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:57:35.500 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:57:35.501 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:57:35.502 +08:00 [INF] 请求头: traceparent = 00-93aa6e19d167e822a72d33da8e8e66d4-b9947c5631374122-00
2025-05-29 17:57:35.503 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:57:35.505 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:57:35.506 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:57:35.507 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:57:35.508 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:57:35.509 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:57:35.509 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:35.510 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:57:35.511 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:57:35.512 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:57:35.514 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:57:35.515 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:57:35.517 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:57:35.518 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:57:35.519 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:57:35.520 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:57:35.521 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:57:35.522 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:57:35.524 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:57:35.524 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:57:35.525 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:57:35.526 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:57:35.527 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:57:35.528 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:35.529 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:57:35.531 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:57:35.532 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:35.533 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:57:35.534 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:57:35.535 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:57:35.536 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:57:35.537 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:57:35.540 +08:00 [INF] 获取客户统计数据
2025-05-29 17:57:35.540 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:57:35.543 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:57:35.544 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:57:35.544 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:57:35.548 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:57:35.549 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:57:35.549 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:57:35.552 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:57:35.553 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:57:35.556 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:57:35.556 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:57:35.560 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:57:35.560 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:57:35.563 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:57:35.566 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:57:35.569 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:57:35.571 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:57:35.574 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:57:35.576 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:57:35.578 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:57:35.582 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 20.1981ms
2025-05-29 17:57:35.584 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:57:35.585 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:57:35.586 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 115.601ms
2025-05-29 17:57:35.592 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:57:35.597 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:57:35.599 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 59.9873ms
2025-05-29 17:57:35.601 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:57:35.603 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 146.5503ms
2025-05-29 17:58:08.674 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:58:08.683 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:58:08.684 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:58:08.685 +08:00 [INF] 请求方法: GET
2025-05-29 17:58:08.686 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:58:08.688 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:58:08.689 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:58:08.690 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:58:08.691 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:58:08.693 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:58:08.694 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:58:08.695 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:58:08.697 +08:00 [INF] 请求头: traceparent = 00-0166a1989fb70fc4b96380781fdec5f7-559f4ff42d104828-00
2025-05-29 17:58:08.698 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:58:08.699 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:58:08.700 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:58:08.702 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:58:08.703 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:58:08.704 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:58:08.705 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:58:08.707 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:58:08.708 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:58:08.709 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:58:08.710 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:58:08.711 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:08.712 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:58:08.713 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:58:08.714 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:58:08.716 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:58:08.717 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:58:08.718 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:58:08.719 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:58:08.720 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:58:08.721 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:58:08.722 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:08.724 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:58:08.725 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:58:08.728 +08:00 [INF] 获取客户统计数据
2025-05-29 17:58:08.733 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:58:08.738 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:58:08.742 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:58:08.745 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:58:08.751 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:58:08.755 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:58:08.759 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:58:08.763 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:58:08.774 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:58:08.780 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:58:08.782 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:58:08.784 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 56.8537ms
2025-05-29 17:58:08.785 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:58:08.786 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 112.7079ms
2025-05-29 17:58:08.835 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:58:08.839 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:58:08.840 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:58:08.841 +08:00 [INF] 请求方法: GET
2025-05-29 17:58:08.842 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:58:08.843 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:58:08.844 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:58:08.845 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:58:08.847 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:58:08.848 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:58:08.850 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:58:08.851 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:58:08.852 +08:00 [INF] 请求头: traceparent = 00-f83c863711b3328c05eff6ae6cc0992e-29d29a4ddaeb7d2c-00
2025-05-29 17:58:08.853 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:58:08.854 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:58:08.855 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:58:08.857 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:58:08.858 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:58:08.859 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:58:08.860 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:58:08.861 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:58:08.862 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:58:08.862 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:58:08.863 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:58:08.864 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:08.865 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:58:08.866 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:58:08.867 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:58:08.868 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:58:08.869 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:58:08.870 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:58:08.872 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:58:08.873 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:58:08.874 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:58:08.875 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:08.876 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:58:08.877 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:58:08.879 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:58:08.884 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:58:08.887 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:58:08.889 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:58:08.891 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 12.039ms
2025-05-29 17:58:08.892 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:58:08.894 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 58.1641ms
2025-05-29 17:58:30.066 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:58:30.068 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:58:30.079 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:58:30.082 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:58:30.083 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:58:30.084 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:58:30.085 +08:00 [INF] 请求方法: GET
2025-05-29 17:58:30.086 +08:00 [INF] 请求方法: GET
2025-05-29 17:58:30.087 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:58:30.088 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:58:30.090 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:58:30.091 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:58:30.092 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:58:30.094 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:58:30.095 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:58:30.096 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:58:30.098 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:58:30.099 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:58:30.101 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:58:30.103 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:58:30.105 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:58:30.107 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:58:30.110 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:58:30.111 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:58:30.113 +08:00 [INF] 请求头: traceparent = 00-72b7ec7cd61033799edfd385bc456581-daac6c4baff787fb-00
2025-05-29 17:58:30.116 +08:00 [INF] 请求头: traceparent = 00-72c36b3fcdee438550ecda9cd290a5e1-1945bdf9b8c81aad-00
2025-05-29 17:58:30.118 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:58:30.120 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:58:30.122 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:58:30.123 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:58:30.125 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:58:30.127 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:58:30.129 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:58:30.131 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:58:30.133 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:58:30.138 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:58:30.135 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:58:30.143 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:58:30.145 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:58:30.147 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:58:30.149 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:58:30.151 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:58:30.153 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:58:30.154 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:58:30.156 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:58:30.158 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:58:30.158 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:58:30.160 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:30.164 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:58:30.161 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:58:30.167 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:58:30.170 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:30.173 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:58:30.175 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:58:30.178 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:58:30.179 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:58:30.181 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:58:30.183 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:58:30.184 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:58:30.186 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:58:30.189 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:58:30.191 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:58:30.193 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:58:30.194 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:58:30.198 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:58:30.200 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:58:30.202 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:30.203 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:58:30.208 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:58:30.210 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:58:30.212 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:58:30.215 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:30.218 +08:00 [INF] 获取客户统计数据
2025-05-29 17:58:30.219 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:58:30.225 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:58:30.228 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:58:30.244 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:58:30.250 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:58:30.257 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:58:30.266 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:58:30.289 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:58:30.292 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:58:30.295 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:58:30.300 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 57.4699ms
2025-05-29 17:58:30.300 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:58:30.302 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:58:30.308 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 239.8879ms
2025-05-29 17:58:30.324 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:58:30.333 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:58:30.340 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:58:30.346 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:58:30.353 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:58:30.360 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:58:30.363 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 146.2434ms
2025-05-29 17:58:30.369 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:58:30.371 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 305.0192ms
2025-05-29 17:58:31.258 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:58:31.263 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:58:31.264 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:58:31.266 +08:00 [INF] 请求方法: GET
2025-05-29 17:58:31.267 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:58:31.269 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:58:31.270 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:58:31.271 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:58:31.273 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:58:31.275 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:58:31.276 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:58:31.278 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:58:31.279 +08:00 [INF] 请求头: traceparent = 00-ee54fce70ddc696052b412d5435c8eee-00324303ae1ac714-00
2025-05-29 17:58:31.280 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:58:31.282 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:58:31.283 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:58:31.285 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:58:31.286 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:58:31.288 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:58:31.290 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:58:31.292 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:58:31.294 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:58:31.296 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:58:31.298 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:58:31.299 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:31.301 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:58:31.303 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:58:31.306 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:58:31.308 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:58:31.309 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:58:31.311 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:58:31.313 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:58:31.315 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:58:31.317 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:58:31.318 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:31.320 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:58:31.322 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:58:31.325 +08:00 [INF] 获取客户统计数据
2025-05-29 17:58:31.328 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:58:31.335 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:58:31.341 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:58:31.345 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:58:31.351 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:58:31.355 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:58:31.360 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:58:31.364 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:58:31.368 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:58:31.371 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:58:31.373 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:58:31.375 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 50.8168ms
2025-05-29 17:58:31.376 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:58:31.378 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 119.469ms
2025-05-29 17:58:31.480 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:58:31.483 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:58:31.484 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:58:31.485 +08:00 [INF] 请求方法: GET
2025-05-29 17:58:31.486 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:58:31.488 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:58:31.489 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:58:31.490 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:58:31.492 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:58:31.493 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDY1YzQ1NjktMDdmYy00N2UxLWJjZTEtZmEyNzBjZGUyZDIwIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMyNTUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.PCnzP_fcBD3KQUe1k17rwzF-suex6lNyMgPxLD-RohA
2025-05-29 17:58:31.494 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:58:31.496 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:58:31.497 +08:00 [INF] 请求头: traceparent = 00-99856f30468d1fdf07f38d261031a00e-cdd14a68dcdae06f-00
2025-05-29 17:58:31.499 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:58:31.500 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:58:31.502 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:58:31.504 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:58:31.505 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:58:31.507 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:58:31.509 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:58:31.510 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:58:31.512 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:58:31.514 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:58:31.515 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:58:31.517 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:31.519 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:58:31.521 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:58:31.522 +08:00 [INF] JWT Claim: jti = d65c4569-07fc-47e1-bce1-fa270cde2d20
2025-05-29 17:58:31.524 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:58:31.525 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:58:31.527 +08:00 [INF] JWT Claim: exp = 1748513255
2025-05-29 17:58:31.528 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:58:31.530 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:58:31.532 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:58:31.533 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:58:31.535 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:58:31.537 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:58:31.542 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:58:31.547 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:58:31.552 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:58:31.557 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:58:31.559 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 18.4619ms
2025-05-29 17:58:31.561 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:58:31.563 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 82.4422ms
2025-05-29 17:59:45.724 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 17:59:45.727 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:59:45.728 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 17:59:45.729 +08:00 [INF] 请求方法: GET
2025-05-29 17:59:45.730 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:59:45.731 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:59:45.733 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:59:45.734 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:59:45.735 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:59:45.736 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 17:59:45.737 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:59:45.739 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:59:45.740 +08:00 [INF] 请求头: traceparent = 00-0e91b8e670eeb505ef97123eba265098-c5615e7c02c92a85-00
2025-05-29 17:59:45.741 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:59:45.742 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:59:45.743 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:59:45.744 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:59:45.746 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:59:45.747 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:59:45.748 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:59:45.749 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:59:45.751 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:59:45.751 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:59:45.752 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:59:45.753 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:59:45.755 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:59:45.756 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:59:45.757 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 17:59:45.758 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:59:45.759 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:59:45.760 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 17:59:45.762 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:59:45.763 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:59:45.765 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:59:45.766 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:59:45.767 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:59:45.768 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:59:45.771 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 17:59:45.781 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 17:59:45.785 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:59:45.787 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:59:45.789 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.1313ms
2025-05-29 17:59:45.790 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 17:59:45.792 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 67.3802ms
2025-05-29 17:59:45.830 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 17:59:45.834 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 17:59:45.834 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 17:59:45.835 +08:00 [INF] 请求方法: GET
2025-05-29 17:59:45.836 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 17:59:45.838 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 17:59:45.839 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 17:59:45.840 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 17:59:45.841 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 17:59:45.842 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 17:59:45.844 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 17:59:45.845 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 17:59:45.847 +08:00 [INF] 请求头: traceparent = 00-1eec058d4e264a556564ab70e6e57417-32ae4a2af957d7b9-00
2025-05-29 17:59:45.848 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 17:59:45.850 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 17:59:45.851 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 17:59:45.852 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 17:59:45.854 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 17:59:45.856 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 17:59:45.857 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 17:59:45.858 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 17:59:45.859 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 17:59:45.860 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 17:59:45.861 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 17:59:45.863 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:59:45.865 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 17:59:45.866 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 17:59:45.869 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 17:59:45.872 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 17:59:45.873 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 17:59:45.875 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 17:59:45.877 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 17:59:45.879 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 17:59:45.881 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 17:59:45.882 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 17:59:45.884 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:59:45.885 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 17:59:45.889 +08:00 [INF] 获取客户统计数据
2025-05-29 17:59:45.893 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 17:59:45.898 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 17:59:45.902 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 17:59:45.911 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 17:59:45.916 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 17:59:45.918 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 17:59:45.922 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 17:59:45.925 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 17:59:45.930 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:59:45.935 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 17:59:45.937 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 17:59:45.938 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 51.0952ms
2025-05-29 17:59:45.940 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 17:59:45.941 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 110.7048ms
2025-05-29 18:00:20.855 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/getclient?pageIndex=1&pageSize=10 - null 0
2025-05-29 18:00:20.860 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:20.861 +08:00 [INF] 请求路径: /api/Client/getclient
2025-05-29 18:00:20.862 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:20.863 +08:00 [INF] 请求头: Accept = */*
2025-05-29 18:00:20.864 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 18:00:20.865 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:20.866 +08:00 [INF] 请求头: User-Agent = Apifox/1.0.0 (https://apifox.com)
2025-05-29 18:00:20.867 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br
2025-05-29 18:00:20.868 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:20.869 +08:00 [INF] 请求头: traceparent = 00-498630deb1e5d8957f4472a3824fa26e-25ed0c65351dddd3-00
2025-05-29 18:00:20.871 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:20.872 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:20.873 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:20.873 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:20.874 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:20.875 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:20.876 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:20.877 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:20.878 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:20.879 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:20.880 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:20.881 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:20.882 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:20.883 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:20.884 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:20.887 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/getclient?pageIndex=1&pageSize=10 - 404 0 null 31.6472ms
2025-05-29 18:00:20.891 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:5003/api/Client/getclient, Response status code: 404
2025-05-29 18:00:25.480 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/getclients?pageIndex=1&pageSize=10 - null 0
2025-05-29 18:00:25.483 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:25.483 +08:00 [INF] 请求路径: /api/Client/getclients
2025-05-29 18:00:25.484 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:25.485 +08:00 [INF] 请求头: Accept = */*
2025-05-29 18:00:25.486 +08:00 [INF] 请求头: Connection = keep-alive
2025-05-29 18:00:25.487 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:25.488 +08:00 [INF] 请求头: User-Agent = Apifox/1.0.0 (https://apifox.com)
2025-05-29 18:00:25.489 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br
2025-05-29 18:00:25.490 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:25.491 +08:00 [INF] 请求头: traceparent = 00-b23af0938e714ada21d612f1fdae7385-7dfecfbad6a5cc7f-00
2025-05-29 18:00:25.492 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:25.493 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:25.494 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:25.495 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:25.496 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:25.497 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:25.498 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:25.499 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:25.500 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:25.501 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:25.502 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:25.504 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:25.505 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:25.506 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:25.507 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:25.508 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:25.509 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:25.511 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:00:25.770 +08:00 [INF] Executed DbCommand (256ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:00:25.780 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:25.782 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:25.783 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 272.7251ms
2025-05-29 18:00:25.785 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:25.786 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/getclients?pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 306.1321ms
2025-05-29 18:00:47.276 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:00:47.285 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:47.286 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:00:47.287 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:47.288 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:00:47.290 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:47.291 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:00:47.292 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:00:47.293 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:00:47.297 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:47.307 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:00:47.309 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:00:47.311 +08:00 [INF] 请求头: traceparent = 00-5edef78667855b685a4c58a726324e39-b87cbde7be6fb622-00
2025-05-29 18:00:47.312 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:47.314 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:00:47.316 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:00:47.317 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:00:47.318 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:00:47.321 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:47.322 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:00:47.323 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:00:47.324 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:00:47.325 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:47.326 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:00:47.327 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:00:47.328 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:00:47.329 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:47.330 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:47.331 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:00:47.332 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:47.333 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:00:47.334 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:47.335 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:00:47.335 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:47.337 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:47.338 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:47.339 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:00:47.340 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:47.341 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:00:47.342 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:47.343 +08:00 [INF] 请求头: traceparent = 00-eb30f8de250c5f8fff3ae0085585801f-54b9556d9e3980fb-00
2025-05-29 18:00:47.344 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:47.345 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:47.346 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:47.348 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:00:47.349 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:47.350 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:00:47.351 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:47.352 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:00:47.353 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:47.354 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:00:47.355 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:47.356 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:00:47.358 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:47.359 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:00:47.359 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:47.360 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:00:47.362 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:47.363 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:47.365 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:00:47.365 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:47.369 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:47.371 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:00:47.371 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:47.374 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:47.374 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:47.375 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:47.377 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:47.378 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:47.380 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 15.3769ms
2025-05-29 18:00:47.381 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:47.382 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:47.383 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:47.384 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 107.7375ms
2025-05-29 18:00:47.385 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:47.391 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:47.392 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:47.393 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:47.394 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:47.395 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:00:47.397 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:47.400 +08:00 [INF] 获取客户统计数据
2025-05-29 18:00:47.402 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:47.407 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:00:47.410 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:00:47.414 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:00:47.418 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:00:47.422 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:00:47.425 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:00:47.427 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:00:47.432 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:00:47.437 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:00:47.440 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:47.442 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 42.7406ms
2025-05-29 18:00:47.443 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:00:47.444 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 127.2521ms
2025-05-29 18:00:57.511 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:00:57.515 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:57.517 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:00:57.518 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:57.520 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:00:57.521 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:57.523 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:00:57.525 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:00:57.527 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:00:57.528 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:57.530 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:00:57.532 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:00:57.533 +08:00 [INF] 请求头: traceparent = 00-44ff241bf9d18a495b8f31147c9b16c4-0b86f19ac408570c-00
2025-05-29 18:00:57.534 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:57.536 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:00:57.537 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:00:57.538 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:00:57.541 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:57.543 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:00:57.545 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:00:57.547 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:00:57.548 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:57.549 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:00:57.550 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:00:57.551 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:00:57.553 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:57.554 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:00:57.556 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:00:57.557 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:57.559 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:00:57.559 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:57.561 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:00:57.562 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:57.564 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:57.565 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.566 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:00:57.567 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:57.568 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:00:57.570 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:57.571 +08:00 [INF] 请求头: traceparent = 00-78f9159f4f91c30b0d19a8e0075bb517-4f4ef15170ac3258-00
2025-05-29 18:00:57.572 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:57.574 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:57.575 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:57.576 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:00:57.578 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:57.579 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:00:57.580 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:57.581 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:00:57.583 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:57.584 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:00:57.585 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:57.586 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:00:57.588 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:57.589 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:00:57.590 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.591 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:00:57.592 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:00:57.594 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:57.595 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:57.596 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:57.599 +08:00 [INF] 获取客户统计数据
2025-05-29 18:00:57.599 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:57.605 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.605 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:57.612 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:57.618 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:57.618 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:00:57.627 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:57.631 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:00:57.631 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:57.635 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:00:57.636 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:57.640 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:57.641 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:00:57.642 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:57.645 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:00:57.646 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:57.649 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:00:57.650 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:57.654 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:00:57.654 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.658 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:57.658 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:00:57.659 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:57.664 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:00:57.665 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:00:57.667 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:57.672 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:00:57.674 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 75.4321ms
2025-05-29 18:00:57.677 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:57.678 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:00:57.681 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:57.683 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 171.718ms
2025-05-29 18:00:57.684 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.5362ms
2025-05-29 18:00:57.691 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:57.692 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 155.4455ms
2025-05-29 18:00:57.886 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:00:57.890 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:57.891 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:00:57.891 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:00:57.892 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:57.896 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:00:57.898 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:00:57.899 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:00:57.900 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:57.902 +08:00 [INF] 请求方法: GET
2025-05-29 18:00:57.903 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:00:57.904 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:00:57.906 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:00:57.907 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:00:57.908 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:00:57.910 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:00:57.912 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:57.913 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:00:57.915 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:00:57.916 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:00:57.917 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:00:57.918 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:00:57.920 +08:00 [INF] 请求头: traceparent = 00-4a2e946072c3e01bbd7eea2d25511f9f-0c34941b0a2b7785-00
2025-05-29 18:00:57.921 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:00:57.923 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:57.924 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:00:57.925 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:00:57.927 +08:00 [INF] 请求头: traceparent = 00-155f63e400786fc9f0f9b4e8deba1afc-ca5bf1284a391e7e-00
2025-05-29 18:00:57.928 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:00:57.930 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:00:57.931 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:00:57.932 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:00:57.934 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:00:57.935 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:00:57.936 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:00:57.938 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:00:57.939 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:00:57.940 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:00:57.942 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:00:57.943 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:00:57.945 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:57.946 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:00:57.947 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:57.949 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:00:57.950 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:57.951 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:00:57.952 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.953 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:00:57.955 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:57.956 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:00:57.957 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:57.958 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.959 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:57.960 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:00:57.962 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:57.963 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:00:57.964 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:57.965 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:00:57.967 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:57.968 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:00:57.969 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:57.971 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:00:57.972 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:57.973 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:00:57.974 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:57.975 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:00:57.976 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.977 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:00:57.979 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:00:57.980 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:00:57.981 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:57.982 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:00:57.984 +08:00 [INF] 获取客户统计数据
2025-05-29 18:00:57.984 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:57.987 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:57.988 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:00:57.991 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:00:57.993 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:00:57.996 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:00:57.999 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:00:58.002 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:00:58.006 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:00:58.008 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:00:58.009 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:58.014 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:00:58.015 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 22.8428ms
2025-05-29 18:00:58.019 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:00:58.019 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:00:58.023 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:00:58.024 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 132.7589ms
2025-05-29 18:00:58.028 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:00:58.037 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:00:58.040 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:00:58.042 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 58.6585ms
2025-05-29 18:00:58.044 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:00:58.046 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 159.971ms
2025-05-29 18:01:10.334 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:01:10.337 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:01:10.338 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:01:10.339 +08:00 [INF] 请求方法: GET
2025-05-29 18:01:10.341 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:01:10.342 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:01:10.343 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:01:10.344 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:01:10.345 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:01:10.347 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:01:10.348 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:01:10.350 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:01:10.351 +08:00 [INF] 请求头: traceparent = 00-635d68ce1d5dca74238e8b9f143009c4-b6f93baa5af0353e-00
2025-05-29 18:01:10.352 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:01:10.353 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:01:10.355 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:01:10.356 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:01:10.357 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:01:10.358 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:01:10.360 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:01:10.361 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:01:10.362 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:01:10.363 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:01:10.364 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:01:10.365 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:10.366 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:01:10.367 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:01:10.368 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:01:10.370 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:01:10.371 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:01:10.373 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:01:10.374 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:01:10.375 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:01:10.377 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:01:10.378 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:10.379 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:01:10.381 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:01:10.384 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:01:10.389 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:01:10.393 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:01:10.396 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:01:10.398 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 15.4758ms
2025-05-29 18:01:10.400 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:01:10.402 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 68.1755ms
2025-05-29 18:01:10.509 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:01:10.514 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:01:10.515 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:01:10.515 +08:00 [INF] 请求方法: GET
2025-05-29 18:01:10.516 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:01:10.517 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:01:10.518 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:01:10.520 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:01:10.521 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:01:10.522 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:01:10.524 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:01:10.525 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:01:10.526 +08:00 [INF] 请求头: traceparent = 00-dcb0d853808b2646edee8d170ee0d8ce-703bb535717c9127-00
2025-05-29 18:01:10.527 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:01:10.529 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:01:10.530 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:01:10.531 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:01:10.532 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:01:10.534 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:01:10.535 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:01:10.536 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:01:10.538 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:01:10.539 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:01:10.540 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:01:10.541 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:10.542 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:01:10.543 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:01:10.544 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:01:10.545 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:01:10.546 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:01:10.547 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:01:10.548 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:01:10.549 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:01:10.550 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:01:10.551 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:10.552 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:01:10.553 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:01:10.556 +08:00 [INF] 获取客户统计数据
2025-05-29 18:01:10.558 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:01:10.561 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:01:10.564 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:01:10.566 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:01:10.569 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:01:10.572 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:01:10.574 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:01:10.577 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:01:10.580 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:01:10.582 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:01:10.584 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:01:10.586 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 30.4934ms
2025-05-29 18:01:10.587 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:01:10.589 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 79.1835ms
2025-05-29 18:01:22.805 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:01:22.808 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:01:22.809 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:01:22.809 +08:00 [INF] 请求方法: GET
2025-05-29 18:01:22.810 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:01:22.812 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:01:22.813 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:01:22.814 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:01:22.815 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:01:22.816 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:01:22.817 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:01:22.818 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:01:22.819 +08:00 [INF] 请求头: traceparent = 00-1bf7f39bf9fba4935d44314d92636fbb-03366a2492a634d9-00
2025-05-29 18:01:22.821 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:01:22.822 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:01:22.823 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:01:22.824 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:01:22.825 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:01:22.826 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:01:22.827 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:01:22.829 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:01:22.830 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:01:22.831 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:01:22.831 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:01:22.833 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:22.834 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:01:22.835 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:01:22.837 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:01:22.838 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:01:22.839 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:01:22.841 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:01:22.842 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:01:22.843 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:01:22.844 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:01:22.845 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:22.846 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:01:22.848 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:01:22.850 +08:00 [INF] 获取客户统计数据
2025-05-29 18:01:22.853 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:01:22.857 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:01:22.860 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:01:22.864 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:01:22.868 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:01:22.871 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:01:22.874 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:01:22.878 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:01:22.881 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:01:22.884 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:01:22.887 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:01:22.888 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 38.876ms
2025-05-29 18:01:22.889 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:01:22.891 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 85.4001ms
2025-05-29 18:01:22.952 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:01:22.956 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:01:22.957 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:01:22.958 +08:00 [INF] 请求方法: GET
2025-05-29 18:01:22.959 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:01:22.960 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:01:22.961 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:01:22.962 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:01:22.964 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:01:22.965 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:01:22.966 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:01:22.967 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:01:22.969 +08:00 [INF] 请求头: traceparent = 00-06745da46a418ba58a20413f012ab9a5-6961508f121f0cd9-00
2025-05-29 18:01:22.970 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:01:22.971 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:01:22.972 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:01:22.973 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:01:22.974 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:01:22.975 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:01:22.976 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:01:22.977 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:01:22.978 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:01:22.979 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:01:22.980 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:01:22.980 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:22.981 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:01:22.982 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:01:22.984 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:01:22.985 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:01:22.985 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:01:22.987 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:01:22.988 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:01:22.989 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:01:22.990 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:01:22.991 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:22.991 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:01:22.992 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:01:22.995 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:01:22.998 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:01:23.001 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:01:23.004 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:01:23.005 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 11.1612ms
2025-05-29 18:01:23.007 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:01:23.008 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 55.4504ms
2025-05-29 18:01:26.058 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:01:26.061 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:01:26.062 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:01:26.063 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:01:26.066 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:01:26.067 +08:00 [INF] 请求方法: GET
2025-05-29 18:01:26.068 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:01:26.067 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:01:26.069 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:01:26.070 +08:00 [INF] 请求方法: GET
2025-05-29 18:01:26.071 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:01:26.072 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:01:26.073 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:01:26.074 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:01:26.075 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:01:26.076 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:01:26.078 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:01:26.079 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:01:26.080 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:01:26.081 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:01:26.082 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:01:26.083 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:01:26.084 +08:00 [INF] 请求头: traceparent = 00-095d64879eb58c33ab385b8b7a97cd25-387b9cce13ef9d2d-00
2025-05-29 18:01:26.085 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:01:26.087 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:01:26.088 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:01:26.089 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:01:26.090 +08:00 [INF] 请求头: traceparent = 00-981e97b32f97932491c774050bd012fb-f8bd6df3525a4dd8-00
2025-05-29 18:01:26.091 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:01:26.093 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:01:26.092 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:01:26.094 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:01:26.095 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:01:26.096 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:01:26.098 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:01:26.099 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:01:26.100 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:01:26.101 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:01:26.102 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:01:26.103 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:01:26.105 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:01:26.105 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:01:26.107 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:01:26.108 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:01:26.108 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:01:26.109 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:26.111 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:01:26.112 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:01:26.113 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:01:26.114 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:01:26.115 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:01:26.116 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:01:26.117 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:26.118 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:01:26.119 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:01:26.121 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:01:26.122 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:01:26.123 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:01:26.124 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:01:26.125 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:01:26.126 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:01:26.127 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:01:26.129 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:01:26.130 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:01:26.131 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:01:26.132 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:26.133 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:01:26.134 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:01:26.135 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:01:26.137 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:01:26.138 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:01:26.140 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:01:26.141 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:01:26.144 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:01:26.144 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:01:26.147 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:01:26.148 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:01:26.149 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:01:26.151 +08:00 [INF] 获取客户统计数据
2025-05-29 18:01:26.152 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 12.1688ms
2025-05-29 18:01:26.154 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:01:26.155 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:01:26.158 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:01:26.158 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 100.2532ms
2025-05-29 18:01:26.161 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:01:26.168 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:01:26.171 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:01:26.173 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:01:26.176 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:01:26.178 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:01:26.181 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:01:26.183 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:01:26.185 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:01:26.187 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 36.2522ms
2025-05-29 18:01:26.188 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:01:26.190 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 127.2287ms
2025-05-29 18:04:59.191 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:04:59.195 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:04:59.206 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:04:59.214 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:04:59.217 +08:00 [INF] 请求方法: GET
2025-05-29 18:04:59.230 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:04:59.231 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:04:59.232 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:04:59.233 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:04:59.234 +08:00 [INF] 请求方法: GET
2025-05-29 18:04:59.235 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:04:59.236 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:04:59.238 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:04:59.239 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:04:59.240 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:04:59.241 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:04:59.242 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:04:59.243 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:04:59.245 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:04:59.246 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:04:59.247 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:04:59.248 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:04:59.249 +08:00 [INF] 请求头: traceparent = 00-a561c04c0eadd3c9345c56b45810f27c-89c72e847994b131-00
2025-05-29 18:04:59.250 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:04:59.252 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:04:59.253 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:04:59.254 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:04:59.255 +08:00 [INF] 请求头: traceparent = 00-3bacccde8e04c6e615a60e651add3c4f-5c4cf3413053df92-00
2025-05-29 18:04:59.256 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:04:59.257 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:04:59.258 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:04:59.260 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:04:59.261 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:04:59.262 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:04:59.263 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:04:59.264 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:04:59.265 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:04:59.266 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:04:59.267 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:04:59.269 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:04:59.270 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:04:59.271 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:04:59.272 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:04:59.273 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:04:59.273 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:04:59.275 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:04:59.276 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:04:59.277 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:04:59.278 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:04:59.279 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:04:59.280 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:04:59.281 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:04:59.283 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:04:59.283 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:04:59.285 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:04:59.286 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:04:59.287 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:04:59.289 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:04:59.288 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:04:59.290 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:04:59.291 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:04:59.292 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:04:59.294 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:04:59.296 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:04:59.297 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:04:59.295 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:04:59.298 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:04:59.300 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:04:59.299 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:04:59.301 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:04:59.302 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:04:59.302 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:04:59.303 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:04:59.304 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:04:59.306 +08:00 [INF] 获取客户统计数据
2025-05-29 18:04:59.308 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:04:59.314 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:04:59.314 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:04:59.316 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:04:59.320 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:04:59.320 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:04:59.323 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:04:59.324 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 16.3943ms
2025-05-29 18:04:59.326 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:04:59.327 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:04:59.330 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 116.3483ms
2025-05-29 18:04:59.331 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:04:59.337 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:04:59.341 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:04:59.345 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:04:59.349 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:04:59.354 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:04:59.356 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:04:59.358 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 52.1901ms
2025-05-29 18:04:59.359 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:04:59.361 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 169.5433ms
2025-05-29 18:05:09.892 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:05:09.895 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:05:09.896 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:05:09.897 +08:00 [INF] 请求方法: GET
2025-05-29 18:05:09.897 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:05:09.899 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:05:09.900 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:05:09.901 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:05:09.902 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:05:09.903 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:05:09.905 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:05:09.906 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:05:09.907 +08:00 [INF] 请求头: traceparent = 00-94f3cfadb1b086df3a393183700a0d0b-f6f3caf9c383de50-00
2025-05-29 18:05:09.908 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:05:09.909 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:05:09.910 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:05:09.911 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:05:09.912 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:05:09.913 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:05:09.914 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:05:09.916 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:05:09.918 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:05:09.919 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:05:09.920 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:05:09.921 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:05:09.923 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:05:09.924 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:05:09.925 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:05:09.927 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:05:09.928 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:05:09.929 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:05:09.930 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:05:09.932 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:05:09.933 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:05:09.934 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:05:09.935 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:05:09.936 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:05:09.939 +08:00 [INF] 获取客户统计数据
2025-05-29 18:05:09.941 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:05:09.947 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:05:09.950 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:05:09.954 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:05:09.958 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:05:09.962 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:05:09.966 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:05:09.970 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:05:09.974 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:05:09.978 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:05:09.980 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:05:09.981 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 43.3676ms
2025-05-29 18:05:09.982 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:05:09.984 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 91.5167ms
2025-05-29 18:05:10.093 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:05:10.096 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:05:10.097 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:05:10.098 +08:00 [INF] 请求方法: GET
2025-05-29 18:05:10.099 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:05:10.100 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:05:10.101 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:05:10.103 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:05:10.104 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:05:10.105 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:05:10.106 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:05:10.107 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:05:10.108 +08:00 [INF] 请求头: traceparent = 00-0436d980a165141bb4c5aa8745bbe9c6-9c800b8499622ba1-00
2025-05-29 18:05:10.110 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:05:10.111 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:05:10.112 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:05:10.113 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:05:10.115 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:05:10.116 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:05:10.117 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:05:10.119 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:05:10.120 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:05:10.121 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:05:10.122 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:05:10.123 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:05:10.124 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:05:10.125 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:05:10.126 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:05:10.127 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:05:10.128 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:05:10.130 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:05:10.132 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:05:10.133 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:05:10.134 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:05:10.135 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:05:10.136 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:05:10.137 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:05:10.140 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:05:10.143 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:05:10.147 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:05:10.149 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:05:10.151 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 11.8327ms
2025-05-29 18:05:10.153 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:05:10.154 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 60.8961ms
2025-05-29 18:07:32.269 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:07:32.272 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:07:32.273 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:07:32.274 +08:00 [INF] 请求方法: GET
2025-05-29 18:07:32.276 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:07:32.277 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:07:32.278 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:07:32.279 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:07:32.280 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:07:32.281 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:07:32.283 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:07:32.284 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:07:32.285 +08:00 [INF] 请求头: traceparent = 00-3346eedcec9c57aafd42c44db2593bce-e4b8adb56f36a2a3-00
2025-05-29 18:07:32.286 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:07:32.287 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:07:32.289 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:07:32.290 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:07:32.291 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:07:32.292 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:07:32.293 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:07:32.295 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:07:32.296 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:07:32.297 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:07:32.297 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:07:32.298 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:32.300 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:07:32.301 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:07:32.302 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:07:32.303 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:07:32.305 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:07:32.306 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:07:32.307 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:07:32.308 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:07:32.310 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:07:32.311 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:32.312 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:07:32.313 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:07:32.315 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:07:32.325 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:07:32.330 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:07:32.332 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:07:32.335 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 20.5952ms
2025-05-29 18:07:32.336 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:07:32.338 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 68.3566ms
2025-05-29 18:07:32.441 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:07:32.456 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:07:32.457 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:07:32.458 +08:00 [INF] 请求方法: GET
2025-05-29 18:07:32.459 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:07:32.461 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:07:32.462 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:07:32.464 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:07:32.464 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:07:32.466 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:07:32.467 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:07:32.469 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:07:32.470 +08:00 [INF] 请求头: traceparent = 00-67d673712b56ce2097b24a6536347b6d-6be3e52f326940c7-00
2025-05-29 18:07:32.472 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:07:32.473 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:07:32.474 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:07:32.476 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:07:32.478 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:07:32.479 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:07:32.481 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:07:32.482 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:07:32.484 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:07:32.485 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:07:32.486 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:07:32.487 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:32.489 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:07:32.490 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:07:32.491 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:07:32.493 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:07:32.494 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:07:32.496 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:07:32.497 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:07:32.498 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:07:32.499 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:07:32.501 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:32.502 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:07:32.503 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:07:32.506 +08:00 [INF] 获取客户统计数据
2025-05-29 18:07:32.515 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:07:32.537 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:07:32.539 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:07:32.542 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:07:32.546 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:07:32.549 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:07:32.551 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:07:32.554 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:07:32.557 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:07:32.562 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:07:32.564 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:07:32.565 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 60.1482ms
2025-05-29 18:07:32.567 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:07:32.568 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 126.6995ms
2025-05-29 18:07:36.533 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:07:36.536 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:07:36.537 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:07:36.538 +08:00 [INF] 请求方法: GET
2025-05-29 18:07:36.539 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:07:36.540 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:07:36.542 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:07:36.543 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:07:36.545 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:07:36.547 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:07:36.549 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:07:36.550 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:07:36.551 +08:00 [INF] 请求头: traceparent = 00-846b83d81fd6f8439a6d690a88fb3bf1-777bd87f0d13305f-00
2025-05-29 18:07:36.553 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:07:36.554 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:07:36.556 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:07:36.557 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:07:36.559 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:07:36.560 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:07:36.561 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:07:36.563 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:07:36.564 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:07:36.565 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:07:36.566 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:07:36.567 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:36.568 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:07:36.569 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:07:36.571 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:07:36.572 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:07:36.573 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:07:36.575 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:07:36.576 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:07:36.577 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:07:36.579 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:07:36.580 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:36.582 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:07:36.583 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:07:36.586 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:07:36.593 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:07:36.599 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:07:36.602 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:07:36.604 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.117ms
2025-05-29 18:07:36.606 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:07:36.607 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 74.3979ms
2025-05-29 18:07:36.806 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:07:36.810 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:07:36.811 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:07:36.812 +08:00 [INF] 请求方法: GET
2025-05-29 18:07:36.812 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:07:36.814 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:07:36.814 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:07:36.815 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:07:36.817 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:07:36.819 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:07:36.820 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:07:36.821 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:07:36.822 +08:00 [INF] 请求头: traceparent = 00-84ffc607c11b9f5e461d2dd834fdb674-0119a02b1c212e2e-00
2025-05-29 18:07:36.823 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:07:36.825 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:07:36.826 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:07:36.827 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:07:36.828 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:07:36.829 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:07:36.830 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:07:36.831 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:07:36.833 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:07:36.834 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:07:36.835 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:07:36.836 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:36.837 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:07:36.838 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:07:36.839 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:07:36.840 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:07:36.841 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:07:36.842 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:07:36.844 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:07:36.845 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:07:36.846 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:07:36.847 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:07:36.848 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:07:36.848 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:07:36.852 +08:00 [INF] 获取客户统计数据
2025-05-29 18:07:36.854 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:07:36.860 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:07:36.863 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:07:36.866 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:07:36.871 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:07:36.874 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:07:36.877 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:07:36.880 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:07:36.883 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:07:36.888 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:07:36.891 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:07:36.892 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 41.2237ms
2025-05-29 18:07:36.894 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:07:36.895 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 88.6514ms
2025-05-29 18:08:03.673 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:08:03.675 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:03.676 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:08:03.677 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:03.678 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:03.679 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:03.680 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:03.681 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:03.682 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:03.684 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:03.685 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:03.686 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:03.687 +08:00 [INF] 请求头: traceparent = 00-b9e42f6c1c680427385063e05080947d-362a97c3ae65dbff-00
2025-05-29 18:08:03.688 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:03.689 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:03.690 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:03.691 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:03.693 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:03.694 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:03.695 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:03.696 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:03.697 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:03.698 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:03.699 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:03.700 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:03.701 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:03.702 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:03.703 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:03.704 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:03.705 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:03.706 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:03.707 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:03.708 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:03.710 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:03.711 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:03.712 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:03.713 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:03.715 +08:00 [INF] 获取客户统计数据
2025-05-29 18:08:03.720 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:03.732 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:08:03.735 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:08:03.739 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:08:03.742 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:08:03.746 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:08:03.751 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:08:03.765 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:08:03.769 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:03.773 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:03.776 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:03.777 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 62.8026ms
2025-05-29 18:08:03.778 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:03.780 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 106.9642ms
2025-05-29 18:08:03.855 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:08:03.858 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:03.859 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:08:03.860 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:03.861 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:03.862 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:03.863 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:03.864 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:03.865 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:03.867 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:03.868 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:03.869 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:03.871 +08:00 [INF] 请求头: traceparent = 00-34c694c99641803fd8188ba4fa6945cc-e5299f7f282d4d73-00
2025-05-29 18:08:03.872 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:03.874 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:03.875 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:03.876 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:03.877 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:03.878 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:03.880 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:03.881 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:03.882 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:03.883 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:03.884 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:03.885 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:03.886 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:03.888 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:03.889 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:03.890 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:03.891 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:03.892 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:03.893 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:03.894 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:03.895 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:03.896 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:03.897 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:08:03.898 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:03.900 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:08:03.903 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:08:03.906 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:03.908 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:03.910 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 10.7268ms
2025-05-29 18:08:03.912 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:08:03.913 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 57.6929ms
2025-05-29 18:08:06.666 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:08:06.669 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:06.670 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:08:06.671 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:06.672 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:06.673 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:06.675 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:06.676 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:06.678 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:06.679 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:06.680 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:06.682 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:06.683 +08:00 [INF] 请求头: traceparent = 00-033d11dcd11ce31e37b582285beabc20-91ddc3cedf790a0e-00
2025-05-29 18:08:06.684 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:06.685 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:06.686 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:06.688 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:06.689 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:06.691 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:06.692 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:06.693 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:06.695 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:06.696 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:06.696 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:06.697 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:06.699 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:06.700 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:06.702 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:06.703 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:06.705 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:06.706 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:06.708 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:06.710 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:06.711 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:06.713 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:06.715 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:06.717 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:06.720 +08:00 [INF] 获取客户统计数据
2025-05-29 18:08:06.724 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:06.730 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:08:06.735 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:08:06.740 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:08:06.744 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:08:06.748 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:08:06.752 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:08:06.756 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:08:06.760 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:06.764 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:06.766 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:06.768 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 48.9724ms
2025-05-29 18:08:06.770 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:06.771 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 105.2094ms
2025-05-29 18:08:06.907 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:08:06.910 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:06.910 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:08:06.911 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:06.912 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:06.913 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:06.914 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:06.915 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:06.917 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:06.918 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:06.919 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:06.920 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:06.921 +08:00 [INF] 请求头: traceparent = 00-87d8e67faff63ab89cc04bb5ea2d37c0-e11d535d2bc9445c-00
2025-05-29 18:08:06.922 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:06.923 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:06.925 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:06.926 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:06.927 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:06.928 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:06.929 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:06.930 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:06.931 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:06.932 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:06.933 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:06.934 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:06.935 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:06.936 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:06.937 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:06.938 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:06.940 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:06.941 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:06.942 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:06.944 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:06.945 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:06.946 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:06.946 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:08:06.947 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:06.950 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:08:06.955 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:08:06.960 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:06.962 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:06.964 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 14.2399ms
2025-05-29 18:08:06.965 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:08:06.967 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 59.987ms
2025-05-29 18:08:13.184 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:08:13.187 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:13.188 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:08:13.189 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:13.189 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:13.191 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:13.192 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:13.193 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:13.194 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:13.195 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:13.196 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:13.197 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:13.198 +08:00 [INF] 请求头: traceparent = 00-e9b192973a6193a784787ad24908f63b-5286525ae230aee7-00
2025-05-29 18:08:13.200 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:13.202 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:13.203 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:13.204 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:13.206 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:13.207 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:13.209 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:13.210 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:13.211 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:13.212 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:13.213 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:13.214 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:13.215 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:13.216 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:13.217 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:13.219 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:13.220 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:13.222 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:13.223 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:13.224 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:13.225 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:13.226 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:13.227 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:13.228 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:13.231 +08:00 [INF] 获取客户统计数据
2025-05-29 18:08:13.233 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:13.238 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:08:13.241 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:08:13.244 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:08:13.247 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:08:13.251 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:08:13.254 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:08:13.256 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:08:13.260 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:13.263 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:13.265 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:13.267 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 37.1281ms
2025-05-29 18:08:13.269 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:13.270 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 85.7026ms
2025-05-29 18:08:13.324 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:08:13.326 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:13.327 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:08:13.328 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:13.329 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:13.330 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:13.331 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:13.332 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:13.333 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:13.334 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:13.335 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:13.336 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:13.337 +08:00 [INF] 请求头: traceparent = 00-04f04a4a521501aacb268c8248ef530b-55d7065961923b52-00
2025-05-29 18:08:13.338 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:13.339 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:13.340 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:13.341 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:13.342 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:13.344 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:13.344 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:13.346 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:13.347 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:13.347 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:13.348 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:13.349 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:13.350 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:13.351 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:13.352 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:13.353 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:13.354 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:13.355 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:13.356 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:13.358 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:13.359 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:13.360 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:13.361 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:08:13.362 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:13.364 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:08:13.368 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:08:13.371 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:13.373 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:13.374 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 10.6816ms
2025-05-29 18:08:13.376 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:08:13.377 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 53.47ms
2025-05-29 18:08:23.359 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:08:23.362 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:08:23.363 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:08:23.364 +08:00 [INF] 请求方法: GET
2025-05-29 18:08:23.364 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:08:23.365 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:08:23.366 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:08:23.367 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:08:23.368 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:08:23.369 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2IzYmI4MzItNTYyMC00MGExLWJjOGYtYzQ0NmI4YjI1ODE2IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTMzODUsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.f3LG8zTIwBbu3cJzmaJEOuvWD9h_ruz0BjSNdmb0T6Q
2025-05-29 18:08:23.370 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:08:23.371 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:08:23.372 +08:00 [INF] 请求头: traceparent = 00-f1db8e4d86d8715cf53215bb103a983d-df52126b3180cabe-00
2025-05-29 18:08:23.373 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:08:23.374 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:08:23.375 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:08:23.376 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:08:23.377 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:08:23.378 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:08:23.379 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:08:23.380 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:08:23.381 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:08:23.382 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:08:23.383 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:08:23.384 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:23.385 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:08:23.386 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:08:23.387 +08:00 [INF] JWT Claim: jti = cb3bb832-5620-40a1-bc8f-c446b8b25816
2025-05-29 18:08:23.388 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:08:23.389 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:08:23.390 +08:00 [INF] JWT Claim: exp = 1748513385
2025-05-29 18:08:23.391 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:08:23.392 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:08:23.394 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:08:23.395 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:08:23.395 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:23.396 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:08:23.398 +08:00 [INF] 获取客户统计数据
2025-05-29 18:08:23.401 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:08:23.404 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:08:23.407 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:08:23.410 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:08:23.413 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:08:23.415 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:08:23.419 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:08:23.421 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:08:23.424 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:23.428 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:08:23.430 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:08:23.431 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 33.0624ms
2025-05-29 18:08:23.432 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:08:23.433 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 74.0312ms
2025-05-29 18:10:02.815 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:10:02.818 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:10:02.819 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:10:02.820 +08:00 [INF] 请求方法: GET
2025-05-29 18:10:02.821 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:10:02.822 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:10:02.823 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:10:02.824 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:10:02.825 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:10:02.827 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:10:02.828 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:10:02.829 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:10:02.830 +08:00 [INF] 请求头: traceparent = 00-26c9e1db8b98e6e5cbf4acd7e07dcd54-d094df766d84bb44-00
2025-05-29 18:10:02.831 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:10:02.833 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:10:02.834 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:10:02.835 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:10:02.837 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:10:02.838 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:10:02.839 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:10:02.840 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:10:02.841 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:10:02.842 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:10:02.843 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:10:02.844 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:10:02.845 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:10:02.846 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:10:02.847 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:10:02.849 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:10:02.850 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:10:02.851 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:10:02.852 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:10:02.853 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:10:02.854 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:10:02.855 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:10:02.856 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:10:02.858 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:10:02.861 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:10:02.868 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:10:02.887 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:10:02.889 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:10:02.891 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 31.1051ms
2025-05-29 18:10:02.893 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:10:02.894 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 78.8349ms
2025-05-29 18:10:03.026 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:10:03.030 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:10:03.030 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:10:03.031 +08:00 [INF] 请求方法: GET
2025-05-29 18:10:03.032 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:10:03.034 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:10:03.035 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:10:03.036 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:10:03.037 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:10:03.038 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:10:03.039 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:10:03.040 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:10:03.042 +08:00 [INF] 请求头: traceparent = 00-30aadd5ed9daf7745c2ac78f28ab7a23-c89526eeb59b4b99-00
2025-05-29 18:10:03.043 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:10:03.044 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:10:03.045 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:10:03.046 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:10:03.047 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:10:03.048 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:10:03.049 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:10:03.051 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:10:03.052 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:10:03.052 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:10:03.053 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:10:03.054 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:10:03.055 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:10:03.056 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:10:03.057 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:10:03.058 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:10:03.059 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:10:03.060 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:10:03.061 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:10:03.062 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:10:03.063 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:10:03.064 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:10:03.065 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:10:03.066 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:10:03.069 +08:00 [INF] 获取客户统计数据
2025-05-29 18:10:03.072 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:10:03.077 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:10:03.079 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:10:03.082 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:10:03.086 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:10:03.089 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:10:03.092 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:10:03.095 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:10:03.098 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:10:03.102 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:10:03.104 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:10:03.106 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 37.4228ms
2025-05-29 18:10:03.107 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:10:03.108 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 82.6446ms
2025-05-29 18:11:30.010 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:11:30.018 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:11:30.019 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:11:30.020 +08:00 [INF] 请求方法: GET
2025-05-29 18:11:30.021 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:11:30.022 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:11:30.024 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:11:30.025 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:11:30.026 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:11:30.028 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:11:30.029 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:11:30.031 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:11:30.032 +08:00 [INF] 请求头: traceparent = 00-9ad386095bf0506482f203fd8d02cef4-2ba1f66342afe6aa-00
2025-05-29 18:11:30.033 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:11:30.035 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:11:30.036 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:11:30.037 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:11:30.038 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:11:30.040 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:11:30.041 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:11:30.042 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:11:30.043 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:11:30.044 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:11:30.045 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:11:30.046 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:30.047 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:11:30.048 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:11:30.049 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:11:30.050 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:11:30.052 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:11:30.053 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:11:30.054 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:11:30.055 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:11:30.057 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:11:30.058 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:30.059 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:11:30.060 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:11:30.062 +08:00 [INF] 获取客户统计数据
2025-05-29 18:11:30.066 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:11:30.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:11:30.074 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:11:30.077 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:11:30.081 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:11:30.084 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:11:30.087 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:11:30.090 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:11:30.093 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:11:30.097 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:11:30.100 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:11:30.101 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 39.3144ms
2025-05-29 18:11:30.102 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:11:30.103 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 92.7063ms
2025-05-29 18:11:30.110 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:11:30.112 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:11:30.113 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:11:30.114 +08:00 [INF] 请求方法: GET
2025-05-29 18:11:30.115 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:11:30.116 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:11:30.117 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:11:30.119 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:11:30.120 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:11:30.122 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:11:30.124 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:11:30.125 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:11:30.127 +08:00 [INF] 请求头: traceparent = 00-6c2c6c11eddf1c368e526c01290e24e5-1a87f50f66b9f0ac-00
2025-05-29 18:11:30.129 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:11:30.130 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:11:30.132 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:11:30.134 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:11:30.135 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:11:30.137 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:11:30.139 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:11:30.141 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:11:30.142 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:11:30.144 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:11:30.145 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:11:30.146 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:30.148 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:11:30.149 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:11:30.150 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:11:30.151 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:11:30.153 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:11:30.154 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:11:30.155 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:11:30.156 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:11:30.157 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:11:30.158 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:30.159 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:11:30.160 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:11:30.163 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:11:30.167 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:11:30.170 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:11:30.173 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:11:30.174 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 12.0551ms
2025-05-29 18:11:30.176 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:11:30.177 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 67.2262ms
2025-05-29 18:11:42.545 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:11:42.548 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:11:42.549 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:11:42.551 +08:00 [INF] 请求方法: GET
2025-05-29 18:11:42.552 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:11:42.554 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:11:42.556 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:11:42.557 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:11:42.559 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:11:42.560 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:11:42.562 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:11:42.564 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:11:42.565 +08:00 [INF] 请求头: traceparent = 00-0acc60551ed1b5abc5e62cdf12e0fd56-634680be320b2609-00
2025-05-29 18:11:42.566 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:11:42.568 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:11:42.569 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:11:42.570 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:11:42.572 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:11:42.573 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:11:42.575 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:11:42.576 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:11:42.576 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:11:42.577 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:11:42.580 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:11:42.581 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:11:42.582 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:11:42.583 +08:00 [INF] 请求方法: GET
2025-05-29 18:11:42.584 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:11:42.585 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:11:42.586 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:11:42.582 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:11:42.587 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:11:42.588 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:42.589 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:11:42.590 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:11:42.591 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:11:42.592 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:11:42.593 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:11:42.595 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:11:42.594 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:11:42.596 +08:00 [INF] 请求头: traceparent = 00-ce38a494b0839e8bc86a8a4e3b41f153-6843307c2921b26c-00
2025-05-29 18:11:42.598 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:11:42.599 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:11:42.600 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:11:42.601 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:11:42.602 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:11:42.603 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:11:42.604 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:11:42.605 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:11:42.606 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:11:42.608 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:11:42.609 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:11:42.608 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:11:42.610 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:11:42.611 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:42.612 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:11:42.613 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:11:42.614 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:11:42.615 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:11:42.616 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:11:42.618 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:11:42.618 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:11:42.622 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:11:42.623 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:42.625 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:11:42.626 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:11:42.628 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:11:42.629 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:11:42.631 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 13.0207ms
2025-05-29 18:11:42.632 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:11:42.633 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:11:42.634 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:11:42.635 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 90.4574ms
2025-05-29 18:11:42.636 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:11:42.642 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:11:42.643 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:11:42.645 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:11:42.646 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:11:42.648 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:11:42.648 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:11:42.649 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:11:42.651 +08:00 [INF] 获取客户统计数据
2025-05-29 18:11:42.654 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:11:42.657 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:11:42.660 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:11:42.662 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:11:42.666 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:11:42.668 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:11:42.671 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:11:42.674 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:11:42.678 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:11:42.681 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:11:42.683 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:11:42.685 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 33.7878ms
2025-05-29 18:11:42.686 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:11:42.688 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 111.5807ms
2025-05-29 18:12:23.683 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:12:23.686 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:23.687 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:12:23.688 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:23.689 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:23.690 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:23.691 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:23.692 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:23.693 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:23.694 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:23.696 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:23.697 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:23.698 +08:00 [INF] 请求头: traceparent = 00-bddfb7e8bc9a31a82d57d8b307c42b2e-f8653a37072dc386-00
2025-05-29 18:12:23.699 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:23.701 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:23.702 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:23.703 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:12:23.704 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:23.710 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:23.711 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:23.712 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:12:23.713 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:23.713 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:23.714 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:23.715 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:23.716 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:23.717 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:23.718 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:23.719 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:23.720 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:23.721 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:23.722 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:23.723 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:23.724 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:23.725 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:23.725 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:23.726 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:23.728 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:23.729 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:23.730 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:23.731 +08:00 [INF] 请求头: traceparent = 00-1684813a2cddf31309eb8ceed2a32b94-dd89a82c1493cf52-00
2025-05-29 18:12:23.732 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:23.733 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:23.734 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:23.735 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:23.736 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:23.737 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:23.738 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:23.740 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:23.739 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:23.741 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:23.742 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:23.743 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:23.744 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:23.746 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:23.747 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:23.748 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:23.749 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:23.751 +08:00 [INF] 获取客户统计数据
2025-05-29 18:12:23.751 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:23.754 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:23.755 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:23.756 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:23.758 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:23.759 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:23.761 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:23.762 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:23.762 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:23.766 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:23.766 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:12:23.767 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:23.769 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:12:23.770 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:23.772 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:12:23.773 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:23.776 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:23.777 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:12:23.778 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:23.780 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:12:23.780 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:23.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:12:23.784 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:23.786 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:12:23.788 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:12:23.791 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:23.799 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:23.801 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:23.802 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 52.1463ms
2025-05-29 18:12:23.805 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:23.806 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:12:23.807 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 123.7565ms
2025-05-29 18:12:23.810 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:23.815 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:23.816 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 29.221ms
2025-05-29 18:12:23.818 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:23.819 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 115.8052ms
2025-05-29 18:12:33.270 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:12:33.274 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:33.275 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:12:33.276 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:33.278 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:33.279 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:33.281 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:33.283 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:33.284 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:33.286 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:33.287 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:33.289 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:33.290 +08:00 [INF] 请求头: traceparent = 00-83234655c4a82f582aacd62aafb06845-35f66e3d32fab3cb-00
2025-05-29 18:12:33.292 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:33.294 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:33.295 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:33.297 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:33.298 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:33.300 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:33.302 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:33.303 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:33.305 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:33.306 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:33.307 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:33.308 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:33.310 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:33.312 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:33.313 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:33.315 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:33.316 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:33.318 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:33.319 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:33.321 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:33.322 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:33.324 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:33.325 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:33.326 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:33.330 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:12:33.334 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:12:33.341 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:33.344 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:33.346 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 16.9004ms
2025-05-29 18:12:33.348 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:33.349 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 78.8866ms
2025-05-29 18:12:33.485 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:12:33.489 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:33.490 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:12:33.491 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:33.492 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:33.493 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:33.494 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:33.495 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:33.496 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:33.498 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:33.499 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:33.500 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:33.501 +08:00 [INF] 请求头: traceparent = 00-866629116fdcb1e51ecff66a610c258c-cb692058dba4ed46-00
2025-05-29 18:12:33.502 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:33.503 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:33.504 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:33.505 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:33.507 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:33.508 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:33.509 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:33.510 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:33.511 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:33.512 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:33.513 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:33.514 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:33.515 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:33.516 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:33.517 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:33.518 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:33.520 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:33.521 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:33.523 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:33.524 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:33.525 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:33.526 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:33.527 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:33.528 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:33.530 +08:00 [INF] 获取客户统计数据
2025-05-29 18:12:33.533 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:33.537 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:12:33.540 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:12:33.543 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:12:33.546 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:12:33.549 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:12:33.552 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:12:33.556 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:12:33.559 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:33.562 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:33.564 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:33.565 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 34.941ms
2025-05-29 18:12:33.566 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:33.568 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 82.8256ms
2025-05-29 18:12:45.165 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:12:45.168 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:45.169 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:12:45.170 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:45.171 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:45.172 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:45.173 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:45.175 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:45.177 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:45.179 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:45.181 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:45.182 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:45.184 +08:00 [INF] 请求头: traceparent = 00-99ec2076b67681d145e978bb52a57a94-dca5b527f64b479f-00
2025-05-29 18:12:45.186 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:45.187 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:45.189 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:45.190 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:45.192 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:45.194 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:45.195 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:45.197 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:45.199 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:45.200 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:45.202 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:45.203 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:45.204 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:45.206 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:45.208 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:45.209 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:45.210 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:45.212 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:45.213 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:45.214 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:45.215 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:45.216 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:45.218 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:45.219 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:45.222 +08:00 [INF] 获取客户统计数据
2025-05-29 18:12:45.224 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:45.230 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:12:45.234 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:12:45.238 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:12:45.242 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:12:45.247 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:12:45.257 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:12:45.261 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:12:45.265 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:45.268 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:45.271 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:45.272 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 51.3214ms
2025-05-29 18:12:45.274 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:45.275 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 110.2893ms
2025-05-29 18:12:45.320 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:12:45.323 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:45.323 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:12:45.324 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:45.325 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:45.327 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:45.328 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:45.330 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:45.331 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:45.332 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:45.334 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:45.336 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:45.338 +08:00 [INF] 请求头: traceparent = 00-e54b96c1ff6352c2f06174c6fffc3751-e157ccf8a01af577-00
2025-05-29 18:12:45.339 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:45.340 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:45.341 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:45.343 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:45.344 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:45.346 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:45.347 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:45.348 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:45.349 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:45.350 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:45.351 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:45.352 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:45.353 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:45.354 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:45.355 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:45.356 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:45.357 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:45.358 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:45.359 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:45.360 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:45.361 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:45.362 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:45.363 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:45.364 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:45.366 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:12:45.370 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:12:45.373 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:45.375 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:45.377 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 10.7353ms
2025-05-29 18:12:45.378 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:45.379 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 59.3094ms
2025-05-29 18:12:57.117 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:12:57.121 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:57.122 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:12:57.123 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:57.124 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:57.125 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:57.126 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:57.128 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:57.129 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:57.130 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:57.131 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:57.132 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:57.134 +08:00 [INF] 请求头: traceparent = 00-f5623ecb2ca7e3dae73847147d0917ef-9ef767b2edd2ec27-00
2025-05-29 18:12:57.135 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:57.136 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:57.137 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:57.139 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:57.140 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:57.142 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:57.143 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:57.144 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:57.145 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:57.146 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:57.147 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:57.148 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:57.149 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:57.151 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:57.152 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:57.154 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:57.155 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:57.156 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:57.157 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:57.158 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:57.160 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:57.161 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:57.162 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:57.163 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:57.165 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:12:57.170 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:12:57.174 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:57.177 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:57.179 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 14.1696ms
2025-05-29 18:12:57.180 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:12:57.181 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 64.3818ms
2025-05-29 18:12:57.291 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:12:57.294 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:12:57.295 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:12:57.296 +08:00 [INF] 请求方法: GET
2025-05-29 18:12:57.297 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:12:57.298 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:12:57.299 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:12:57.300 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:12:57.301 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:12:57.302 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiMGYzZThmNDYtMTExMi00NDg4LWExN2ItNjQ5YWU1YTkzMWE3IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTQwMDIsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.KlSkd6uWcYyqoCjBvNSooRWHPGcjhWdqHLNVemWB6jU
2025-05-29 18:12:57.303 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:12:57.305 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:12:57.306 +08:00 [INF] 请求头: traceparent = 00-e2ba075e3dc3efd4053a698b467092b1-52a63187757a9717-00
2025-05-29 18:12:57.307 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:12:57.308 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:12:57.309 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:12:57.310 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:12:57.311 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:12:57.312 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:12:57.313 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:12:57.314 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:12:57.315 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:12:57.316 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:12:57.317 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:12:57.318 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:57.319 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:12:57.320 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:12:57.321 +08:00 [INF] JWT Claim: jti = 0f3e8f46-1112-4488-a17b-649ae5a931a7
2025-05-29 18:12:57.322 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:12:57.323 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:12:57.324 +08:00 [INF] JWT Claim: exp = 1748514002
2025-05-29 18:12:57.325 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:12:57.327 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:12:57.328 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:12:57.328 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:12:57.329 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:57.330 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:12:57.334 +08:00 [INF] 获取客户统计数据
2025-05-29 18:12:57.336 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:12:57.339 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:12:57.342 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:12:57.346 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:12:57.348 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:12:57.351 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:12:57.354 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:12:57.356 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:12:57.359 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:57.362 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:12:57.364 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:12:57.366 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 32.6652ms
2025-05-29 18:12:57.367 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:12:57.369 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 77.9677ms
2025-05-29 18:27:19.145 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:27:19.149 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:27:19.151 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:27:19.153 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:27:19.153 +08:00 [INF] 请求方法: GET
2025-05-29 18:27:19.156 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:27:19.157 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:27:19.158 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:27:19.159 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:27:19.160 +08:00 [INF] 请求方法: GET
2025-05-29 18:27:19.162 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:27:19.163 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:27:19.164 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:27:19.165 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:27:19.167 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:27:19.168 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:27:19.170 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:27:19.172 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:27:19.173 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:27:19.174 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:27:19.175 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:27:19.176 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:27:19.178 +08:00 [INF] 请求头: traceparent = 00-a55bd806abf1c899ba793ad870e0f26f-7b8d6262a33cc7ec-00
2025-05-29 18:27:19.180 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:27:19.181 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:27:19.183 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:27:19.184 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:27:19.186 +08:00 [INF] 请求头: traceparent = 00-8539568ec28c8e7eccf60268932f136a-c567ae99afecccf3-00
2025-05-29 18:27:19.187 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:27:19.188 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:27:19.189 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:27:19.190 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:27:19.191 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:27:19.192 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:27:19.193 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:27:19.194 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:27:19.195 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:27:19.195 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:27:19.196 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:27:19.198 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:27:19.199 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:27:19.200 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:27:19.201 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:27:19.202 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:27:19.203 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:27:19.204 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:27:19.204 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:27:19.205 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:27:19.206 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:27:19.207 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:27:19.208 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:27:19.209 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:27:19.210 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:27:19.211 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:27:19.212 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:27:19.213 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:27:19.214 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:27:19.215 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:27:19.216 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:27:19.218 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:27:19.219 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:27:19.220 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:27:19.221 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:27:19.222 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:27:19.223 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:27:19.224 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:27:19.225 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:27:19.226 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:27:19.227 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:27:19.228 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:27:19.229 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:27:19.230 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:27:19.232 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:27:19.233 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:27:19.234 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:27:19.277 +08:00 [INF] 获取客户统计数据
2025-05-29 18:27:19.295 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:27:19.295 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:27:19.300 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:27:19.319 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:27:19.320 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:27:19.325 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:27:19.326 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 94.3931ms
2025-05-29 18:27:19.331 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:27:19.331 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:27:19.336 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:27:19.336 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 190.9867ms
2025-05-29 18:27:19.341 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:27:19.347 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:27:19.350 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:27:19.354 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:27:19.358 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:27:19.361 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:27:19.364 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 122.2584ms
2025-05-29 18:27:19.365 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:27:19.367 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 213.9879ms
2025-05-29 18:28:48.967 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:28:48.979 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:28:48.980 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:28:48.981 +08:00 [INF] 请求方法: GET
2025-05-29 18:28:48.982 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:28:48.983 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:28:48.984 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:28:48.985 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:28:48.986 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:28:48.987 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:28:48.988 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:28:48.989 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:28:48.990 +08:00 [INF] 请求头: traceparent = 00-a488250163c34bcb46a4ab4c12466631-4f96765dedf83def-00
2025-05-29 18:28:48.991 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:28:48.993 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:28:48.994 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:28:48.995 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:28:48.996 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:28:48.997 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:28:48.998 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:28:48.999 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:28:49.001 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:28:49.001 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:28:49.002 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:28:49.003 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:28:49.004 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:28:49.005 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:28:49.006 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:28:49.009 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:28:49.010 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:28:49.011 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:28:49.012 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:28:49.013 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:28:49.014 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:28:49.015 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:28:49.016 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:28:49.017 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:28:49.020 +08:00 [INF] 获取客户统计数据
2025-05-29 18:28:49.029 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:28:49.033 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:28:49.036 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:28:49.040 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:28:49.044 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:28:49.047 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:28:49.051 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:28:49.054 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:28:49.057 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:28:49.062 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:28:49.064 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:28:49.065 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 46.583ms
2025-05-29 18:28:49.067 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:28:49.068 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 101.1086ms
2025-05-29 18:28:49.105 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:28:49.109 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:28:49.110 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:28:49.111 +08:00 [INF] 请求方法: GET
2025-05-29 18:28:49.112 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:28:49.114 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:28:49.116 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:28:49.118 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:28:49.120 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:28:49.122 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:28:49.123 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:28:49.125 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:28:49.127 +08:00 [INF] 请求头: traceparent = 00-d0bf28c6168f7f8f17770ecdd30b98fa-9e1251b4f5832272-00
2025-05-29 18:28:49.128 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:28:49.130 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:28:49.132 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:28:49.135 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:28:49.137 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:28:49.139 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:28:49.141 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:28:49.143 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:28:49.144 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:28:49.146 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:28:49.148 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:28:49.151 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:28:49.155 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:28:49.158 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:28:49.160 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:28:49.162 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:28:49.164 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:28:49.166 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:28:49.169 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:28:49.171 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:28:49.173 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:28:49.174 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:28:49.176 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:28:49.177 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:28:49.181 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:28:49.187 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:28:49.198 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:28:49.202 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:28:49.204 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 24.0592ms
2025-05-29 18:28:49.206 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:28:49.208 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 103.1093ms
2025-05-29 18:29:02.570 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:29:02.573 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:29:02.574 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:29:02.575 +08:00 [INF] 请求方法: GET
2025-05-29 18:29:02.576 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:29:02.577 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:29:02.578 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:29:02.580 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:29:02.582 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:29:02.583 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:29:02.584 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:29:02.586 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:29:02.587 +08:00 [INF] 请求头: traceparent = 00-a49a7dc9c4c64d159fde31c251e77d8c-08ad228053d4668c-00
2025-05-29 18:29:02.588 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:29:02.589 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:29:02.591 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:29:02.592 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:29:02.593 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:29:02.595 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:29:02.596 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:29:02.597 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:29:02.598 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:29:02.599 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:29:02.600 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:29:02.601 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:29:02.603 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:29:02.604 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:29:02.606 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:29:02.607 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:29:02.609 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:29:02.611 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:29:02.612 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:29:02.613 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:29:02.615 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:29:02.616 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:29:02.617 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:29:02.618 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:29:02.622 +08:00 [INF] 获取客户统计数据
2025-05-29 18:29:02.624 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:29:02.630 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:29:02.634 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:29:02.637 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:29:02.641 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:29:02.646 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:29:02.649 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:29:02.653 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:29:02.657 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:29:02.661 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:29:02.663 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:29:02.665 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 44.2335ms
2025-05-29 18:29:02.666 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:29:02.668 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 97.8972ms
2025-05-29 18:29:02.734 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:29:02.737 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:29:02.738 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:29:02.739 +08:00 [INF] 请求方法: GET
2025-05-29 18:29:02.739 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:29:02.741 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:29:02.742 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:29:02.743 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:29:02.744 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:29:02.745 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:29:02.746 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:29:02.748 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:29:02.749 +08:00 [INF] 请求头: traceparent = 00-760f96b22d0b9f248a105dbe0f7ad5df-d81daff7c29b7de0-00
2025-05-29 18:29:02.750 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:29:02.751 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:29:02.752 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:29:02.753 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:29:02.754 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:29:02.755 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:29:02.756 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:29:02.758 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:29:02.759 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:29:02.760 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:29:02.761 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:29:02.761 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:29:02.763 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:29:02.764 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:29:02.765 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:29:02.766 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:29:02.767 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:29:02.768 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:29:02.769 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:29:02.770 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:29:02.771 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:29:02.772 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:29:02.773 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:29:02.774 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:29:02.776 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:29:02.781 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:29:02.785 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:29:02.787 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:29:02.789 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 12.6999ms
2025-05-29 18:29:02.790 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:29:02.791 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 56.7187ms
2025-05-29 18:30:21.135 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:30:21.145 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:30:21.145 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:30:21.147 +08:00 [INF] 请求方法: GET
2025-05-29 18:30:21.148 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:30:21.150 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:30:21.151 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:30:21.153 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:30:21.154 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:30:21.155 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:30:21.157 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:30:21.158 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:30:21.160 +08:00 [INF] 请求头: traceparent = 00-f00dacb160bd12340e10c859fd302cd3-044e0b3b9a1a6e2f-00
2025-05-29 18:30:21.161 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:30:21.162 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:30:21.164 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:30:21.165 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:30:21.166 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:30:21.167 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:30:21.168 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:30:21.170 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:30:21.171 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:30:21.172 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:30:21.173 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:30:21.174 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:30:21.176 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:30:21.177 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:30:21.178 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:30:21.179 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:30:21.180 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:30:21.181 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:30:21.183 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:30:21.184 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:30:21.185 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:30:21.186 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:30:21.187 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:30:21.188 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:30:21.190 +08:00 [INF] 获取客户统计数据
2025-05-29 18:30:21.197 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:30:21.201 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:30:21.206 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:30:21.209 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:30:21.213 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:30:21.217 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:30:21.221 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:30:21.225 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:30:21.229 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:30:21.233 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:30:21.235 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:30:21.237 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 47.1085ms
2025-05-29 18:30:21.239 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:30:21.240 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 104.377ms
2025-05-29 18:30:21.320 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:30:21.324 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:30:21.325 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:30:21.326 +08:00 [INF] 请求方法: GET
2025-05-29 18:30:21.327 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:30:21.328 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:30:21.329 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:30:21.330 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:30:21.331 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:30:21.332 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:30:21.334 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:30:21.335 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:30:21.336 +08:00 [INF] 请求头: traceparent = 00-d8096c58de0da0476da2d942618d8184-35872a40011754a5-00
2025-05-29 18:30:21.337 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:30:21.338 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:30:21.340 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:30:21.341 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:30:21.342 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:30:21.343 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:30:21.344 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:30:21.346 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:30:21.347 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:30:21.348 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:30:21.348 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:30:21.349 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:30:21.350 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:30:21.351 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:30:21.353 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:30:21.354 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:30:21.355 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:30:21.356 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:30:21.357 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:30:21.358 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:30:21.360 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:30:21.361 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:30:21.362 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:30:21.363 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:30:21.366 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:30:21.370 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:30:21.372 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:30:21.374 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:30:21.375 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 10.4674ms
2025-05-29 18:30:21.376 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:30:21.377 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 57.3996ms
2025-05-29 18:31:16.458 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:31:16.461 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:31:16.462 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:31:16.463 +08:00 [INF] 请求方法: GET
2025-05-29 18:31:16.463 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:31:16.465 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:31:16.466 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:31:16.467 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:31:16.468 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:31:16.469 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:31:16.470 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:31:16.471 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:31:16.472 +08:00 [INF] 请求头: traceparent = 00-c7d167ae6e4fca07291b48fcc26a2acd-5c2f6ff0712314ee-00
2025-05-29 18:31:16.473 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:31:16.475 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:31:16.476 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:31:16.477 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:31:16.478 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:31:16.479 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:31:16.481 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:31:16.482 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:31:16.483 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:31:16.484 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:31:16.484 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:31:16.485 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:31:16.486 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:31:16.487 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:31:16.488 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:31:16.490 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:31:16.491 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:31:16.492 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:31:16.493 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:31:16.494 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:31:16.495 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:31:16.496 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:31:16.497 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:31:16.498 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:31:16.500 +08:00 [INF] 获取客户统计数据
2025-05-29 18:31:16.509 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:31:16.514 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:31:16.524 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:31:16.528 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:31:16.532 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:31:16.534 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:31:16.538 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:31:16.541 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:31:16.545 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:31:16.549 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:31:16.552 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:31:16.553 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 54.0021ms
2025-05-29 18:31:16.555 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:31:16.556 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 97.6073ms
2025-05-29 18:31:16.609 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:31:16.614 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:31:16.615 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:31:16.616 +08:00 [INF] 请求方法: GET
2025-05-29 18:31:16.617 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:31:16.619 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:31:16.620 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:31:16.622 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:31:16.623 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:31:16.625 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:31:16.627 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:31:16.628 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:31:16.629 +08:00 [INF] 请求头: traceparent = 00-3f0404887bead077baef65871325f67c-37af24e85772ff4e-00
2025-05-29 18:31:16.631 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:31:16.632 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:31:16.633 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:31:16.634 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:31:16.635 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:31:16.636 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:31:16.637 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:31:16.638 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:31:16.639 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:31:16.640 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:31:16.641 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:31:16.642 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:31:16.643 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:31:16.645 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:31:16.646 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:31:16.647 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:31:16.649 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:31:16.650 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:31:16.652 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:31:16.653 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:31:16.655 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:31:16.656 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:31:16.657 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:31:16.659 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:31:16.662 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:31:16.666 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:31:16.671 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:31:16.673 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:31:16.675 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 14.0852ms
2025-05-29 18:31:16.677 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:31:16.678 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 68.5173ms
2025-05-29 18:34:08.274 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:34:08.291 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:34:08.292 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:34:08.293 +08:00 [INF] 请求方法: GET
2025-05-29 18:34:08.294 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:34:08.296 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:34:08.297 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:34:08.298 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:34:08.299 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:34:08.300 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:34:08.302 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:34:08.303 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:34:08.304 +08:00 [INF] 请求头: traceparent = 00-67dee0ccb76398ce9982bb1da826694d-c59c80f313045f0e-00
2025-05-29 18:34:08.305 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:34:08.306 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:34:08.307 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:34:08.308 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:34:08.309 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:34:08.311 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:34:08.312 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:34:08.313 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:34:08.314 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:34:08.315 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:34:08.316 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:34:08.317 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:34:08.319 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:34:08.320 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:34:08.321 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:34:08.322 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:34:08.323 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:34:08.324 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:34:08.325 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:34:08.326 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:34:08.328 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:34:08.329 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:34:08.330 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:34:08.331 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:34:08.334 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:34:08.346 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:34:08.350 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:34:08.353 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:34:08.355 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 22.5044ms
2025-05-29 18:34:08.357 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:34:08.358 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 83.4787ms
2025-05-29 18:34:08.451 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:34:08.454 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:34:08.455 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:34:08.456 +08:00 [INF] 请求方法: GET
2025-05-29 18:34:08.457 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:34:08.458 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:34:08.460 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:34:08.461 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:34:08.462 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:34:08.464 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:34:08.465 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:34:08.466 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:34:08.468 +08:00 [INF] 请求头: traceparent = 00-18e9f0aa5138f22a90f8dce454ef427a-4ef4060d1eaad7b1-00
2025-05-29 18:34:08.470 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:34:08.471 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:34:08.472 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:34:08.473 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:34:08.474 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:34:08.475 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:34:08.477 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:34:08.478 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:34:08.480 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:34:08.481 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:34:08.482 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:34:08.483 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:34:08.484 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:34:08.486 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:34:08.488 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:34:08.489 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:34:08.490 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:34:08.492 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:34:08.493 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:34:08.494 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:34:08.496 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:34:08.497 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:34:08.498 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:34:08.498 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:34:08.501 +08:00 [INF] 获取客户统计数据
2025-05-29 18:34:08.504 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:34:08.519 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:34:08.522 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:34:08.524 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:34:08.528 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:34:08.531 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:34:08.534 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:34:08.537 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:34:08.541 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:34:08.545 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:34:08.548 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:34:08.549 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 49.4228ms
2025-05-29 18:34:08.551 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:34:08.552 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 101.2921ms
2025-05-29 18:35:14.497 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:35:14.509 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:35:14.510 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:35:14.511 +08:00 [INF] 请求方法: GET
2025-05-29 18:35:14.512 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:35:14.514 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:35:14.515 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:35:14.517 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:35:14.519 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:35:14.521 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:35:14.523 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:35:14.533 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:35:14.542 +08:00 [INF] 请求头: traceparent = 00-8bcd02761b4908765b407877e29e4433-cc408ecda0a9c3ae-00
2025-05-29 18:35:14.543 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:35:14.546 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:35:14.549 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:35:14.550 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:35:14.551 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:35:14.552 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:35:14.553 +08:00 [INF] 请求方法: GET
2025-05-29 18:35:14.554 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:35:14.555 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:35:14.556 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:35:14.557 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:35:14.559 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:35:14.560 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:35:14.562 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:35:14.563 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:35:14.564 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:35:14.565 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:35:14.566 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:35:14.568 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:35:14.569 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:35:14.570 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:35:14.571 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:35:14.572 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:35:14.573 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:14.574 +08:00 [INF] 请求头: traceparent = 00-f07ba8222a2e80e430b9ff095ab3625f-84103ec43ad4ccf9-00
2025-05-29 18:35:14.576 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:35:14.577 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:35:14.578 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:35:14.579 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:35:14.580 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:35:14.582 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:35:14.581 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:35:14.583 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:35:14.585 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:35:14.586 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:35:14.587 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:35:14.588 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:35:14.589 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:35:14.591 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:35:14.592 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:35:14.593 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:35:14.595 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:35:14.596 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:14.597 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:35:14.597 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:35:14.598 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:35:14.599 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:35:14.600 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:35:14.603 +08:00 [INF] 获取客户统计数据
2025-05-29 18:35:14.603 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:14.606 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:35:14.607 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:35:14.608 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:35:14.610 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:35:14.611 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:35:14.613 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:35:14.614 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:35:14.614 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:35:14.618 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:35:14.620 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:35:14.620 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:35:14.623 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:35:14.623 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:14.627 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:35:14.628 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:35:14.631 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:35:14.632 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:35:14.634 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:35:14.636 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:35:14.646 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:35:14.649 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:35:14.653 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:35:14.660 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:35:14.664 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:35:14.666 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:35:14.667 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:35:14.669 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:35:14.670 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 68.5137ms
2025-05-29 18:35:14.672 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 39.7238ms
2025-05-29 18:35:14.674 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:35:14.675 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:35:14.677 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 179.8833ms
2025-05-29 18:35:14.678 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 135.114ms
2025-05-29 18:35:30.291 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:35:30.294 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:35:30.295 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:35:30.296 +08:00 [INF] 请求方法: GET
2025-05-29 18:35:30.297 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:35:30.298 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:35:30.299 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:35:30.300 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:35:30.301 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:35:30.302 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:35:30.303 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:35:30.305 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:35:30.306 +08:00 [INF] 请求头: traceparent = 00-946f51ac9316fc3c5238d1f3d456a488-a8a7a1ca3a059910-00
2025-05-29 18:35:30.307 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:35:30.308 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:35:30.309 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:35:30.310 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:35:30.311 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:35:30.312 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:35:30.313 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:35:30.314 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:35:30.315 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:35:30.316 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:35:30.318 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:35:30.319 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:30.320 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:35:30.321 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:35:30.322 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:35:30.323 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:35:30.324 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:35:30.325 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:35:30.326 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:35:30.327 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:35:30.328 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:35:30.329 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:30.331 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:35:30.332 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:35:30.336 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:35:30.340 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:35:30.346 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:35:30.349 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:35:30.350 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 15.8999ms
2025-05-29 18:35:30.352 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:35:30.353 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 61.8577ms
2025-05-29 18:35:30.486 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:35:30.489 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:35:30.490 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:35:30.491 +08:00 [INF] 请求方法: GET
2025-05-29 18:35:30.493 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:35:30.494 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:35:30.495 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:35:30.497 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:35:30.498 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:35:30.499 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:35:30.500 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:35:30.502 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:35:30.503 +08:00 [INF] 请求头: traceparent = 00-068ca6edff9e05bd6f7a1273e59f24da-5f84ef5593a05e11-00
2025-05-29 18:35:30.504 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:35:30.505 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:35:30.506 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:35:30.507 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:35:30.509 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:35:30.510 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:35:30.511 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:35:30.513 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:35:30.514 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:35:30.515 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:35:30.516 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:35:30.517 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:30.518 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:35:30.520 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:35:30.521 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:35:30.522 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:35:30.524 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:35:30.525 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:35:30.526 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:35:30.527 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:35:30.529 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:35:30.530 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:35:30.531 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:35:30.532 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:35:30.535 +08:00 [INF] 获取客户统计数据
2025-05-29 18:35:30.537 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:35:30.541 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:35:30.545 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:35:30.548 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:35:30.551 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:35:30.554 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:35:30.557 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:35:30.561 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:35:30.564 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:35:30.567 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:35:30.569 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:35:30.571 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 36.9421ms
2025-05-29 18:35:30.573 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:35:30.574 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 87.7368ms
2025-05-29 18:36:57.084 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:36:57.088 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:36:57.088 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:36:57.091 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:36:57.092 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:36:57.093 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:36:57.094 +08:00 [INF] 请求方法: GET
2025-05-29 18:36:57.095 +08:00 [INF] 请求方法: GET
2025-05-29 18:36:57.096 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:36:57.097 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:36:57.099 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:36:57.100 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:36:57.101 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:36:57.103 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:36:57.104 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:36:57.105 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:36:57.107 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:36:57.108 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:36:57.109 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:36:57.111 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiYjNhNzcwZmItMzZlNi00NGZmLWI3MjAtOWE2ODVhYzJiYTc0IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTUwMzgsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.prVm4TJPWzm4_wTF_ztdPvtWSOzlWlqxAjavoTwTVHU
2025-05-29 18:36:57.112 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:36:57.114 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:36:57.115 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:36:57.116 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:36:57.117 +08:00 [INF] 请求头: traceparent = 00-581de528e5a71ae0ca57dad66c2c0e53-096d66c645b4413d-00
2025-05-29 18:36:57.119 +08:00 [INF] 请求头: traceparent = 00-df357948dedcced5c550ac803522d585-659c8245b3423901-00
2025-05-29 18:36:57.120 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:36:57.121 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:36:57.123 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:36:57.124 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:36:57.126 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:36:57.127 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:36:57.128 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:36:57.130 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:36:57.131 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:36:57.133 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:36:57.134 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:36:57.136 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:36:57.137 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:36:57.139 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:36:57.140 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:36:57.141 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:36:57.143 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:36:57.144 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:36:57.145 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:36:57.146 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:36:57.147 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:36:57.148 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:36:57.149 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:36:57.151 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:36:57.152 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:36:57.153 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:36:57.155 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:36:57.156 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:36:57.158 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:36:57.159 +08:00 [INF] JWT Claim: jti = b3a770fb-36e6-44ff-b720-9a685ac2ba74
2025-05-29 18:36:57.160 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:36:57.162 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:36:57.163 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:36:57.165 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:36:57.166 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:36:57.167 +08:00 [INF] JWT Claim: exp = 1748515038
2025-05-29 18:36:57.169 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:36:57.170 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:36:57.171 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:36:57.173 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:36:57.174 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:36:57.175 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:36:57.177 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:36:57.177 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:36:57.178 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:36:57.179 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:36:57.181 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:36:57.182 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:36:57.185 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:36:57.188 +08:00 [INF] 获取客户统计数据
2025-05-29 18:36:57.196 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:36:57.196 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:36:57.204 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:36:57.207 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:36:57.208 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:36:57.211 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:36:57.212 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 28.0887ms
2025-05-29 18:36:57.215 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:36:57.216 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:36:57.220 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:36:57.220 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 136.5518ms
2025-05-29 18:36:57.225 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:36:57.234 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:36:57.237 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:36:57.242 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:36:57.246 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:36:57.249 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:36:57.251 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 65.3872ms
2025-05-29 18:36:57.253 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:36:57.255 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 167.0256ms
2025-05-29 18:37:41.332 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:37:41.335 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:37:41.336 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:37:41.337 +08:00 [INF] 请求方法: GET
2025-05-29 18:37:41.338 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:37:41.339 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:37:41.341 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:37:41.342 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:37:41.343 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:37:41.345 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:37:41.346 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:37:41.347 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:37:41.349 +08:00 [INF] 请求头: traceparent = 00-5fa6b6450c2af5c6094cf5aae407d559-9e50067900cb0af7-00
2025-05-29 18:37:41.350 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:37:41.351 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:37:41.353 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:37:41.354 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:37:41.355 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:37:41.357 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:37:41.358 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:37:41.359 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:37:41.360 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:37:41.362 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:37:41.362 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:37:41.363 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:41.365 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:37:41.366 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:37:41.368 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:37:41.369 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:37:41.371 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:37:41.372 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:37:41.373 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:37:41.375 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:37:41.376 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:37:41.378 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:41.379 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:37:41.380 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:37:41.383 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:37:41.395 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:37:41.400 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:37:41.403 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:37:41.405 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 22.8577ms
2025-05-29 18:37:41.407 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:37:41.408 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 76.7228ms
2025-05-29 18:37:41.555 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:37:41.567 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:37:41.568 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:37:41.569 +08:00 [INF] 请求方法: GET
2025-05-29 18:37:41.569 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:37:41.570 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:37:41.572 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:37:41.573 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:37:41.574 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:37:41.575 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:37:41.576 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:37:41.577 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:37:41.578 +08:00 [INF] 请求头: traceparent = 00-5b0945cb2e2f94995130b47e0d93696d-a926bcbcab9495ba-00
2025-05-29 18:37:41.580 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:37:41.581 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:37:41.582 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:37:41.584 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:37:41.585 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:37:41.586 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:37:41.587 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:37:41.589 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:37:41.590 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:37:41.591 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:37:41.592 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:37:41.593 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:41.594 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:37:41.595 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:37:41.597 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:37:41.598 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:37:41.599 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:37:41.600 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:37:41.602 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:37:41.603 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:37:41.604 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:37:41.605 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:41.606 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:37:41.607 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:37:41.610 +08:00 [INF] 获取客户统计数据
2025-05-29 18:37:41.612 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:37:41.617 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:37:41.621 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:37:41.624 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:37:41.628 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:37:41.631 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:37:41.635 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:37:41.638 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:37:41.642 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:37:41.648 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:37:41.651 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:37:41.652 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 43.0625ms
2025-05-29 18:37:41.654 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:37:41.655 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 100.4782ms
2025-05-29 18:37:59.428 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:37:59.431 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:37:59.432 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:37:59.433 +08:00 [INF] 请求方法: GET
2025-05-29 18:37:59.434 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:37:59.435 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:37:59.436 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:37:59.438 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:37:59.439 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:37:59.440 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:37:59.442 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:37:59.443 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:37:59.444 +08:00 [INF] 请求头: traceparent = 00-ababe26a46d843eee43ebf179d3fce01-8526ec1f56d8b169-00
2025-05-29 18:37:59.445 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:37:59.446 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:37:59.447 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:37:59.449 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:37:59.451 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:37:59.452 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:37:59.453 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:37:59.454 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:37:59.455 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:37:59.456 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:37:59.458 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:37:59.459 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:59.460 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:37:59.461 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:37:59.464 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:37:59.465 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:37:59.466 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:37:59.468 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:37:59.469 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:37:59.470 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:37:59.472 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:37:59.473 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:59.474 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:37:59.476 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:37:59.479 +08:00 [INF] 获取客户统计数据
2025-05-29 18:37:59.482 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:37:59.488 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:37:59.492 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:37:59.497 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:37:59.513 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:37:59.517 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:37:59.521 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:37:59.525 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:37:59.529 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:37:59.534 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:37:59.537 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:37:59.539 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 60.9574ms
2025-05-29 18:37:59.540 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:37:59.542 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 113.1896ms
2025-05-29 18:37:59.679 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:37:59.683 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:37:59.684 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:37:59.685 +08:00 [INF] 请求方法: GET
2025-05-29 18:37:59.686 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:37:59.687 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:37:59.688 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:37:59.690 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:37:59.691 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:37:59.693 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:37:59.694 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:37:59.695 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:37:59.697 +08:00 [INF] 请求头: traceparent = 00-c43f2953e2353cc4e35b8d8a83523fdc-8e22c9770d2f1d09-00
2025-05-29 18:37:59.698 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:37:59.699 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:37:59.701 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:37:59.702 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:37:59.703 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:37:59.704 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:37:59.706 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:37:59.707 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:37:59.709 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:37:59.709 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:37:59.710 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:37:59.711 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:59.713 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:37:59.714 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:37:59.716 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:37:59.717 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:37:59.719 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:37:59.720 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:37:59.721 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:37:59.723 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:37:59.724 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:37:59.727 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:37:59.728 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:37:59.730 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:37:59.733 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:37:59.736 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:37:59.741 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:37:59.743 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:37:59.745 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 13.4376ms
2025-05-29 18:37:59.747 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:37:59.748 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 68.4828ms
2025-05-29 18:38:00.930 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:38:00.933 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:38:00.934 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:38:00.935 +08:00 [INF] 请求方法: GET
2025-05-29 18:38:00.936 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:38:00.938 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:38:00.939 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:38:00.941 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:38:00.942 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:38:00.944 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:38:00.945 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:38:00.947 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:38:00.948 +08:00 [INF] 请求头: traceparent = 00-693fe4e52cbb84e028ec9124b358a9f0-0b3ccabb641abd64-00
2025-05-29 18:38:00.950 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:38:00.951 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:38:00.952 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:38:00.954 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:38:00.955 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:38:00.956 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:38:00.957 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:38:00.959 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:38:00.960 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:38:00.961 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:38:00.961 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:38:00.962 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:00.964 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:38:00.965 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:38:00.967 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:38:00.968 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:38:00.969 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:38:00.971 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:38:00.972 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:38:00.973 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:38:00.974 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:38:00.975 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:00.976 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:00.978 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:38:00.983 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:38:00.987 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:38:00.991 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:38:00.993 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:38:00.995 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 15.2686ms
2025-05-29 18:38:00.996 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:00.998 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 68.1265ms
2025-05-29 18:38:01.148 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:38:01.152 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:38:01.153 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:38:01.154 +08:00 [INF] 请求方法: GET
2025-05-29 18:38:01.155 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:38:01.156 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:38:01.157 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:38:01.159 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:38:01.160 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:38:01.161 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:38:01.162 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:38:01.164 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:38:01.165 +08:00 [INF] 请求头: traceparent = 00-153da680d23b6456fd0dee3067516794-1f440cdd988f4ca9-00
2025-05-29 18:38:01.166 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:38:01.167 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:38:01.168 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:38:01.169 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:38:01.170 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:38:01.171 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:38:01.172 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:38:01.174 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:38:01.175 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:38:01.176 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:38:01.178 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:38:01.179 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:01.180 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:38:01.181 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:38:01.183 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:38:01.184 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:38:01.185 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:38:01.186 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:38:01.187 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:38:01.188 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:38:01.189 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:38:01.191 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:01.192 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:01.194 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:38:01.197 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:38:01.200 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:38:01.205 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:38:01.207 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:38:01.209 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 13.6282ms
2025-05-29 18:38:01.211 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:01.212 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 64.0662ms
2025-05-29 18:38:02.245 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:38:02.248 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:38:02.249 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:38:02.250 +08:00 [INF] 请求方法: GET
2025-05-29 18:38:02.251 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:38:02.253 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:38:02.254 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:38:02.255 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:38:02.256 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:38:02.258 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:38:02.260 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:38:02.261 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:38:02.262 +08:00 [INF] 请求头: traceparent = 00-bb84a7d1c07706e0ca436a3730c69256-2b61ca253c3c85f0-00
2025-05-29 18:38:02.263 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:38:02.264 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:38:02.266 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:38:02.267 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:38:02.268 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:38:02.270 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:38:02.271 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:38:02.272 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:38:02.273 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:38:02.275 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:38:02.276 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:38:02.277 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:02.278 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:38:02.279 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:38:02.280 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:38:02.281 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:38:02.283 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:38:02.284 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:38:02.285 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:38:02.286 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:38:02.287 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:38:02.288 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:02.290 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:02.291 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:38:02.294 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:38:02.298 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:38:02.302 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:38:02.304 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:38:02.306 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 13.0353ms
2025-05-29 18:38:02.308 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:02.309 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 64.5805ms
2025-05-29 18:38:02.455 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:38:02.458 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:38:02.459 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:38:02.460 +08:00 [INF] 请求方法: GET
2025-05-29 18:38:02.461 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:38:02.462 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:38:02.464 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:38:02.465 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:38:02.467 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:38:02.468 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:38:02.469 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:38:02.470 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:38:02.472 +08:00 [INF] 请求头: traceparent = 00-43e012ffe9abbaec23dab2c85a1ab6f8-803e55624e5d9a9e-00
2025-05-29 18:38:02.473 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:38:02.475 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:38:02.476 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:38:02.477 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:38:02.479 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:38:02.480 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:38:02.481 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:38:02.482 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:38:02.484 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:38:02.485 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:38:02.485 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:38:02.486 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:02.488 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:38:02.489 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:38:02.490 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:38:02.491 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:38:02.493 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:38:02.494 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:38:02.495 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:38:02.496 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:38:02.498 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:38:02.499 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:02.500 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:02.501 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:38:02.505 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:38:02.509 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:38:02.513 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:38:02.515 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:38:02.516 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 13.1838ms
2025-05-29 18:38:02.518 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:02.519 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 63.9299ms
2025-05-29 18:38:07.997 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:38:08.001 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:38:08.002 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:38:08.003 +08:00 [INF] 请求方法: GET
2025-05-29 18:38:08.005 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:38:08.006 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:38:08.008 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:38:08.009 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:38:08.011 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:38:08.012 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:38:08.014 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:38:08.016 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:38:08.017 +08:00 [INF] 请求头: traceparent = 00-84a2a1fd959e1adab45bbb1d9d2c456a-c660f637b3bd1bc4-00
2025-05-29 18:38:08.019 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:38:08.020 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:38:08.022 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:38:08.023 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:38:08.025 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:38:08.026 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:38:08.028 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:38:08.029 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:38:08.031 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:38:08.032 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:38:08.033 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:38:08.035 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:08.036 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:38:08.038 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:38:08.039 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:38:08.041 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:38:08.042 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:38:08.044 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:38:08.045 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:38:08.047 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:38:08.049 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:38:08.050 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:08.052 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:08.054 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:38:08.060 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:38:08.065 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:38:08.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:38:08.072 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:38:08.074 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 16.8573ms
2025-05-29 18:38:08.076 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:08.077 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 80.3762ms
2025-05-29 18:38:08.219 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:38:08.222 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:38:08.223 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:38:08.224 +08:00 [INF] 请求方法: GET
2025-05-29 18:38:08.225 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:38:08.226 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:38:08.227 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:38:08.228 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:38:08.229 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:38:08.231 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:38:08.232 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:38:08.233 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:38:08.235 +08:00 [INF] 请求头: traceparent = 00-7bb77832fa20b36c228ff2731f2bb93f-00c269cc8f9abc02-00
2025-05-29 18:38:08.236 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:38:08.237 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:38:08.238 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:38:08.239 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:38:08.241 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:38:08.242 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:38:08.243 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:38:08.245 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:38:08.246 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:38:08.247 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:38:08.247 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:38:08.249 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:08.250 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:38:08.251 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:38:08.253 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:38:08.254 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:38:08.255 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:38:08.257 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:38:08.258 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:38:08.259 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:38:08.261 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:38:08.262 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:38:08.263 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:08.264 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:38:08.267 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:38:08.270 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:38:08.274 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:38:08.276 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:38:08.278 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 11.5252ms
2025-05-29 18:38:08.279 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:38:08.280 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 61.1148ms
2025-05-29 18:39:30.897 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:39:30.906 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:39:30.906 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:39:30.907 +08:00 [INF] 请求方法: GET
2025-05-29 18:39:30.908 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:39:30.910 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:39:30.911 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:39:30.912 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:39:30.914 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:39:30.915 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:39:30.917 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:39:30.918 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:39:30.919 +08:00 [INF] 请求头: traceparent = 00-9971bb55ebecdda7e3166287a494311c-0a1dcce766e491c6-00
2025-05-29 18:39:30.920 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:39:30.921 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:39:30.923 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:39:30.924 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:39:30.925 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:39:30.927 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:39:30.928 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:39:30.930 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:39:30.931 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:39:30.932 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:39:30.933 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:39:30.934 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:30.935 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:39:30.937 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:39:30.938 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:39:30.939 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:39:30.941 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:39:30.942 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:39:30.944 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:39:30.945 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:39:30.946 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:39:30.948 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:30.949 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:30.950 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:39:30.953 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:39:30.961 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:39:30.967 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:39:30.969 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:39:30.971 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 18.8517ms
2025-05-29 18:39:30.973 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:30.974 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 76.8595ms
2025-05-29 18:39:31.092 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:39:31.095 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:39:31.095 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:39:31.097 +08:00 [INF] 请求方法: GET
2025-05-29 18:39:31.098 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:39:31.099 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:39:31.100 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:39:31.102 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:39:31.103 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:39:31.104 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:39:31.105 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:39:31.106 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:39:31.108 +08:00 [INF] 请求头: traceparent = 00-f0b5f22e78eb58387d496af0d7864eb2-4ed35b5d959f6a31-00
2025-05-29 18:39:31.109 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:39:31.110 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:39:31.111 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:39:31.113 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:39:31.114 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:39:31.115 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:39:31.116 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:39:31.117 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:39:31.119 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:39:31.119 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:39:31.120 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:39:31.121 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:31.123 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:39:31.125 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:39:31.126 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:39:31.127 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:39:31.129 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:39:31.130 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:39:31.132 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:39:31.133 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:39:31.135 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:39:31.136 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:31.137 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:31.138 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:39:31.142 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:39:31.146 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:39:31.151 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:39:31.153 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:39:31.154 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 14.1751ms
2025-05-29 18:39:31.156 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:31.157 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 64.7732ms
2025-05-29 18:39:38.355 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:39:38.358 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:39:38.360 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:39:38.361 +08:00 [INF] 请求方法: GET
2025-05-29 18:39:38.362 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:39:38.364 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:39:38.365 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:39:38.366 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:39:38.368 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:39:38.369 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:39:38.370 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:39:38.371 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:39:38.373 +08:00 [INF] 请求头: traceparent = 00-17d5a15af45ea75bd9b575eee919c16f-fbb6c0a8493e1a4c-00
2025-05-29 18:39:38.374 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:39:38.375 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:39:38.377 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:39:38.378 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:39:38.379 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:39:38.380 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:39:38.381 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:39:38.383 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:39:38.384 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:39:38.385 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:39:38.386 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:39:38.387 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:38.388 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:39:38.390 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:39:38.391 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:39:38.393 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:39:38.395 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:39:38.396 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:39:38.397 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:39:38.399 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:39:38.400 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:39:38.401 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:38.402 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:38.404 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:39:38.407 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:39:38.413 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:39:38.424 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:39:38.427 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:39:38.428 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 22.5984ms
2025-05-29 18:39:38.430 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:38.431 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 76.5203ms
2025-05-29 18:39:38.591 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:39:38.594 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:39:38.594 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:39:38.595 +08:00 [INF] 请求方法: GET
2025-05-29 18:39:38.596 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:39:38.598 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:39:38.599 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:39:38.600 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:39:38.602 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:39:38.603 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:39:38.604 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:39:38.605 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:39:38.607 +08:00 [INF] 请求头: traceparent = 00-524d5955fa57e95c3623397fa5f8fd38-355c3e5e1253947f-00
2025-05-29 18:39:38.608 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:39:38.609 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:39:38.611 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:39:38.612 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:39:38.613 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:39:38.615 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:39:38.616 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:39:38.618 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:39:38.620 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:39:38.620 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:39:38.621 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:39:38.622 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:38.624 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:39:38.625 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:39:38.627 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:39:38.629 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:39:38.630 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:39:38.631 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:39:38.633 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:39:38.634 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:39:38.636 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:39:38.637 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:39:38.638 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:38.639 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:39:38.643 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:39:38.648 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:39:38.652 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:39:38.655 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:39:38.656 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 14.4204ms
2025-05-29 18:39:38.658 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:39:38.660 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 69.0294ms
2025-05-29 18:40:40.547 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:40:40.558 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:40:40.560 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:40:40.561 +08:00 [INF] 请求方法: GET
2025-05-29 18:40:40.562 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:40:40.563 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:40:40.565 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:40:40.566 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:40:40.568 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:40:40.569 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:40:40.571 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:40:40.573 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:40:40.574 +08:00 [INF] 请求头: traceparent = 00-e14c2bc423aae8c1ea16a1a2a518d6db-c3e2734545b31735-00
2025-05-29 18:40:40.576 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:40:40.578 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:40:40.579 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:40:40.581 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:40:40.583 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:40:40.584 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:40:40.585 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:40:40.587 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:40:40.588 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:40:40.589 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:40:40.591 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:40:40.592 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:40:40.594 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:40:40.595 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:40:40.597 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:40:40.599 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:40:40.600 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:40:40.601 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:40:40.603 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:40:40.604 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:40:40.606 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:40:40.607 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:40:40.608 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:40:40.610 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:40:40.613 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:40:40.621 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:40:40.626 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:40:40.629 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:40:40.631 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.1539ms
2025-05-29 18:40:40.633 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:40:40.635 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 87.3338ms
2025-05-29 18:40:42.790 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=2&pageSize=10 - null 0
2025-05-29 18:40:42.793 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:40:42.794 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:40:42.795 +08:00 [INF] 请求方法: GET
2025-05-29 18:40:42.796 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:40:42.799 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:40:42.801 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:40:42.802 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:40:42.804 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:40:42.806 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:40:42.808 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:40:42.815 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:40:42.816 +08:00 [INF] 请求头: traceparent = 00-a1355083f94daf32e1bfd413b595c294-2ddb3733846fa51f-00
2025-05-29 18:40:42.817 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:40:42.819 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:40:42.820 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:40:42.821 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:40:42.823 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:40:42.825 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:40:42.826 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:40:42.827 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:40:42.828 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:40:42.829 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:40:42.830 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:40:42.831 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:40:42.833 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:40:42.834 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:40:42.835 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:40:42.836 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:40:42.838 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:40:42.840 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:40:42.841 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:40:42.842 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:40:42.843 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:40:42.844 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:40:42.845 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:40:42.847 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:40:42.850 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:2, 页大小:10
2025-05-29 18:40:42.854 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:40:42.868 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:40:42.871 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:40:42.873 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 23.8874ms
2025-05-29 18:40:42.874 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:40:42.876 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=2&pageSize=10 - 200 null application/json; charset=utf-8 85.4826ms
2025-05-29 18:40:44.392 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:40:44.395 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:40:44.395 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:40:44.396 +08:00 [INF] 请求方法: GET
2025-05-29 18:40:44.398 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:40:44.399 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:40:44.400 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:40:44.401 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:40:44.402 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:40:44.403 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:40:44.404 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:40:44.406 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:40:44.407 +08:00 [INF] 请求头: traceparent = 00-f791e483c3bd6ce5cda0246c92b1159f-d399ed47a752e60a-00
2025-05-29 18:40:44.408 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:40:44.409 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:40:44.410 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:40:44.411 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:40:44.412 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:40:44.414 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:40:44.415 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:40:44.416 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:40:44.417 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:40:44.418 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:40:44.419 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:40:44.420 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:40:44.421 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:40:44.422 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:40:44.423 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:40:44.424 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:40:44.425 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:40:44.427 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:40:44.428 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:40:44.429 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:40:44.430 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:40:44.431 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:40:44.432 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:40:44.433 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:40:44.436 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:40:44.440 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:40:44.450 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:40:44.452 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:40:44.454 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.3613ms
2025-05-29 18:40:44.456 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:40:44.457 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 65.2014ms
2025-05-29 18:45:22.097 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:45:22.106 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:45:22.107 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:45:22.109 +08:00 [INF] 请求方法: GET
2025-05-29 18:45:22.110 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:45:22.111 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:45:22.112 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:45:22.114 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:45:22.115 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:45:22.117 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:45:22.118 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:45:22.120 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:45:22.121 +08:00 [INF] 请求头: traceparent = 00-bc483599f58ba3ee825fc3f502acf72d-2b17c8311bf1decd-00
2025-05-29 18:45:22.122 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:45:22.124 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:45:22.126 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:45:22.127 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:45:22.128 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:45:22.130 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:45:22.131 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:45:22.133 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:45:22.135 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:45:22.136 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:45:22.138 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:45:22.139 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:45:22.141 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:45:22.142 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:45:22.144 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:45:22.145 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:45:22.147 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:45:22.148 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:45:22.150 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:45:22.152 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:45:22.154 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:45:22.155 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:45:22.156 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:45:22.158 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:45:22.162 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:45:22.177 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:45:22.185 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:45:22.188 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:45:22.190 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 29.6845ms
2025-05-29 18:45:22.192 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:45:22.194 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 97.19ms
2025-05-29 18:46:41.678 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 18:46:41.681 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:46:41.682 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:46:41.683 +08:00 [INF] 请求方法: GET
2025-05-29 18:46:41.684 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:46:41.686 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:46:41.687 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:46:41.688 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:46:41.689 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:46:41.691 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:46:41.692 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:46:41.694 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:46:41.695 +08:00 [INF] 请求头: traceparent = 00-c46e74ba364050cd0eadc4a893ad6bdf-8de7ea4ccc842b1f-00
2025-05-29 18:46:41.696 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:46:41.698 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:46:41.699 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:46:41.701 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:46:41.702 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:46:41.703 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:46:41.705 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:46:41.706 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:46:41.707 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:46:41.708 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:46:41.709 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:46:41.711 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:46:41.712 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:46:41.713 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:46:41.715 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:46:41.716 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:46:41.718 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:46:41.719 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:46:41.720 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:46:41.722 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:46:41.723 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:46:41.724 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:46:41.726 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:46:41.727 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:46:41.733 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:5
2025-05-29 18:46:41.743 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:46:41.750 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:46:41.768 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:46:41.770 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 41.0473ms
2025-05-29 18:46:41.772 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:46:41.773 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 95.312ms
2025-05-29 18:46:41.912 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 18:46:41.915 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:46:41.916 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 18:46:41.917 +08:00 [INF] 请求方法: GET
2025-05-29 18:46:41.919 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:46:41.920 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:46:41.921 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:46:41.922 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:46:41.923 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:46:41.925 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:46:41.926 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:46:41.927 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:46:41.928 +08:00 [INF] 请求头: traceparent = 00-9424e74ae15f7b06bb5effd92258f067-c0279e9be29fa8f8-00
2025-05-29 18:46:41.929 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:46:41.930 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:46:41.932 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:46:41.933 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:46:41.934 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:46:41.935 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:46:41.936 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:46:41.937 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:46:41.939 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:46:41.939 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:46:41.940 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:46:41.941 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:46:41.943 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:46:41.944 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:46:41.945 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:46:41.946 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:46:41.948 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:46:41.949 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:46:41.950 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:46:41.952 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:46:41.953 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:46:41.954 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:46:41.955 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:46:41.956 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Models.ClientStats]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:46:41.959 +08:00 [INF] 获取客户统计数据
2025-05-29 18:46:41.962 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:46:41.968 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 1
2025-05-29 18:46:41.971 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 2
2025-05-29 18:46:41.974 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3
2025-05-29 18:46:41.979 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 1
2025-05-29 18:46:41.982 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 2
2025-05-29 18:46:41.985 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 3
2025-05-29 18:46:41.989 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Type] = 4
2025-05-29 18:46:41.993 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[CreateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:46:41.998 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
WHERE [c].[Status] = 3 AND [c].[UpdateTime] >= @__thirtyDaysAgo_0
2025-05-29 18:46:42.000 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Models.ClientStats, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:46:42.002 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 43.7977ms
2025-05-29 18:46:42.003 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 18:46:42.005 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 92.4219ms
2025-05-29 18:46:44.361 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 18:46:44.364 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 18:46:44.365 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 18:46:44.366 +08:00 [INF] 请求方法: GET
2025-05-29 18:46:44.367 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 18:46:44.368 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 18:46:44.370 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 18:46:44.371 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 18:46:44.372 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 18:46:44.373 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiY2UxODlmMjctYmM5Zi00ZmQ2LWE2YjQtMGViMDI0MmEzNzliIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTU2NjAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.QTfo-ilvUhRDNjoxIJb6kRsBuxSYM-M115iXSHusk80
2025-05-29 18:46:44.375 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 18:46:44.376 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 18:46:44.377 +08:00 [INF] 请求头: traceparent = 00-095aadfaf772b10101f4e6c1ec913d76-fae9d86b4705af50-00
2025-05-29 18:46:44.378 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 18:46:44.380 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 18:46:44.381 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 18:46:44.382 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 18:46:44.383 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 18:46:44.385 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 18:46:44.386 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 18:46:44.387 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 18:46:44.388 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 18:46:44.389 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 18:46:44.390 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 18:46:44.391 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:46:44.392 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 18:46:44.393 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 18:46:44.394 +08:00 [INF] JWT Claim: jti = ce189f27-bc9f-4fd6-a6b4-0eb0242a379b
2025-05-29 18:46:44.395 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 18:46:44.397 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 18:46:44.398 +08:00 [INF] JWT Claim: exp = 1748515660
2025-05-29 18:46:44.399 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 18:46:44.400 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 18:46:44.401 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 18:46:44.402 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 18:46:44.403 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:46:44.404 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.Database.Models.Client]]] GetClients(System.String, System.String, System.Nullable`1[RealEstateSolution.Database.Models.ClientType], Int32, Int32) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 18:46:44.407 +08:00 [INF] 获取客户列表 - 姓名:null, 电话:null, 类型:null, 页码:1, 页大小:10
2025-05-29 18:46:44.411 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 18:46:44.414 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 18:46:44.416 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.Database.Models.Client, RealEstateSolution.Database, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 18:46:44.418 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 11.9787ms
2025-05-29 18:46:44.419 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 18:46:44.420 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 59.0085ms
2025-05-29 19:40:04.729 +08:00 [INF] User profile is available. Using 'C:\Users\lsisl\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 19:40:05.052 +08:00 [INF] Now listening on: https://localhost:5003
2025-05-29 19:40:05.170 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 19:40:05.172 +08:00 [INF] Hosting environment: Development
2025-05-29 19:40:05.174 +08:00 [INF] Content root path: D:\Cshrap\RealEstateSolution\RealEstateSolution.ClientService
2025-05-29 19:40:08.790 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null
2025-05-29 19:40:08.799 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null
2025-05-29 19:40:08.896 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 109.9532ms
2025-05-29 19:40:09.023 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 224.2802ms
2025-05-29 19:40:10.099 +08:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-05-29 19:40:10.205 +08:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.5543ms
2025-05-29 19:40:41.065 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:40:41.065 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 19:40:41.131 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:40:41.131 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:40:41.133 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:40:41.133 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:40:41.134 +08:00 [INF] 请求方法: GET
2025-05-29 19:40:41.135 +08:00 [INF] 请求方法: GET
2025-05-29 19:40:41.137 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:40:41.137 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:40:41.138 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:40:41.139 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:40:41.140 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:40:41.141 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:40:41.142 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:40:41.144 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:40:41.145 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:40:41.146 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:40:41.147 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:40:41.149 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:40:41.150 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:40:41.151 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:40:41.152 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:40:41.154 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:40:41.155 +08:00 [INF] 请求头: traceparent = 00-c606e2bac87fa7bbe23c368ba891f8e9-bd286603b0fab4ef-00
2025-05-29 19:40:41.156 +08:00 [INF] 请求头: traceparent = 00-5d970fe22cc60085466201a205a19c64-f4780c893144b051-00
2025-05-29 19:40:41.157 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:40:41.158 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:40:41.159 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:40:41.160 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:40:41.161 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:40:41.162 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:40:41.163 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:40:41.164 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:40:41.165 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:40:41.166 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:40:41.168 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:40:41.169 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:40:41.170 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:40:41.171 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:40:41.172 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:40:41.173 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:40:41.174 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:40:41.175 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:40:41.176 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:40:41.177 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:40:41.223 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:40:41.223 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:40:41.224 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:40:41.224 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:40:41.226 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:40:41.227 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:40:41.228 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:40:41.229 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:40:41.230 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:40:41.231 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:40:41.232 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:40:41.233 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:40:41.234 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:40:41.235 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:40:41.236 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:40:41.237 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:40:41.238 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:40:41.239 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:40:41.240 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:40:41.241 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:40:41.243 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:40:41.244 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:40:41.315 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:40:41.315 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:40:41.346 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:40:41.346 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:40:41.362 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:40:41.363 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:40:41.936 +08:00 [WRN] No store type was specified for the decimal property 'MaxArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 19:40:41.937 +08:00 [WRN] No store type was specified for the decimal property 'MaxPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 19:40:41.938 +08:00 [WRN] No store type was specified for the decimal property 'MinArea' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 19:40:41.939 +08:00 [WRN] No store type was specified for the decimal property 'MinPrice' on entity type 'ClientRequirements'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 19:40:41.940 +08:00 [WRN] No store type was specified for the decimal property 'Area' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 19:40:41.942 +08:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Property'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-29 19:40:42.064 +08:00 [INF] 获取客户统计数据
2025-05-29 19:40:42.094 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:40:42.615 +08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:40:42.615 +08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:40:42.678 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:40:42.704 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 1337.2935ms
2025-05-29 19:40:42.706 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:40:42.710 +08:00 [INF] Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:40:42.714 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 1652.2379ms
2025-05-29 19:40:42.715 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:40:42.736 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 1368.4626ms
2025-05-29 19:40:42.738 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:40:42.739 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 1677.7706ms
2025-05-29 19:42:30.965 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 19:42:30.970 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:42:30.972 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:42:30.973 +08:00 [INF] 请求方法: GET
2025-05-29 19:42:30.974 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:42:30.976 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:42:30.977 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:42:30.979 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:42:30.981 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:42:30.982 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:42:30.984 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:42:30.986 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:42:30.987 +08:00 [INF] 请求头: traceparent = 00-484a6840c69f5cf722d75299ea30a7ab-35bb48db9d506be9-00
2025-05-29 19:42:30.989 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:42:30.990 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:42:30.992 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:42:30.993 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:42:30.995 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:42:30.996 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:42:30.998 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:42:30.999 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:42:31.001 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:42:31.002 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:42:31.003 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:42:31.005 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.006 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:42:31.007 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:42:31.009 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:42:31.010 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:42:31.012 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:42:31.013 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:42:31.015 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:42:31.017 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:42:31.018 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:42:31.022 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.028 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.030 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:42:31.102 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:42:31.123 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:42:31.142 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:42:31.147 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:42:31.150 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 116.7981ms
2025-05-29 19:42:31.153 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.156 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 190.7242ms
2025-05-29 19:42:31.169 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:42:31.173 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:42:31.174 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:42:31.177 +08:00 [INF] 请求方法: GET
2025-05-29 19:42:31.179 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:42:31.181 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:42:31.183 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:42:31.185 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:42:31.187 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:42:31.189 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:42:31.191 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:42:31.193 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:42:31.195 +08:00 [INF] 请求头: traceparent = 00-87ab454f8fb5f55a99afb1f261e4c7b9-9037afb0b40ed079-00
2025-05-29 19:42:31.196 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:42:31.198 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:42:31.200 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:42:31.202 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:42:31.203 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:42:31.205 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:42:31.207 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:42:31.209 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:42:31.210 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:42:31.211 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:42:31.213 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:42:31.214 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.216 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:42:31.217 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:42:31.219 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:42:31.221 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:42:31.222 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:42:31.224 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:42:31.226 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:42:31.227 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:42:31.229 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:42:31.231 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.232 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.234 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:42:31.238 +08:00 [INF] 获取客户统计数据
2025-05-29 19:42:31.245 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:42:31.250 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:42:31.253 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 15.6565ms
2025-05-29 19:42:31.255 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.256 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 87.0363ms
2025-05-29 19:42:31.389 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 19:42:31.392 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:42:31.393 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:42:31.395 +08:00 [INF] 请求方法: GET
2025-05-29 19:42:31.396 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:42:31.397 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:42:31.399 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:42:31.400 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:42:31.402 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:42:31.403 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:42:31.405 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:42:31.406 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:42:31.408 +08:00 [INF] 请求头: traceparent = 00-bd72472b985658f769a90dad04065ac8-d0506d6d5b4a191a-00
2025-05-29 19:42:31.409 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:42:31.411 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:42:31.412 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:42:31.414 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:42:31.415 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:42:31.417 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:42:31.418 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:42:31.419 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:42:31.421 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:42:31.422 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:42:31.423 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:42:31.424 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.426 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:42:31.428 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:42:31.429 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:42:31.431 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:42:31.432 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:42:31.434 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:42:31.435 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:42:31.437 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:42:31.438 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:42:31.440 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.441 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.442 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:42:31.446 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:42:31.462 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:42:31.472 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:42:31.476 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:42:31.478 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 33.7328ms
2025-05-29 19:42:31.481 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.483 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 94.34ms
2025-05-29 19:42:31.532 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:42:31.537 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:42:31.539 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:42:31.540 +08:00 [INF] 请求方法: GET
2025-05-29 19:42:31.541 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:42:31.543 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:42:31.545 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:42:31.546 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:42:31.548 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:42:31.550 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:42:31.552 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:42:31.554 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:42:31.556 +08:00 [INF] 请求头: traceparent = 00-10011942c3f8e7cc91b814bf134849e3-a02c919985975c8d-00
2025-05-29 19:42:31.557 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:42:31.559 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:42:31.561 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:42:31.562 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:42:31.564 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:42:31.566 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:42:31.568 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:42:31.569 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:42:31.571 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:42:31.572 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:42:31.574 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:42:31.575 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.578 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:42:31.579 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:42:31.581 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:42:31.582 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:42:31.584 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:42:31.586 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:42:31.588 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:42:31.590 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:42:31.591 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:42:31.593 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:31.594 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.596 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:42:31.600 +08:00 [INF] 获取客户统计数据
2025-05-29 19:42:31.606 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:42:31.611 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:42:31.613 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 15.0196ms
2025-05-29 19:42:31.617 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:42:31.619 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 87.2793ms
2025-05-29 19:42:44.703 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - null 0
2025-05-29 19:42:44.708 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:42:44.710 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:42:44.711 +08:00 [INF] 请求方法: GET
2025-05-29 19:42:44.713 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:42:44.714 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:42:44.717 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:42:44.719 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:42:44.720 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:42:44.722 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:42:44.724 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:42:44.726 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:42:44.728 +08:00 [INF] 请求头: traceparent = 00-5e57654ac16c2d19eec61b3be99af315-3caa78f1c57f3adb-00
2025-05-29 19:42:44.730 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:42:44.731 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:42:44.733 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:42:44.735 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:42:44.741 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:42:44.743 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:42:44.745 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:42:44.747 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:42:44.749 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:42:44.750 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:42:44.752 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:42:44.754 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:44.756 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:42:44.758 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:42:44.761 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:42:44.763 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:42:44.764 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:42:44.766 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:42:44.769 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:42:44.771 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:42:44.773 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:42:44.775 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:44.777 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:42:44.779 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:42:44.784 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:42:44.803 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:42:44.811 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:42:44.814 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:42:44.816 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 34.5477ms
2025-05-29 19:42:44.818 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:42:44.820 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 116.9054ms
2025-05-29 19:42:44.982 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:42:44.985 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:42:44.986 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:42:44.988 +08:00 [INF] 请求方法: GET
2025-05-29 19:42:44.989 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:42:44.990 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:42:44.992 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:42:44.993 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:42:44.995 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:42:44.997 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:42:44.999 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:42:45.000 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:42:45.002 +08:00 [INF] 请求头: traceparent = 00-da9978ceabc16656f0188f55ef4d8504-1f794cf7e56d3fc9-00
2025-05-29 19:42:45.004 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:42:45.005 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:42:45.007 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:42:45.008 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:42:45.010 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:42:45.012 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:42:45.013 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:42:45.015 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:42:45.016 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:42:45.018 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:42:45.019 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:42:45.020 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:45.021 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:42:45.023 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:42:45.024 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:42:45.026 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:42:45.028 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:42:45.029 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:42:45.031 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:42:45.032 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:42:45.034 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:42:45.035 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:42:45.037 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:42:45.038 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:42:45.042 +08:00 [INF] 获取客户统计数据
2025-05-29 19:42:45.048 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:42:45.052 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:42:45.055 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 13.7875ms
2025-05-29 19:42:45.057 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:42:45.059 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 77.3626ms
2025-05-29 19:45:02.316 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:45:02.339 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:45:02.341 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:45:02.344 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:45:02.345 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:45:02.346 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:45:02.347 +08:00 [INF] 请求方法: GET
2025-05-29 19:45:02.348 +08:00 [INF] 请求方法: GET
2025-05-29 19:45:02.349 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:45:02.350 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:45:02.351 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:45:02.353 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:45:02.354 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:45:02.355 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:45:02.357 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:45:02.358 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:45:02.360 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:45:02.361 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:45:02.362 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:45:02.364 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:45:02.365 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:45:02.367 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:45:02.368 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:45:02.369 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:45:02.371 +08:00 [INF] 请求头: traceparent = 00-d386d885544611658525aebef997dc5e-a378021501a86c7e-00
2025-05-29 19:45:02.372 +08:00 [INF] 请求头: traceparent = 00-2b345dd2aebb18aa14556e7abbea6c80-8e175dda27f823a3-00
2025-05-29 19:45:02.373 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:45:02.375 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:45:02.376 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:45:02.377 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:45:02.379 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:45:02.380 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:45:02.381 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:45:02.383 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:45:02.384 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:45:02.385 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:45:02.387 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:45:02.388 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:45:02.390 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:45:02.391 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:45:02.392 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:45:02.394 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:45:02.395 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:45:02.397 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:45:02.398 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:45:02.399 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:45:02.400 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:45:02.401 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:45:02.402 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:02.403 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:02.404 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:45:02.406 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:45:02.408 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:45:02.409 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:45:02.410 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:45:02.412 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:45:02.413 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:45:02.414 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:45:02.416 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:45:02.417 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:45:02.419 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:45:02.420 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:45:02.421 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:45:02.423 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:45:02.424 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:45:02.426 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:45:02.427 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:45:02.428 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:45:02.430 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:02.431 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:02.432 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:45:02.434 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:45:02.435 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:45:02.436 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:45:02.441 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:45:02.442 +08:00 [INF] 获取客户统计数据
2025-05-29 19:45:02.457 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:45:02.457 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:45:02.461 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:45:02.468 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 27.6224ms
2025-05-29 19:45:02.469 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:45:02.470 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:45:02.473 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:45:02.475 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 138.3376ms
2025-05-29 19:45:02.477 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 38.7796ms
2025-05-29 19:45:02.483 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:45:02.485 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 169.3274ms
2025-05-29 19:45:04.971 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:45:04.975 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:45:04.976 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:45:04.977 +08:00 [INF] 请求方法: GET
2025-05-29 19:45:04.979 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:45:04.980 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:45:04.982 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:45:04.983 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:45:04.985 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:45:04.985 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:45:04.987 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:45:04.990 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:45:04.991 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:45:04.992 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:45:04.994 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:45:04.995 +08:00 [INF] 请求方法: GET
2025-05-29 19:45:04.997 +08:00 [INF] 请求头: traceparent = 00-595ccc07f6d7f70b3189e645b640544a-316c3c0aeeb95d5b-00
2025-05-29 19:45:04.998 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:45:04.999 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:45:05.001 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:45:05.002 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:45:05.004 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:45:05.006 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:45:05.007 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:45:05.009 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:45:05.011 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:45:05.013 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:45:05.014 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:45:05.016 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:45:05.018 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:45:05.020 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:45:05.021 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:45:05.023 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:45:05.024 +08:00 [INF] 请求头: traceparent = 00-937962b7502bbe3e069273be70eef974-8ee603963250998b-00
2025-05-29 19:45:05.026 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:45:05.027 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:45:05.028 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:45:05.030 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:45:05.032 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:45:05.033 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:45:05.035 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:05.036 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:45:05.038 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:45:05.039 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:45:05.041 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:45:05.043 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:45:05.044 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:45:05.046 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:45:05.047 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:45:05.049 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:45:05.050 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:45:05.052 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:45:05.054 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:45:05.055 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:45:05.056 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:45:05.058 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:45:05.059 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:45:05.061 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:05.062 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:45:05.063 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:45:05.065 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:05.066 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:45:05.067 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:45:05.069 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:45:05.070 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:45:05.071 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:45:05.075 +08:00 [INF] 获取客户统计数据
2025-05-29 19:45:05.075 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:45:05.081 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:45:05.083 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:45:05.084 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:45:05.087 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:45:05.088 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:45:05.090 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 16.508ms
2025-05-29 19:45:05.091 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:45:05.093 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:45:05.094 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:45:05.095 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 124.8572ms
2025-05-29 19:45:05.096 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:45:05.102 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:45:05.106 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:45:05.117 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:45:05.126 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:45:05.129 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:45:05.132 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 26.8422ms
2025-05-29 19:45:05.133 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:45:05.135 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 149.9551ms
2025-05-29 19:46:31.088 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:46:31.093 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:46:31.094 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:46:31.096 +08:00 [INF] 请求方法: GET
2025-05-29 19:46:31.098 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:46:31.102 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:46:31.104 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:46:31.118 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:46:31.120 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:46:31.121 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:46:31.123 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:46:31.125 +08:00 [INF] 请求方法: GET
2025-05-29 19:46:31.127 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:46:31.128 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:46:31.129 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:46:31.131 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:46:31.133 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:46:31.135 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:46:31.137 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:46:31.139 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:46:31.141 +08:00 [INF] 请求头: traceparent = 00-59fee548c0a1e90f3d7c7307380aacff-a5c1c844b68486de-00
2025-05-29 19:46:31.143 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:46:31.144 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:46:31.146 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:46:31.148 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:46:31.150 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:46:31.152 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:46:31.154 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:46:31.155 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:46:31.157 +08:00 [INF] 请求头: traceparent = 00-91c02184d0e3511e533141ef562d7227-b8b963f2aafbc2a0-00
2025-05-29 19:46:31.159 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:46:31.160 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:46:31.162 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:46:31.164 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:46:31.166 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:46:31.168 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:46:31.169 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:46:31.171 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:46:31.173 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:46:31.175 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:46:31.176 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:46:31.177 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:46:31.179 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:46:31.180 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:46:31.181 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:31.183 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:46:31.185 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:46:31.187 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:46:31.189 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:46:31.190 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:46:31.192 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:46:31.194 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:46:31.195 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:46:31.197 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:31.199 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:46:31.201 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:46:31.203 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:46:31.205 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:46:31.207 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:46:31.209 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:46:31.210 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:46:31.212 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:46:31.214 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:46:31.216 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:46:31.218 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:31.219 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:46:31.221 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:46:31.222 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:46:31.224 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:46:31.226 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:46:31.231 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:46:31.231 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:46:31.233 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:31.243 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:46:31.247 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:46:31.247 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:46:31.251 +08:00 [INF] 获取客户统计数据
2025-05-29 19:46:31.259 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:46:31.260 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:46:31.266 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:46:31.268 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:46:31.270 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 20.859ms
2025-05-29 19:46:31.273 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 44.3555ms
2025-05-29 19:46:31.276 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:46:31.278 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:46:31.281 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 178.5058ms
2025-05-29 19:46:31.283 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 194.9962ms
2025-05-29 19:46:36.989 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:46:36.995 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:46:36.998 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:46:37.000 +08:00 [INF] 请求方法: GET
2025-05-29 19:46:37.003 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:46:37.005 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:46:37.007 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:46:37.010 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:46:37.012 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:46:37.015 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:46:37.018 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:46:37.021 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:46:37.023 +08:00 [INF] 请求头: traceparent = 00-1d2fdda85217be40cf30ca5f0e128c13-488ba3de4f6b3b08-00
2025-05-29 19:46:37.026 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:46:37.028 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:46:37.030 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:46:37.033 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:46:37.036 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:46:37.038 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:46:37.041 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:46:37.044 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:46:37.047 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:46:37.049 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:46:37.051 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:46:37.053 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:37.056 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:46:37.059 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:46:37.062 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:46:37.065 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:46:37.068 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:46:37.070 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:46:37.073 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:46:37.075 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:46:37.078 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:46:37.080 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:37.083 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:46:37.085 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:46:37.090 +08:00 [INF] 获取客户统计数据
2025-05-29 19:46:37.099 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:46:37.105 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:46:37.108 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 18.6364ms
2025-05-29 19:46:37.111 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:46:37.113 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 123.5481ms
2025-05-29 19:46:37.332 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:46:37.337 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:46:37.338 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:46:37.340 +08:00 [INF] 请求方法: GET
2025-05-29 19:46:37.342 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:46:37.344 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:46:37.346 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:46:37.348 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:46:37.351 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:46:37.353 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:46:37.356 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:46:37.358 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:46:37.361 +08:00 [INF] 请求头: traceparent = 00-6d2ecb5ebed13be90c7f94c3fa272c3d-187c2062493d058a-00
2025-05-29 19:46:37.363 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:46:37.366 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:46:37.368 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:46:37.370 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:46:37.372 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:46:37.374 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:46:37.377 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:46:37.379 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:46:37.382 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:46:37.383 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:46:37.385 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:46:37.387 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:37.389 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:46:37.391 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:46:37.393 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:46:37.395 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:46:37.398 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:46:37.400 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:46:37.402 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:46:37.404 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:46:37.406 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:46:37.408 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:37.410 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:46:37.412 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:46:37.417 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:46:37.435 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:46:37.470 +08:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:46:37.475 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:46:37.478 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 62.7206ms
2025-05-29 19:46:37.482 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:46:37.485 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 152.4894ms
2025-05-29 19:46:57.219 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:46:57.223 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:46:57.224 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:46:57.225 +08:00 [INF] 请求方法: GET
2025-05-29 19:46:57.227 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:46:57.228 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:46:57.230 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:46:57.231 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:46:57.233 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:46:57.235 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:46:57.237 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:46:57.238 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:46:57.240 +08:00 [INF] 请求头: traceparent = 00-2fe411aea9baf961c63f14a0bccd4dc8-ba8d951c19d72092-00
2025-05-29 19:46:57.242 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:46:57.243 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:46:57.245 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:46:57.246 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:46:57.248 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:46:57.249 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:46:57.251 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:46:57.252 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:46:57.254 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:46:57.255 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:46:57.256 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:46:57.258 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:57.259 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:46:57.261 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:46:57.262 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:46:57.264 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:46:57.266 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:46:57.268 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:46:57.269 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:46:57.271 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:46:57.272 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:46:57.274 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:57.275 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:46:57.277 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:46:57.280 +08:00 [INF] 获取客户统计数据
2025-05-29 19:46:57.286 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:46:57.289 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:46:57.291 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 12.5952ms
2025-05-29 19:46:57.293 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:46:57.295 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 75.4487ms
2025-05-29 19:46:57.417 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:46:57.421 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:46:57.422 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:46:57.423 +08:00 [INF] 请求方法: GET
2025-05-29 19:46:57.425 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:46:57.426 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:46:57.428 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:46:57.429 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:46:57.431 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:46:57.432 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:46:57.434 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:46:57.435 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:46:57.436 +08:00 [INF] 请求头: traceparent = 00-17cb2c2e32360456c5bdf456e6f80949-88ad1d0bef332711-00
2025-05-29 19:46:57.438 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:46:57.439 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:46:57.441 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:46:57.442 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:46:57.444 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:46:57.445 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:46:57.446 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:46:57.448 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:46:57.450 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:46:57.451 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:46:57.452 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:46:57.453 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:57.454 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:46:57.456 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:46:57.458 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:46:57.459 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:46:57.461 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:46:57.462 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:46:57.464 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:46:57.465 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:46:57.467 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:46:57.468 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:46:57.470 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:46:57.471 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:46:57.475 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:46:57.484 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:46:57.491 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:46:57.494 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:46:57.495 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 21.7121ms
2025-05-29 19:46:57.497 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:46:57.499 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 81.742ms
2025-05-29 19:47:03.554 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:47:03.558 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:47:03.559 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:47:03.561 +08:00 [INF] 请求方法: GET
2025-05-29 19:47:03.562 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:47:03.563 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:47:03.565 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:47:03.567 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:47:03.568 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:47:03.569 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:47:03.571 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:47:03.572 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:47:03.573 +08:00 [INF] 请求头: traceparent = 00-1578150b3423b9b7035499a7d916c467-56efa2d809bde4ae-00
2025-05-29 19:47:03.575 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:47:03.576 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:47:03.578 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:47:03.579 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:47:03.581 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:47:03.582 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:47:03.583 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:47:03.585 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:47:03.586 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:47:03.587 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:47:03.588 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:47:03.589 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:47:03.591 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:47:03.592 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:47:03.593 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:47:03.595 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:47:03.596 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:47:03.598 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:47:03.599 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:47:03.600 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:47:03.602 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:47:03.603 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:47:03.604 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:47:03.606 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:47:03.610 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:47:03.624 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:47:03.630 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:47:03.634 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:47:03.636 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 28.0744ms
2025-05-29 19:47:03.638 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:47:03.639 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 84.7788ms
2025-05-29 19:47:03.824 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:47:03.828 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:47:03.829 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:47:03.830 +08:00 [INF] 请求方法: GET
2025-05-29 19:47:03.831 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:47:03.833 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:47:03.834 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:47:03.836 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:47:03.837 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:47:03.838 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:47:03.840 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:47:03.842 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:47:03.844 +08:00 [INF] 请求头: traceparent = 00-6368609a40758448be48b658196650f1-6305b13bcef13347-00
2025-05-29 19:47:03.846 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:47:03.848 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:47:03.849 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:47:03.851 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:47:03.852 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:47:03.854 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:47:03.855 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:47:03.857 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:47:03.859 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:47:03.860 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:47:03.862 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:47:03.863 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:47:03.864 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:47:03.865 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:47:03.867 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:47:03.868 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:47:03.870 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:47:03.871 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:47:03.873 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:47:03.875 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:47:03.876 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:47:03.877 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:47:03.878 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:47:03.879 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:47:03.882 +08:00 [INF] 获取客户统计数据
2025-05-29 19:47:03.887 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:47:03.889 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:47:03.891 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 9.2825ms
2025-05-29 19:47:03.893 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:47:03.894 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 69.5716ms
2025-05-29 19:48:28.988 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:48:28.991 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:48:28.992 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:48:28.993 +08:00 [INF] 请求方法: GET
2025-05-29 19:48:28.994 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:48:28.995 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:48:28.996 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:48:29.005 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:48:29.007 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:48:29.007 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:48:29.016 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:48:29.018 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:48:29.019 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:48:29.020 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:48:29.021 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:48:29.022 +08:00 [INF] 请求方法: GET
2025-05-29 19:48:29.023 +08:00 [INF] 请求头: traceparent = 00-aaeccf75134fe229b6104af1bdef4961-c382fc608ac09a49-00
2025-05-29 19:48:29.024 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:48:29.025 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:48:29.026 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:48:29.027 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:48:29.028 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:48:29.029 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:48:29.030 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:48:29.031 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:48:29.032 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:48:29.034 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:48:29.035 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:48:29.037 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:48:29.038 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:48:29.040 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:48:29.041 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:48:29.042 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:48:29.043 +08:00 [INF] 请求头: traceparent = 00-c4df83127b6defc6d8d89b7930f3902d-69ba6826f78f82cc-00
2025-05-29 19:48:29.044 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:48:29.045 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:48:29.045 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:48:29.047 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:48:29.048 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:48:29.049 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:48:29.050 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:48:29.051 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:48:29.052 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:48:29.053 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:48:29.054 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:48:29.055 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:48:29.056 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:48:29.057 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:48:29.058 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:48:29.059 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:48:29.061 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:48:29.062 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:48:29.063 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:48:29.064 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:48:29.065 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:48:29.066 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:48:29.067 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:48:29.068 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:48:29.069 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:48:29.070 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:48:29.071 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:48:29.072 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:48:29.074 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:48:29.074 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:48:29.075 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:48:29.077 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:48:29.079 +08:00 [INF] 获取客户统计数据
2025-05-29 19:48:29.079 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:48:29.082 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:48:29.084 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:48:29.085 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:48:29.085 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:48:29.086 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:48:29.089 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:48:29.089 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:48:29.090 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 12.1224ms
2025-05-29 19:48:29.091 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:48:29.092 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:48:29.093 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:48:29.094 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 106.5985ms
2025-05-29 19:48:29.098 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:48:29.109 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:48:29.115 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:48:29.117 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:48:29.119 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 21.856ms
2025-05-29 19:48:29.120 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:48:29.121 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 113.6083ms
2025-05-29 19:49:41.008 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:49:41.010 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:49:41.011 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:49:41.012 +08:00 [INF] 请求方法: GET
2025-05-29 19:49:41.013 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:49:41.014 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:49:41.015 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:49:41.016 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:49:41.017 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:49:41.018 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:49:41.019 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:49:41.020 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:49:41.021 +08:00 [INF] 请求头: traceparent = 00-7491c0bb3c1eb6c09bd9a1f92daa1758-2e6b426e981d2b41-00
2025-05-29 19:49:41.022 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:49:41.023 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:49:41.024 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:49:41.025 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:49:41.026 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:49:41.027 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:49:41.028 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:49:41.029 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:49:41.030 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:49:41.031 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:49:41.032 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:49:41.033 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:41.034 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:49:41.035 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:49:41.036 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:49:41.037 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:49:41.039 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:49:41.040 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:49:41.041 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:49:41.042 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:49:41.044 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:49:41.045 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:41.046 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:49:41.048 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:49:41.051 +08:00 [INF] 获取客户统计数据
2025-05-29 19:49:41.063 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:49:41.066 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:49:41.067 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 17.4857ms
2025-05-29 19:49:41.069 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:49:41.070 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 61.8288ms
2025-05-29 19:49:41.170 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:49:41.174 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:49:41.175 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:49:41.177 +08:00 [INF] 请求方法: GET
2025-05-29 19:49:41.178 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:49:41.179 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:49:41.180 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:49:41.181 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:49:41.182 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:49:41.183 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:49:41.185 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:49:41.186 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:49:41.187 +08:00 [INF] 请求头: traceparent = 00-21ddee15afaaedbcb1dbf39bf7902f1e-6b01862cee470a85-00
2025-05-29 19:49:41.189 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:49:41.190 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:49:41.193 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:49:41.194 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:49:41.196 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:49:41.197 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:49:41.199 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:49:41.200 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:49:41.201 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:49:41.202 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:49:41.202 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:49:41.203 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:41.205 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:49:41.206 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:49:41.208 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:49:41.209 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:49:41.211 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:49:41.212 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:49:41.213 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:49:41.215 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:49:41.216 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:49:41.217 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:41.218 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:49:41.220 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:49:41.224 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:49:41.235 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:49:41.251 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:49:41.254 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:49:41.256 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 33.8975ms
2025-05-29 19:49:41.258 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:49:41.260 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 89.9272ms
2025-05-29 19:49:46.193 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:49:46.197 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:49:46.199 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:49:46.200 +08:00 [INF] 请求方法: GET
2025-05-29 19:49:46.201 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:49:46.203 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:49:46.205 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:49:46.206 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:49:46.208 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:49:46.211 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:49:46.213 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:49:46.214 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:49:46.216 +08:00 [INF] 请求头: traceparent = 00-662d5b9672826796ae119d32fde1bfed-f633173b382b9acf-00
2025-05-29 19:49:46.218 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:49:46.219 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:49:46.223 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:49:46.230 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:49:46.230 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:49:46.235 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:49:46.236 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:49:46.238 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:49:46.239 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:49:46.241 +08:00 [INF] 请求方法: GET
2025-05-29 19:49:46.242 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:49:46.244 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:49:46.245 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:49:46.247 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:49:46.249 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:49:46.250 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:49:46.251 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:49:46.253 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:49:46.254 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:49:46.255 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:49:46.256 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:46.258 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:49:46.260 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:49:46.261 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:49:46.263 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:49:46.264 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:49:46.265 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:49:46.267 +08:00 [INF] 请求头: traceparent = 00-00c34cf126775b94c0e01a828ec3fd80-ef3dc3a85c474291-00
2025-05-29 19:49:46.268 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:49:46.269 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:49:46.271 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:49:46.272 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:49:46.273 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:49:46.275 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:49:46.276 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:49:46.277 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:49:46.278 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:49:46.280 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:49:46.281 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:49:46.283 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:49:46.284 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:46.285 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:49:46.286 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:49:46.287 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:49:46.288 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:49:46.290 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:49:46.292 +08:00 [INF] 获取客户统计数据
2025-05-29 19:49:46.292 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:49:46.295 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:49:46.296 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:49:46.299 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:49:46.299 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:46.301 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 9.7019ms
2025-05-29 19:49:46.302 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:49:46.303 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:49:46.304 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:49:46.306 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 112.9395ms
2025-05-29 19:49:46.307 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:49:46.312 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:49:46.313 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:49:46.315 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:49:46.316 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:49:46.317 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:49:46.318 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:49:46.320 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:49:46.321 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:49:46.322 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:49:46.325 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:49:46.334 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:49:46.339 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:49:46.342 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:49:46.344 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.9094ms
2025-05-29 19:49:46.346 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:49:46.347 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 117.1011ms
2025-05-29 19:50:06.387 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:50:06.396 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:50:06.397 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:50:06.398 +08:00 [INF] 请求方法: GET
2025-05-29 19:50:06.399 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:50:06.400 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:50:06.402 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:50:06.403 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:50:06.403 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:50:06.410 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:50:06.413 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:50:06.414 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:50:06.415 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:50:06.416 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:50:06.417 +08:00 [INF] 请求方法: GET
2025-05-29 19:50:06.418 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:50:06.419 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:50:06.420 +08:00 [INF] 请求头: traceparent = 00-371213a8f808407790f586f87113be5f-20f99037b0c6727a-00
2025-05-29 19:50:06.421 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:50:06.422 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:50:06.423 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:50:06.424 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:50:06.425 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:50:06.426 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:50:06.427 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:50:06.428 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:50:06.430 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:50:06.431 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:50:06.432 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:50:06.433 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:50:06.435 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:50:06.434 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:50:06.436 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:50:06.437 +08:00 [INF] 请求头: traceparent = 00-5bdf00884ee5c80268f1b98aa2eb9bea-ef8c059e24579c19-00
2025-05-29 19:50:06.438 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:50:06.439 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:50:06.441 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:50:06.442 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:50:06.440 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:50:06.443 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:50:06.444 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:50:06.444 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:50:06.445 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:06.447 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:50:06.448 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:50:06.448 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:50:06.450 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:50:06.451 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:50:06.450 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:50:06.452 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:50:06.453 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:50:06.454 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:50:06.455 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:50:06.456 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:06.457 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:50:06.458 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:50:06.460 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:50:06.459 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:50:06.461 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:50:06.463 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:50:06.464 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:50:06.465 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:50:06.466 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:50:06.467 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:50:06.468 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:50:06.469 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:06.470 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:50:06.471 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:50:06.472 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:50:06.473 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:50:06.474 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:50:06.476 +08:00 [INF] 获取客户统计数据
2025-05-29 19:50:06.476 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:06.479 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:50:06.481 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:50:06.483 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:50:06.487 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:50:06.491 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:50:06.492 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:50:06.496 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 20.012ms
2025-05-29 19:50:06.497 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:50:06.497 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:50:06.499 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:50:06.500 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 113.9222ms
2025-05-29 19:50:06.502 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 19.1734ms
2025-05-29 19:50:06.508 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:50:06.509 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 105.9934ms
2025-05-29 19:50:15.765 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:50:15.769 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:50:15.770 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:50:15.771 +08:00 [INF] 请求方法: GET
2025-05-29 19:50:15.773 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:50:15.774 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:50:15.776 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:50:15.777 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:50:15.779 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:50:15.781 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:50:15.782 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:50:15.784 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:50:15.785 +08:00 [INF] 请求头: traceparent = 00-6eb50818fccaa59377b8370511733abd-b4e5250e45e9c5e8-00
2025-05-29 19:50:15.787 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:50:15.788 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:50:15.790 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:50:15.791 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:50:15.792 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:50:15.793 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:50:15.795 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:50:15.796 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:50:15.798 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:50:15.799 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:50:15.800 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:50:15.801 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:15.802 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:50:15.804 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:50:15.805 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:50:15.807 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:50:15.808 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:50:15.810 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:50:15.811 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:50:15.812 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:50:15.814 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:50:15.815 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:15.816 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:50:15.817 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:50:15.820 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:50:15.832 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:50:15.845 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:50:15.848 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:50:15.850 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 30.7884ms
2025-05-29 19:50:15.852 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:50:15.854 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 88.764ms
2025-05-29 19:50:15.943 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:50:15.947 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:50:15.948 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:50:15.949 +08:00 [INF] 请求方法: GET
2025-05-29 19:50:15.950 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:50:15.951 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:50:15.953 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:50:15.954 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:50:15.955 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:50:15.957 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiZDIzOGM0OTItMTUxZS00YWQ4LWI4NWUtMWEwMjRkMThmNTRiIiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MTk0NDAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.B4RbAMptSPVkxCqYb5SppL3YICC0D5Snf5qI1vNv2xQ
2025-05-29 19:50:15.958 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:50:15.959 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:50:15.961 +08:00 [INF] 请求头: traceparent = 00-3c37b7732d69e88eabe5731c74f71cc5-3d5b4723a72c4fd3-00
2025-05-29 19:50:15.962 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:50:15.964 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:50:15.965 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:50:15.967 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:50:15.968 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:50:15.969 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:50:15.971 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:50:15.972 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:50:15.973 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:50:15.974 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:50:15.975 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:50:15.976 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:15.977 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:50:15.978 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:50:15.979 +08:00 [INF] JWT Claim: jti = d238c492-151e-4ad8-b85e-1a024d18f54b
2025-05-29 19:50:15.980 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:50:15.982 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:50:15.983 +08:00 [INF] JWT Claim: exp = 1748519440
2025-05-29 19:50:15.984 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:50:15.985 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:50:15.986 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:50:15.987 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:50:15.988 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:50:15.989 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:50:15.992 +08:00 [INF] 获取客户统计数据
2025-05-29 19:50:15.996 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:50:15.998 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:50:15.999 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 8.0502ms
2025-05-29 19:50:16.001 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:50:16.002 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 58.9018ms
2025-05-29 19:51:20.540 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:51:20.547 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:51:20.547 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:51:20.549 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:51:20.550 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:51:20.551 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:51:20.551 +08:00 [INF] 请求方法: GET
2025-05-29 19:51:20.552 +08:00 [INF] 请求方法: GET
2025-05-29 19:51:20.553 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:51:20.554 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:51:20.555 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:51:20.556 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:51:20.557 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:51:20.558 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:51:20.559 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:51:20.561 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:51:20.560 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:51:20.562 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:51:20.563 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:51:20.565 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:51:20.566 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:51:20.567 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:51:20.568 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:51:20.569 +08:00 [INF] 请求头: traceparent = 00-8c6d5b2973014f39f644bdda36203d8e-2566414c2b49e619-00
2025-05-29 19:51:20.570 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:51:20.571 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:51:20.572 +08:00 [INF] 请求头: traceparent = 00-b20c139f920d3b6a5fa73866a37021f5-32caa69ec1adc713-00
2025-05-29 19:51:20.573 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:51:20.575 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:51:20.574 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:51:20.576 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:51:20.577 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:51:20.579 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:51:20.580 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:51:20.582 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:51:20.581 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:51:20.583 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:51:20.584 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:51:20.585 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:51:20.586 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:51:20.587 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:51:20.588 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:51:20.589 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:51:20.590 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:51:20.591 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:51:20.592 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:51:20.592 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:51:20.593 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:51:20.594 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:51:20.595 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:51:20.596 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:51:20.597 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:51:20.599 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:51:20.600 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:51:20.601 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:51:20.602 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:51:20.603 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:51:20.604 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:51:20.605 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:51:20.606 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:51:20.608 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:51:20.609 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:51:20.610 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:51:20.612 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:51:20.613 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:51:20.614 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:51:20.616 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:51:20.617 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:51:20.618 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:51:20.619 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:51:20.620 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:51:20.621 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:51:20.622 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:51:20.625 +08:00 [INF] 获取客户统计数据
2025-05-29 19:51:20.626 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:51:20.631 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:51:20.633 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:51:20.641 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:51:20.674 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:51:20.677 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 53.2536ms
2025-05-29 19:51:20.678 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:51:20.679 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:51:20.681 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:51:20.682 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 142.2997ms
2025-05-29 19:51:20.683 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 52.5511ms
2025-05-29 19:51:20.688 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:51:20.689 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 142.2991ms
2025-05-29 19:52:49.056 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:52:49.059 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:52:49.061 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:52:49.064 +08:00 [INF] 请求方法: GET
2025-05-29 19:52:49.079 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:52:49.086 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:52:49.087 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:52:49.089 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:52:49.091 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:52:49.093 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:52:49.094 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:52:49.094 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:52:49.095 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:52:49.099 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:52:49.100 +08:00 [INF] 请求头: traceparent = 00-ef139e07a22aef8ffd8f80939650e35e-def7d646aeaf7a84-00
2025-05-29 19:52:49.101 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:52:49.102 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:52:49.103 +08:00 [INF] 请求方法: GET
2025-05-29 19:52:49.105 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:52:49.106 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:52:49.107 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:52:49.108 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:52:49.110 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:52:49.111 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:52:49.113 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:52:49.114 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:52:49.115 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:52:49.117 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:52:49.118 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:52:49.119 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:52:49.121 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:52:49.122 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:52:49.123 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:52:49.125 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:52:49.125 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:52:49.126 +08:00 [INF] 请求头: traceparent = 00-60f5cef8bb519c05536c8ed3099114bb-39ec4930f4d9e8a6-00
2025-05-29 19:52:49.128 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:52:49.129 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:52:49.130 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:52:49.131 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:52:49.133 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:52:49.134 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:52:49.135 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:52:49.137 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:52:49.138 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:52:49.140 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:52:49.141 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:52:49.142 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:52:49.143 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:52:49.145 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:52:49.146 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:52:49.148 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:52:49.149 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:52:49.150 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:52:49.151 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:52:49.152 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:52:49.154 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:52:49.155 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:52:49.156 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:52:49.156 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:52:49.158 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:52:49.159 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:52:49.160 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:52:49.161 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:52:49.164 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:52:49.165 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:52:49.177 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:52:49.179 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:52:49.180 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:52:49.181 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:52:49.185 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:52:49.187 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:52:49.187 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:52:49.190 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:52:49.190 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:52:49.192 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 29.0389ms
2025-05-29 19:52:49.193 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:52:49.195 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:52:49.196 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:52:49.197 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 141.7538ms
2025-05-29 19:52:49.198 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:52:49.205 +08:00 [INF] 获取客户统计数据
2025-05-29 19:52:49.210 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:52:49.214 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:52:49.216 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 11.9843ms
2025-05-29 19:52:49.218 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:52:49.220 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 125.7905ms
2025-05-29 19:53:22.797 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:53:22.800 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:53:22.801 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:53:22.802 +08:00 [INF] 请求方法: GET
2025-05-29 19:53:22.804 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:53:22.805 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:53:22.806 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:53:22.808 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:53:22.809 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:53:22.811 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:53:22.812 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:53:22.813 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:53:22.818 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:53:22.821 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:53:22.822 +08:00 [INF] 请求头: traceparent = 00-dc6f05f5e036d2229e120889cb8597b7-4d950699289e5c18-00
2025-05-29 19:53:22.822 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:53:22.823 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:53:22.824 +08:00 [INF] 请求方法: GET
2025-05-29 19:53:22.825 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:53:22.826 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:53:22.827 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:53:22.829 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:53:22.830 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:53:22.831 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:53:22.832 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:53:22.833 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:53:22.834 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:53:22.835 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:53:22.837 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:53:22.838 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:53:22.839 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:53:22.840 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:53:22.841 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:53:22.842 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:53:22.843 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:53:22.844 +08:00 [INF] 请求头: traceparent = 00-bf4f8f93e7c44a037491d6e4a2f5d63b-6f195f05aeb00074-00
2025-05-29 19:53:22.845 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:53:22.846 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:53:22.847 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:22.848 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:53:22.850 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:53:22.851 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:53:22.852 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:53:22.853 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:53:22.856 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:53:22.855 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:53:22.857 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:53:22.858 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:53:22.860 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:53:22.861 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:53:22.862 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:53:22.864 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:53:22.865 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:53:22.866 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:53:22.867 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:53:22.869 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:53:22.870 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:53:22.871 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:53:22.872 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:22.873 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:22.874 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:53:22.874 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:53:22.875 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:53:22.876 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:53:22.878 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:53:22.880 +08:00 [INF] 获取客户统计数据
2025-05-29 19:53:22.881 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:53:22.884 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:53:22.886 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:53:22.887 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:53:22.889 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:53:22.890 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:53:22.890 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:53:22.893 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:53:22.893 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:22.895 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 15.5461ms
2025-05-29 19:53:22.896 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:53:22.898 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:53:22.899 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:53:22.901 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 103.7801ms
2025-05-29 19:53:22.904 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:53:22.921 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:53:22.926 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:53:22.930 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:53:22.931 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 28.0076ms
2025-05-29 19:53:22.933 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:53:22.935 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 121.8403ms
2025-05-29 19:53:36.687 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:53:36.690 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:53:36.691 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:53:36.692 +08:00 [INF] 请求方法: GET
2025-05-29 19:53:36.693 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:53:36.694 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:53:36.695 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:53:36.696 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:53:36.697 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:53:36.699 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:53:36.700 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:53:36.701 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:53:36.702 +08:00 [INF] 请求头: traceparent = 00-a797c6d575caabadfdcada96057947b2-b995102e4a78af65-00
2025-05-29 19:53:36.703 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:53:36.704 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:53:36.706 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:53:36.707 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:53:36.708 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:53:36.709 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:53:36.710 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:53:36.711 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:53:36.712 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:53:36.713 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:53:36.714 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:53:36.715 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:36.716 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:53:36.717 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:53:36.718 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:53:36.720 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:53:36.721 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:53:36.722 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:53:36.723 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:53:36.724 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:53:36.725 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:53:36.726 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:36.727 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:53:36.728 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:53:36.730 +08:00 [INF] 获取客户统计数据
2025-05-29 19:53:36.736 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:53:36.739 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:53:36.741 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 11.0046ms
2025-05-29 19:53:36.742 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:53:36.744 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 56.4738ms
2025-05-29 19:53:36.881 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:53:36.884 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:53:36.885 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:53:36.887 +08:00 [INF] 请求方法: GET
2025-05-29 19:53:36.888 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:53:36.889 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:53:36.891 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:53:36.892 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:53:36.894 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:53:36.896 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:53:36.898 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:53:36.899 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:53:36.901 +08:00 [INF] 请求头: traceparent = 00-09632b2c294a47e1eece8bb89421b65f-9eabfd2cfac75579-00
2025-05-29 19:53:36.903 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:53:36.905 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:53:36.906 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:53:36.908 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:53:36.909 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:53:36.911 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:53:36.913 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:53:36.914 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:53:36.916 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:53:36.918 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:53:36.919 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:53:36.920 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:36.922 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:53:36.923 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:53:36.924 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:53:36.925 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:53:36.927 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:53:36.929 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:53:36.930 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:53:36.932 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:53:36.933 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:53:36.934 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:53:36.935 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:53:36.937 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:53:36.939 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:53:36.948 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:53:36.953 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:53:36.956 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:53:36.957 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 18.4566ms
2025-05-29 19:53:36.959 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:53:36.960 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 79.0259ms
2025-05-29 19:55:15.254 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:55:15.262 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:55:15.266 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:55:15.269 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:55:15.277 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:55:15.278 +08:00 [INF] 请求方法: GET
2025-05-29 19:55:15.278 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:55:15.279 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:55:15.280 +08:00 [INF] 请求方法: GET
2025-05-29 19:55:15.282 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:55:15.282 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:55:15.283 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:55:15.284 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:55:15.286 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:55:15.287 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:55:15.288 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:55:15.290 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:55:15.291 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:55:15.292 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:55:15.293 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:55:15.294 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:55:15.296 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:55:15.297 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:55:15.298 +08:00 [INF] 请求头: traceparent = 00-0342b81ec3cf26054d80f3a8020d9006-eec8dd2ef7230585-00
2025-05-29 19:55:15.300 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:55:15.301 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:55:15.302 +08:00 [INF] 请求头: traceparent = 00-9a5034b30e2ea6bbd089924a4f324333-a80e83d2e2264b78-00
2025-05-29 19:55:15.304 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:55:15.305 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:55:15.307 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:55:15.308 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:55:15.309 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:55:15.311 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:55:15.312 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:55:15.313 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:55:15.315 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:55:15.316 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:55:15.317 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:55:15.319 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:55:15.318 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:55:15.320 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:55:15.321 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:55:15.323 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:55:15.324 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:55:15.324 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:55:15.325 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:55:15.326 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:15.327 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:55:15.328 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:55:15.329 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:55:15.330 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:55:15.330 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:15.332 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:55:15.333 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:55:15.334 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:55:15.335 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:55:15.336 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:55:15.337 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:55:15.338 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:55:15.339 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:55:15.340 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:55:15.342 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:55:15.341 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:55:15.343 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:55:15.345 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:55:15.346 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:15.346 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:55:15.348 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:55:15.349 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:55:15.350 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:55:15.351 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:55:15.353 +08:00 [INF] 获取客户统计数据
2025-05-29 19:55:15.353 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:15.356 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:55:15.357 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:55:15.357 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:55:15.359 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:55:15.361 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:55:15.362 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 9.3973ms
2025-05-29 19:55:15.369 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:55:15.370 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:55:15.370 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 116.1753ms
2025-05-29 19:55:15.377 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:55:15.379 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:55:15.381 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 20.1073ms
2025-05-29 19:55:15.382 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:55:15.384 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 117.5775ms
2025-05-29 19:55:25.645 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:55:25.648 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:55:25.649 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:55:25.651 +08:00 [INF] 请求方法: GET
2025-05-29 19:55:25.652 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:55:25.653 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:55:25.655 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:55:25.656 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:55:25.658 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:55:25.660 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:55:25.661 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:55:25.662 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:55:25.664 +08:00 [INF] 请求头: traceparent = 00-9bd5fbbe8ea8eb93f69a5580beb194f9-3eaf68a3e708c88c-00
2025-05-29 19:55:25.665 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:55:25.667 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:55:25.668 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:55:25.670 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:55:25.671 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:55:25.673 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:55:25.674 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:55:25.676 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:55:25.677 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:55:25.678 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:55:25.680 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:55:25.681 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:25.682 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:55:25.684 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:55:25.685 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:55:25.687 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:55:25.688 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:55:25.690 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:55:25.691 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:55:25.693 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:55:25.694 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:55:25.695 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:25.696 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:55:25.698 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:55:25.702 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:55:25.715 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:55:25.724 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:55:25.728 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:55:25.730 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 29.6618ms
2025-05-29 19:55:25.732 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:55:25.734 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 89.0945ms
2025-05-29 19:55:25.818 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:55:25.821 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:55:25.822 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:55:25.823 +08:00 [INF] 请求方法: GET
2025-05-29 19:55:25.824 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:55:25.825 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:55:25.827 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:55:25.828 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:55:25.829 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:55:25.830 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:55:25.831 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:55:25.833 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:55:25.834 +08:00 [INF] 请求头: traceparent = 00-1bac5e639c44f2e82c3b124d84f22760-09c9186a9186f456-00
2025-05-29 19:55:25.835 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:55:25.836 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:55:25.837 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:55:25.838 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:55:25.839 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:55:25.840 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:55:25.841 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:55:25.842 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:55:25.843 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:55:25.844 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:55:25.845 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:55:25.846 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:25.847 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:55:25.849 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:55:25.850 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:55:25.851 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:55:25.853 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:55:25.854 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:55:25.855 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:55:25.857 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:55:25.858 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:55:25.859 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:55:25.860 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:55:25.862 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:55:25.865 +08:00 [INF] 获取客户统计数据
2025-05-29 19:55:25.869 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:55:25.873 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:55:25.874 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 10.1796ms
2025-05-29 19:55:25.876 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:55:25.878 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 59.4876ms
2025-05-29 19:56:45.903 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:56:45.906 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:56:45.907 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:56:45.908 +08:00 [INF] 请求方法: GET
2025-05-29 19:56:45.908 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:56:45.910 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:56:45.911 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:56:45.912 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:56:45.913 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:56:45.915 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:56:45.916 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:56:45.917 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:56:45.919 +08:00 [INF] 请求头: traceparent = 00-3c369ed73762c01cc67fcc2266638411-7771d686803ebe4d-00
2025-05-29 19:56:45.920 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:56:45.921 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:56:45.923 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:56:45.924 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:56:45.925 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:56:45.926 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:56:45.928 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:56:45.929 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:56:45.930 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:56:45.931 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:56:45.932 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:56:45.933 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:45.934 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:56:45.935 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:56:45.937 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:56:45.938 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:56:45.940 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:56:45.941 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:56:45.942 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:56:45.943 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:56:45.944 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:56:45.945 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:45.946 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:56:45.948 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:56:45.951 +08:00 [INF] 获取客户统计数据
2025-05-29 19:56:45.955 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:56:45.958 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:56:45.960 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 9.8981ms
2025-05-29 19:56:45.961 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:56:45.963 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 59.7004ms
2025-05-29 19:56:46.042 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:56:46.046 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:56:46.047 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:56:46.049 +08:00 [INF] 请求方法: GET
2025-05-29 19:56:46.050 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:56:46.051 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:56:46.053 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:56:46.054 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:56:46.056 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:56:46.057 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:56:46.059 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:56:46.060 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:56:46.061 +08:00 [INF] 请求头: traceparent = 00-419172e2fad1338ea81d7b6bb9d880cd-92ff45f34d3dc18e-00
2025-05-29 19:56:46.063 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:56:46.065 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:56:46.066 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:56:46.067 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:56:46.068 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:56:46.069 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:56:46.070 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:56:46.071 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:56:46.072 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:56:46.073 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:56:46.074 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:56:46.075 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:46.076 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:56:46.077 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:56:46.078 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:56:46.079 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:56:46.080 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:56:46.081 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:56:46.082 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:56:46.084 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:56:46.085 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:56:46.086 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:46.087 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:56:46.088 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:56:46.090 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:56:46.098 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:56:46.108 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:56:46.110 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:56:46.112 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 22.3488ms
2025-05-29 19:56:46.114 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:56:46.115 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 72.8513ms
2025-05-29 19:56:50.228 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:56:50.232 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:56:50.233 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:56:50.234 +08:00 [INF] 请求方法: GET
2025-05-29 19:56:50.236 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:56:50.237 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:56:50.239 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:56:50.240 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:56:50.242 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:56:50.244 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:56:50.245 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:56:50.247 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:56:50.249 +08:00 [INF] 请求头: traceparent = 00-e865eb54bd51793f8cf6632d95c8af22-e717f2dec99fa23f-00
2025-05-29 19:56:50.250 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:56:50.252 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:56:50.253 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:56:50.255 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:56:50.257 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:56:50.258 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:56:50.259 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:56:50.260 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:56:50.263 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:56:50.264 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:56:50.265 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:56:50.266 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:56:50.267 +08:00 [INF] 请求方法: GET
2025-05-29 19:56:50.268 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:56:50.269 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:56:50.270 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:56:50.271 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:56:50.272 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:50.273 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:56:50.275 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:56:50.276 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:56:50.277 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:56:50.279 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:56:50.280 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:56:50.281 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:56:50.282 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:56:50.284 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:56:50.285 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:56:50.286 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:56:50.287 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:56:50.289 +08:00 [INF] 请求头: traceparent = 00-a3405c2bcafcb422f51eed3ee03f739c-011bfefb329d04a9-00
2025-05-29 19:56:50.290 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:56:50.291 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:56:50.293 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:56:50.294 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:56:50.295 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:56:50.296 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:56:50.297 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:50.298 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:56:50.299 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:56:50.300 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:56:50.301 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:56:50.302 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:56:50.305 +08:00 [INF] 获取客户统计数据
2025-05-29 19:56:50.306 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:56:50.311 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:56:50.311 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:56:50.318 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:56:50.321 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:56:50.322 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:56:50.323 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 18.775ms
2025-05-29 19:56:50.324 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:56:50.325 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:56:50.326 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:50.327 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 99.0644ms
2025-05-29 19:56:50.328 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:56:50.333 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:56:50.334 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:56:50.335 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:56:50.337 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:56:50.338 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:56:50.339 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:56:50.341 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:56:50.342 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:56:50.343 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:50.344 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:56:50.345 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:56:50.348 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:56:50.357 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:56:50.362 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:56:50.364 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:56:50.366 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 17.998ms
2025-05-29 19:56:50.367 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:56:50.368 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 109.5677ms
2025-05-29 19:56:56.593 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - null 0
2025-05-29 19:56:56.596 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:56:56.598 +08:00 [INF] 请求路径: /api/Client/GetClientStats/stats
2025-05-29 19:56:56.599 +08:00 [INF] 请求方法: GET
2025-05-29 19:56:56.600 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:56:56.601 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:56:56.603 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:56:56.604 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:56:56.606 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:56:56.608 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:56:56.609 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - null 0
2025-05-29 19:56:56.610 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:56:56.613 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:56:56.615 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:56:56.616 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:56:56.618 +08:00 [INF] 请求头: traceparent = 00-6b168806073ac48e7b24cdd26d9331ed-c90e27821f6f9eed-00
2025-05-29 19:56:56.620 +08:00 [INF] 请求方法: GET
2025-05-29 19:56:56.622 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:56:56.623 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:56:56.625 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:56:56.626 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:56:56.628 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:56:56.629 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:56:56.631 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:56:56.632 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:56:56.634 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:56:56.635 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:56:56.637 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:56:56.639 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:56:56.640 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:56:56.642 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:56:56.643 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:56:56.645 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:56:56.646 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:56:56.647 +08:00 [INF] 请求头: traceparent = 00-7ee5dee556a18786004527edb87f3038-710c0a269c932b1b-00
2025-05-29 19:56:56.648 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:56:56.650 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:56:56.651 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:56:56.652 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:56:56.654 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:56.655 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:56:56.657 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:56:56.658 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:56:56.660 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:56:56.661 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:56:56.663 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:56:56.665 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:56:56.667 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:56:56.668 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:56:56.670 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:56:56.672 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:56:56.674 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:56:56.675 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:56:56.677 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:56:56.679 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:56:56.681 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:56:56.682 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:56:56.684 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:56:56.685 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:56.687 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:56.689 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:56:56.691 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:56:56.693 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:56:56.695 +08:00 [INF] Route matched with {action = "GetClientStats", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.ClientService.Dtos.ClientStatsDto]] GetClientStats() on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:56:56.697 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:56:56.700 +08:00 [INF] 获取客户统计数据
2025-05-29 19:56:56.701 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:56:56.704 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:56:56.707 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CreateTime], [c].[Email], [c].[Name], [c].[Phone], [c].[Source], [c].[Status], [c].[Type], [c].[UpdateTime]
FROM [Clients] AS [c]
2025-05-29 19:56:56.708 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:56:56.711 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.ClientService.Dtos.ClientStatsDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:56:56.713 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:56:56.715 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService) in 15.6508ms
2025-05-29 19:56:56.717 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:56:56.719 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClientStats (RealEstateSolution.ClientService)'
2025-05-29 19:56:56.721 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:56:56.722 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClientStats/stats - 200 null application/json; charset=utf-8 129.9593ms
2025-05-29 19:56:56.724 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:56:56.730 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:56:56.732 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:56:56.737 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":5,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:56:56.752 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:56:56.760 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:56:56.764 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:56:56.766 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 30.7714ms
2025-05-29 19:56:56.768 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:56:56.770 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=5 - 200 null application/json; charset=utf-8 161.1586ms
2025-05-29 19:57:00.055 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 19:57:00.058 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:57:00.059 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:57:00.060 +08:00 [INF] 请求方法: GET
2025-05-29 19:57:00.061 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:57:00.062 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:57:00.064 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:57:00.066 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:57:00.068 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:57:00.069 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:57:00.070 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:57:00.072 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:57:00.073 +08:00 [INF] 请求头: traceparent = 00-21d3fc9588b9a5eece80b3b358c0b0ef-39c7e5c71828313e-00
2025-05-29 19:57:00.074 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:57:00.076 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:57:00.077 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:57:00.078 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:57:00.080 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:57:00.082 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:57:00.083 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:57:00.084 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:57:00.086 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:57:00.087 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:57:00.088 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:57:00.089 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:57:00.091 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:57:00.092 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:57:00.093 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:57:00.095 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:57:00.096 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:57:00.098 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:57:00.099 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:57:00.101 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:57:00.102 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:57:00.103 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:57:00.104 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:57:00.106 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:57:00.108 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":10,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:57:00.119 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:57:00.124 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:57:00.127 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:57:00.128 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 20.4353ms
2025-05-29 19:57:00.130 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:57:00.132 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 76.9169ms
2025-05-29 19:57:00.547 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - null 0
2025-05-29 19:57:00.551 +08:00 [INF] === UserContextMiddleware 开始处理请求 ===
2025-05-29 19:57:00.551 +08:00 [INF] 请求路径: /api/Client/GetClients
2025-05-29 19:57:00.552 +08:00 [INF] 请求方法: GET
2025-05-29 19:57:00.553 +08:00 [INF] 请求头: Accept = application/json, text/plain, */*
2025-05-29 19:57:00.555 +08:00 [INF] 请求头: Host = localhost:5003
2025-05-29 19:57:00.556 +08:00 [INF] 请求头: User-Agent = Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0
2025-05-29 19:57:00.558 +08:00 [INF] 请求头: Accept-Encoding = gzip, deflate, br, zstd
2025-05-29 19:57:00.559 +08:00 [INF] 请求头: Accept-Language = zh-CN, zh; q=0.9, en; q=0.8, en-GB; q=0.7, en-US; q=0.6
2025-05-29 19:57:00.561 +08:00 [INF] 请求头: Authorization = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiZWU0ZGY1LTY2ZDEtNGNmNS05NzRmLTg2YjFmZmNlZjhiMyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJhZG1pbiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImxzaXN3aW5AZ21haWwuY29tIiwianRpIjoiODU0NjdmZTQtNzMxOC00ZWZhLWFkMDItYWM3ZjVkZDA5ZWY5IiwiU2VjdXJpdHlTdGFtcCI6IklFWlBCS0dJSTRZT1RLSjNPSUQ1R1hMNFBMQkgzVVpXIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE3NDg1MjAwODAsImlzcyI6ImxzIiwiYXVkIjoiY29sZCJ9.8L9MqbXM9sSMUcj48Oj5gC-oMnOOvyUs_8vtBL3i2Co
2025-05-29 19:57:00.562 +08:00 [INF] 请求头: Origin = http://localhost:3000
2025-05-29 19:57:00.564 +08:00 [INF] 请求头: Referer = http://localhost:3000/
2025-05-29 19:57:00.565 +08:00 [INF] 请求头: traceparent = 00-5994b51292e31da760d56ca7cb5b45c6-f37448669e15ab9d-00
2025-05-29 19:57:00.567 +08:00 [INF] 请求头: Content-Length = 0
2025-05-29 19:57:00.568 +08:00 [INF] 请求头: sec-ch-ua-platform = "Windows"
2025-05-29 19:57:00.569 +08:00 [INF] 请求头: sec-ch-ua = "Not(A:Brand";v="99", "Microsoft Edge";v="133", "Chromium";v="133"
2025-05-29 19:57:00.570 +08:00 [INF] 请求头: sec-ch-ua-mobile = ?0
2025-05-29 19:57:00.572 +08:00 [INF] 请求头: sec-fetch-site = cross-site
2025-05-29 19:57:00.573 +08:00 [INF] 请求头: sec-fetch-mode = cors
2025-05-29 19:57:00.575 +08:00 [INF] 请求头: sec-fetch-dest = empty
2025-05-29 19:57:00.576 +08:00 [INF] 请求头: priority = u=1, i
2025-05-29 19:57:00.577 +08:00 [INF] 未从ApiGateway接收到X-User-Id头部
2025-05-29 19:57:00.578 +08:00 [INF] 检测到Authorization头部，将依赖JWT认证
2025-05-29 19:57:00.579 +08:00 [INF] JWT令牌解析成功，Claims数量: 9
2025-05-29 19:57:00.580 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:57:00.582 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin
2025-05-29 19:57:00.583 +08:00 [INF] JWT Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = lsiswin@gmail.com
2025-05-29 19:57:00.584 +08:00 [INF] JWT Claim: jti = 85467fe4-7318-4efa-ad02-ac7f5dd09ef9
2025-05-29 19:57:00.585 +08:00 [INF] JWT Claim: SecurityStamp = IEZPBKGII4YOTKJ3OID5GXL4PLBH3UZW
2025-05-29 19:57:00.587 +08:00 [INF] JWT Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = admin
2025-05-29 19:57:00.588 +08:00 [INF] JWT Claim: exp = 1748520080
2025-05-29 19:57:00.590 +08:00 [INF] JWT Claim: iss = ls
2025-05-29 19:57:00.591 +08:00 [INF] JWT Claim: aud = cold
2025-05-29 19:57:00.592 +08:00 [INF] === UserContextMiddleware 处理完成 ===
2025-05-29 19:57:00.593 +08:00 [INF] 用户身份验证成功: 6bee4df5-66d1-4cf5-974f-86b1ffcef8b3
2025-05-29 19:57:00.595 +08:00 [INF] Executing endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:57:00.596 +08:00 [INF] Route matched with {action = "GetClients", controller = "Client"}. Executing controller action with signature System.Threading.Tasks.Task`1[RealEstateSolution.Common.Utils.ApiResponse`1[RealEstateSolution.Common.Utils.PagedList`1[RealEstateSolution.ClientService.Dtos.ClientDto]]] GetClients(RealEstateSolution.ClientService.Dtos.ClientQueryDto) on controller RealEstateSolution.ClientService.Controllers.ClientController (RealEstateSolution.ClientService).
2025-05-29 19:57:00.599 +08:00 [INF] 获取客户列表 - 查询参数:{"PageIndex":1,"PageSize":10,"Name":null,"Phone":null,"Type":null,"Status":null,"Keyword":null,"$type":"ClientQueryDto"}
2025-05-29 19:57:00.610 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Clients] AS [c]
2025-05-29 19:57:00.615 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Phone], [c].[Email], [c].[Type], [c].[Status], [c].[Address], [c].[CreateTime], [c].[UpdateTime]
FROM [Clients] AS [c]
ORDER BY [c].[CreateTime] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-05-29 19:57:00.617 +08:00 [INF] Executing ObjectResult, writing value of type 'RealEstateSolution.Common.Utils.ApiResponse`1[[RealEstateSolution.Common.Utils.PagedList`1[[RealEstateSolution.ClientService.Dtos.ClientDto, RealEstateSolution.ClientService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], RealEstateSolution.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-29 19:57:00.619 +08:00 [INF] Executed action RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService) in 20.5427ms
2025-05-29 19:57:00.621 +08:00 [INF] Executed endpoint 'RealEstateSolution.ClientService.Controllers.ClientController.GetClients (RealEstateSolution.ClientService)'
2025-05-29 19:57:00.623 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5003/api/Client/GetClients?name=&phone=&pageIndex=1&pageSize=10 - 200 null application/json; charset=utf-8 75.8603ms
